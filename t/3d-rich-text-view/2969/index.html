<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>3D rich text view</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">3D rich text view</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Just finished porting my rich-text view to Urho3D.</p>
<div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="IElD7Ob9CyE" data-youtube-title="Urho3D 3D rich text view (WIP)"></div>
<p>The view renders very similar to the Text3D component, however its structured as a list of subwidgets that can render a specific type - image, text, video, custom.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Interesting. It adds a lot to the UI. Nice effects!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I will probably share the code when I get it done and clean. I’ve tried keeping it clean but its a port from another project and there are leftovers from there.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Victor</div>
          <div class="post_content">
<p>Wow, this is really amazing! It would be cool to see something like this as part of standard Urho3D <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Yes indeed, rich text is very useful, for instance in chats…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1163_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">yushli1</div>
          <div class="post_content">
<p>Like to see it integrated into the main branch</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Looks very good.<br/>
Don’t hesitate to share your non-perfect code. An enthused passerby might feel like polishing it, save you some time, do so in a jiffy with helpful remarks.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Almost done cleaning up the code and adding more features (line/character spacing). The rich-text view now supports different fonts. In my previous project it was able to load system fonts on Windows and Linux recognizing bold-italic fonts too…I’m not sure how this works with this project license. I’m planning more features like typewriting/morphing effect. I’m not sure if this code should go into the main branch, I consider it more like an utility project but lets see how it goes <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> I would definitely appreciate some help, so I’ll make it public asap</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I was busy lately but I found some spare time to rework this. Properties needs to be exposed and the HTML parser has to be rewritten from scratch<br/>
<img height="350" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/2e36cae11bd36515078f2ad24f675c48d96ba559.png" width="690"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>I’m eager to try it! But where’s the link?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Sorry no link yet, just announcing my progress, I’ll commit in my repo very soon</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p><img height="352" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/7f6c5359d270ff9e519cc7d2fa313eb58a1326ee.jpg" width="690"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Offtopic question - how many bones do you have on female model on your screenshot?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Can’t tell exactly, you can find it in Urho3D/Data/Models/Kachujin/</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I’ve finished the markup parsing yesturday, here’s the result:<br/>
<img height="352" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/8e516a71822d3d9fab44b3d87c36305c05afd9a1.jpg" width="690"/></p>
<pre><code class="lang-auto">Supported tags:
  &lt;br&gt; - line break
  &lt;b&gt;&lt;/b&gt; - bold
  &lt;i&gt;&lt;/i&gt; - italic
  &lt;color=#FF800000&gt;&lt;/color&gt; - change text color, supports 24/32 bit hex and color names
  &lt;size=14&gt;&lt;/size&gt; - change text size in pixels
  &lt;font=Fonts/Annonymous Pro.ttf&gt;&lt;/font&gt; - change text font
  &lt;img src=image.png width=320 height=240 /&gt; - embed an image</code></pre>
<p>The markup parser supports nesting, the text on above screenshot has this source:</p>
<pre><code class="lang-auto">&lt;color=blue&gt;&lt;color=red&gt;red&lt;br&gt;&lt;color=green&gt;green&lt;/color&gt;&lt;br&gt;red1&lt;/color&gt;&lt;br&gt;blue1&lt;br&gt;blue2&lt;/color&gt;&lt;color=orange&gt;orange&lt;/color&gt;&lt;size=10&gt;size=10&lt;/size&gt;&lt;br&gt;&lt;img src=Textures/Logo.png width=120 height=50 /&gt;123</code></pre>
<p>I only need to fix the coding style to match the Urho3D conventions and I’ll PR this</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Good. I see it good-looking in a ghost-in-the-shell like environment, filling out all that living wall with giant ads, you know…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>…or scrolling RSS feed on the bottom of the screen with something important <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1163_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">yushli1</div>
          <div class="post_content">
<p>That is a good feature. Hope to see it in the main branch soon.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/0973ea8ce7121c320f68413e2a2f23ab.svg" width="32"/>
<a href="https://github.com/PredatorMF/Urho3D/tree/rich-text" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="400" src="https://avatars1.githubusercontent.com/u/8559740?s=400&amp;v=4" width="400"/>
<h3><a href="https://github.com/PredatorMF/Urho3D/tree/rich-text" rel="nofollow noopener" target="_blank">PredatorMF/Urho3D</a></h3>
<p>Cross-platform 2D and 3D game engine. Contribute to PredatorMF/Urho3D development by creating an account on GitHub.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>First commit separated from my code, expect some minor flaws and bugs, the code needs more cleanup.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2369_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Dave82</div>
          <div class="post_content">
<p>Looks absolutely great ! Are there any plans for a 2d version too ?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Yes 2d version should be easy…subclassing UIElement instead of Drawable.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/49_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">godan</div>
          <div class="post_content">
<p>This is so good! Thanks for putting it together - it solves a problem that I have with my project <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
<p>+1 for 2D version!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>So I just finished cleaning up, changed coding style to the rest of the code, cleaned up most of the bugs, here’s the result:<br/>
<img height="351" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/59604c4beae192e83c78cbed25bcb99d991de57c.jpg" width="690"/></p>
<p>Edit:<br/>
Pushed to my repo, I would like some feedback <img alt=":slight_smile:" class="emoji" src="/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>I’m downloading, gonna try it soon</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Could you please send PR to main Urho?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I could but there are some features that concern me, like these:<br/>
<img height="395" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/4367ff9614efe5eefb5d2d26348b43a1bfb47c9e.png" width="690"/><br/>
These 3 components are not usable directly but are present in the component list.</p>
<p>Also, there is no script interface yet. Maybe <span class="mention">@cadaver</span> could advice here.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>I’m not able to run the editor. I get these errors:</p>
<p>[Thu May 25 15:08:12 2017] INFO: Initialized renderer<br/>
[Thu May 25 15:08:12 2017] ERROR: Could not initialize audio output<br/>
[Thu May 25 15:08:12 2017] INFO: Initialized engine<br/>
[Thu May 25 15:08:12 2017] DEBUG: Loading resource Scripts/Editor.as<br/>
[Thu May 25 15:08:12 2017] INFO: Scripts/Editor/EditorActions.as:727,5 Compiling void CreateUIElementAction::Redo()<br/>
[Thu May 25 15:08:12 2017] ERROR: Scripts/Editor/EditorActions.as:735,17 Expression must be of boolean type<br/>
[Thu May 25 15:08:12 2017] INFO: Scripts/Editor/EditorActions.as:768,5 Compiling void DeleteUIElementAction::Undo()<br/>
[Thu May 25 15:08:12 2017] ERROR: Scripts/Editor/EditorActions.as:776,17 Expression must be of boolean type<br/>
[Thu May 25 15:08:12 2017] INFO: Scripts/Editor/EditorActions.as:898,5 Compiling void ApplyUIElementStyleAction::ApplyStyle(const String&amp;in)<br/>
[Thu May 25 15:08:12 2017] ERROR: Scripts/Editor/EditorActions.as:911,17 Expression must be of boolean type<br/>
[Thu May 25 15:08:12 2017] INFO: Scripts/Editor/EditorScene.as:1125,1 Compiling uint SceneFindChildIndex(Node@, Node@)<br/>
[Thu May 25 15:08:12 2017] WARNING: Scripts/Editor/EditorScene.as:1133,12 Implicit conversion changed sign of value<br/>
[Thu May 25 15:08:12 2017] INFO: Scripts/Editor/EditorScene.as:1136,1 Compiling uint SceneFindComponentIndex(Node@, Component@)<br/>
[Thu May 25 15:08:12 2017] WARNING: Scripts/Editor/EditorScene.as:1144,12 Implicit conversion changed sign of value<br/>
[Thu May 25 15:08:12 2017] INFO: Scripts/Editor/EditorUIElement.as:294,1 Compiling void LoadChildUIElement(const String&amp;in)<br/>
[Thu May 25 15:08:12 2017] ERROR: Scripts/Editor/EditorUIElement.as:319,9 Expression must be of boolean type<br/>
[Thu May 25 15:08:13 2017] INFO: Scripts/Editor/EditorUIElement.as:536,1 Compiling bool UIElementPaste(bool = false)<br/>
[Thu May 25 15:08:13 2017] ERROR: Scripts/Editor/EditorUIElement.as:562,13 Expression must be of boolean type<br/>
[Thu May 25 15:08:13 2017] ERROR: Failed to compile script module Scripts/Editor.as<br/>
[Thu May 25 15:08:15 2017] DEBUG: Quitting SDL</p>
<p>Could anyway be something related to my setup… can you publish a code snippet so I can try from there?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>It seems like you are missing a media or running the executable with wrong working directory. However, my code has nothing to do with that, it just registers couple of components in UI.cpp. Compile Urho3D as usual and run the editor, you’ll see RichText3D component inside Components -&gt; Geometry.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">lezak</div>
          <div class="post_content">
<aside class="quote" data-post="26" data-topic="2969">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5d114c543c1892e661ca59b63d409330.png" width="20"/> Pencheff:</div>
<blockquote>
<p>These 3 components are not usable directly but are present in the component list.</p>
</blockquote>
</aside>
<p>You can register their factories without specifying category and they won’t appear in editor.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I’ve just implemented the scripting interfaces although haven’t test it yet. Seems ready for a PR</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>It works!</p>
<p><img height="318" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/5a52172929d984e0821653507bc414fdbec7cecf.png" width="690"/></p>
<p>Built on Ubuntu 16.04</p>
<p>I noticed you implemented an auto clip property. How does it work? I’m doing a parallax scrolling component, and I have to do exactly the same, but didn’t find a quick way for it…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>The clipping works like a scissor that clips everything outside the defined clipping region. If you set the auto clipping option to true, you’ll have a clip rectangle that equals the content size of the text. If auto clipping is off, you can define a clipping region manually (e.g. size is the rectangle that the text will be clipped in). If no clipping is defined (it is all 0), you’ll have no clipping, the text that scrolls out of the clip region will not be scissored.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>I see. I mean how did you do in code. My scrolling widget is in 2d for now and I didn’t find a suitable method for clipping it like you did…<br/>
Meanwhile, I noticed it’s missing the icon… here…</p>
<p><img height="500" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/620b0fbba8b6585271515193b481c0ec630f634d.png" width="414"/></p>
<p><a class="attachment"  rel="nofollow noopener">RichText3D.csv</a> (1.8 KB)</p>
<p>Looks like this forum doesn’t allow svg upload… so you’ll have to rename it to svg…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Thanks for the icon.</p>
<p>Clipping is done while building the geometry, have a look at <a href="https://github.com/PredatorMF/Urho3D/blob/rich-text/Source/Urho3D/UI/RichBatch.cpp#L77" rel="nofollow noopener">here</a>. For every corner of a quad I have this code:</p>
<pre><code class="lang-auto">    float leftClip = (float)clip_region.min_.x_ - vertices.min_.x_;
    if (leftClip &gt; 0.0f) 
    {
        if ((float)clip_region.min_.x_ &lt; vertices.max_.x_) 
        {
            texcoords.min_.x_ += (texcoords.max_.x_ - texcoords.min_.x_) * leftClip / (vertices.max_.x_ - vertices.min_.x_);
            vertices.min_.x_ += leftClip;
        } 
        else
            return false;
    }</code></pre>
<p>The code checks if the vertex is outside a clip rectangle. If it is and only part of the quad is visible, then the quad size is reduced and the texture coordinates are modified so it looks like its being clipped.</p>
<p>In your case, I think it would be fairly simple to do parallax mapping by just scrolling a texture on a billboard. Open a new thread, I’m also curios what suggestions people would give.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Added support for Google Fonts in my code, here’s the result:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="image"><img alt="image" data-base62-sha1="2zWhhZhntUnBLpk5HThMgOsmLlu"  height="388" src="../../../images2/211bff70f1fb3dd143f2fce6152ed6cf.png"  width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1327×748 102 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>Basically, just typing in <code>&lt;font face="Open Sans"&gt;</code> loads the font from the web or cache and loads it asynchronously.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I created a repo here:<br/>
</p><aside class="onebox allowlistedgeneric">
<header class="source">
<img class="site-icon" height="16" src="../../../images2/0973ea8ce7121c320f68413e2a2f23ab.svg" width="16"/>
<a href="https://github.com/PredatorMF/Urho3D-RichText3D" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="60" src="https://avatars1.githubusercontent.com/u/8559740?s=400&amp;v=4" width="60"/>
<h3><a href="https://github.com/PredatorMF/Urho3D-RichText3D" rel="nofollow noopener" target="_blank">PredatorMF/Urho3D-RichText3D</a></h3>
<p>RichText3D component for Urho3D. Contribute to PredatorMF/Urho3D-RichText3D development by creating an account on GitHub.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>It could have some leftovers from my code, like logging macros but basically it depends only on Urho3D code, no STL or external dependencies. I would love if it can go into Urho3D main repo, maybe if one could help implementing it as UI component also.</p>
<p>I tried to make it as modular as possible, so I (and others) could render custom elements inside text, plug in custom fonts and images. Parsing HTML elements is only done once on init or when the text changes, so it has minimal impact on performance.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/96_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts1</div>
          <div class="post_content">
<p>I notice you have an emphasis on RichText3D as an inheritor of Drawable, but why not also include a RichText UIElement? It seems the UI element would be more generally useful. Or is there one and I just missed it?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>In my application it is required to have 3D text that is why I focused on that part.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Personally I think it would be nice to have one that reads Markdown and understands stylesheets.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>It doesn’t seem to be a lot of work to make a RichText UI element using almost identical code from RichText3D.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Does your RichText3D component support <a href="https://en.wikipedia.org/wiki/Right-to-left">dextrosinistral</a> languages, btw?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I don’t think it does at this point, it does support ticker scrolling from left-to-right <img alt=":smiley:" class="emoji" src="../../../images2/94dd27e9c6c243335d29229e02e34e9d.png" title=":smiley:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I don’t like anti-<a href="https://en.wikipedia.org/wiki/Semitic_languages">Semitic</a> text components. <img alt=":stuck_out_tongue:" class="emoji" src="../../../images2/2163fe85d10cc0d651a6a2d04efe61d0.png" title=":stuck_out_tongue:"/></p>
<p><span class="mention">@hassanrahimi</span> had to <a href="https://discourse.urho3d.io/t/use-right-to-left-languages/4546">write his strings in a character map</a> for them to be displayed correctly. I don’t blame him for switching engines… assuming he did, based on his silence since.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I just love how I have to go wikipedia on every post you make <img alt=":smiley:" class="emoji" src="../../../images2/94dd27e9c6c243335d29229e02e34e9d.png" title=":smiley:"/> Its not anti-Semitic, I never in my life had to display RTL text in any text field. That doesn’t mean this component cannot work with RTL text, probably couple of touches, like x += glyph.width going the other direction and its good to go.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="44" data-topic="2969" data-username="Pencheff">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/38c9bf4f14473a4316c4c190ea1e02ef.png" width="20"/> Pencheff:</div>
<blockquote>
<p>I never in my life had to display RTL text in any text field.</p>
</blockquote>
</aside>
<p>But did you never wish someone from <a href="https://upload.wikimedia.org/wikipedia/commons/2/24/Arabic_Dialects_ar.svg">this part of the world</a> played your games? If we consider Arabic to be a single language, it has about twice as much native speakers as Russian.</p>
<p>Despite it currently being somewhat of a low priority title, it sure would make sense for Drone Hunter to be available in Arabic. So some day I’d add the support, but there’s quite some things I’ll tend to before that.</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   title="Screenshot_Sun_Feb_26_02_24_59_2017"><img alt="Screenshot_Sun_Feb_26_02_24_59_2017" data-base62-sha1="94yUEGlYG0qRbZVhCwM0QuPDRj3"  height="388" src="../../../images2/cd6b25059407fd22404bbca3a7c246d9.jpeg"  width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_Sun_Feb_26_02_24_59_2017</span><span class="informations">1920×1080 113 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<aside class="quote no-group" data-post="45" data-topic="2969" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b58f658f2fa4a35af8436582531d6d18.png" width="20"/> Modanung:</div>
<blockquote>
<p>But did you never wish someone from <a href="https://upload.wikimedia.org/wikipedia/commons/2/24/Arabic_Dialects_ar.svg" rel="nofollow noopener">this part of the world</a> played your games?</p>
</blockquote>
</aside>
<p>I don’t make games, when I must cover RTL, I will probably implement it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Ok. <img alt=":slightly_smiling_face:" class="emoji" src="../../../images2/083e71e9976093cddc504d689025b42c.png" title=":slightly_smiling_face:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>From wikipedia:</p>
<blockquote>
<p><strong><a href="https://en.wikipedia.org/wiki/Arabic_script">Arabic script</a></strong></p>
<p>[…] It is the second-most widely used writing system in the world by the number of countries using it and the third by the number of users, after the Latin and Chinese scripts.</p>
</blockquote>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lys0gen</div>
          <div class="post_content">
<p>Thanks for creating this <span class="mention">@Pencheff</span>!</p>
<p>I have created a <a href="https://github.com/Lys0gen/Urho3D-RichText3D" rel="noopener nofollow ugc">fork</a> with a <strong>RichTextUI</strong> element added, which is usable inside the UI system.</p>
<p><strong>Warning: the code is absolute trash</strong>, I didn’t really know what I was doing (still don’t, mostly) so I just cobbled together parts of <em>Urho3D::Text</em> and your <em>RichWidget</em> &amp; <em>RichText3D</em> until I had something working.</p>
<p>It lacks a few things that the original Text has (e.g. partial selection) and yours (e.g. the Ticker). Might also have a few bugs, but so far it seems to work fine for my purposes.</p>
<p>Hopefully it is useful for someone else who doesn’t want to spend hours to get it working in a proper way <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lys0gen</div>
          <div class="post_content">
<p>Hello again,<br/>
a bit late but I was wondering if anyone has actually tried using the bold &amp; italic tags? Because they don’t work.</p>
<p>I’ve done some light debugging and in fact the <em>RichFontProvider</em> doesn’t really seem to do much at all. The whole RichFontProvider::RequestFont function just seems to rely on the fact that the given font is already in the cache and doesn’t bother looking up bold/italic versions of it.</p>
<p>Changing that is easy, I’m more confused about the whole E_RICHTEXT_FONT_REQUEST and the CompleteRequest(…) function, as they don’t seem to be made for each other. CompleteRequest is never called from anywhere, as such any font not already loaded won’t show.<br/>
Fixing that (CompleteRequest handling the event data instead of… nothing) is also simple.</p>
<p>But sadly this still makes it show up like the baseline font. Beyond this I don’t know how the font type handling works.</p>
<p>Does anyone have a solution to this? Or do I need to take font files that are bold/italic by default and switch to those with the &lt;font…&gt; tag when necessary? That would be a huge pain.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>You have to handle E_RICHTEXT_FONT_REQUEST in your application, load a font based on the request parameters. There you have a chance to load bold/italic font and use CompleteRequest() when you’re done. I didn’t post that part of the code, since it’s very specific to my application. But it basically does the described above and caches the fonts based on their names, not by file paths, so you can just do <code>&lt;font name="Roboto"&gt;</code></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lys0gen</div>
          <div class="post_content">
<p>Ok, so how do you handle bold/italic fonts (if you do that at all)?</p>
<p>I’m assuming there is no pre existing way to handle that?</p>
<p>So to me the simplest solution seems to be to provide additional font files (e.g. for “Arial.ttf” add “Arial_bold.ttf”, “Arial_italic.ttf”, “Arial_bold_italic.ttf”) and load those internally depending on the flags. Or is there a proper way that avoids adding so many files?</p>
<p>Maybe I just don’t know enough about fonts though. I was under the impression that most fonts had bold/italic versions integrated into the base file?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Yes, you map Arial_bold.ttf to bold, Arial_italic.ttf to italic, etc. I ship fonts with my application and I know the names of every font, so I have manifest xml that adds all fonts to the FontDatabase class below:</p>
<pre><code class="lang-auto">class FontDatabase : public Urho3D::Object {
  URHO3D_OBJECT(FontDatabase, Urho3D::Object)
public:
  FontDatabase(Urho3D::Context* context);
  ~FontDatabase() override;

  void PrecacheFont(const Urho3D::String&amp; font_name, bool bold, bool italic, bool force_update);

  void ClearCache();

  Urho3D::StringVector GetCachedFonts() const;
  // Check if font is in database
  bool IsFontInCache(const Urho3D::String&amp; font_name, bool bold, bool italic) const;
  // Get font filename from cache
  Urho3D::String GetFontFilenameFromCache(const Urho3D::String&amp; font_name, bool bold, bool italic) const;
  // Add font alias
  void AddFontAlias(const Urho3D::String&amp; alias, const Urho3D::String&amp; target_font);
  // Remove font alias
  void RemoveFontAlias(const Urho3D::String&amp; alias);
  // Pre-cache aliases
  void PrecacheAliasFonts();
private:
  core::FilePath cache_dir_;

  struct FontRequest {
    Urho3D::String name;
    bool bold {false};
    bool italic {false};
    unsigned request_id {0};
    std::shared_ptr&lt;WebResourceTransfer&gt; transfer;
  };

  std::unordered_map&lt;std::string, std::string&gt; font_aliases_;

  std::vector&lt;FontRequest&gt; font_definition_tranfers_;
  std::vector&lt;FontRequest&gt; font_transfers_;

  void HandleRichTextFontRequest(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);
  void HandleUpdate(Urho3D::StringHash eventType, Urho3D::VariantMap&amp; eventData);

  bool HasTransferFor(const Urho3D::String&amp; font_name, bool bold, bool italic, unsigned id) const;
  void RequestFont(const Urho3D::String&amp; font_name, bool bold, bool italic, unsigned id = 0);
  core::FilePath StoreFontFileInCache(const core::FilePath&amp; file, const Urho3D::String&amp; font_name, bool bold, bool italic);
};</code></pre>
<p>Again, implementation has a lot of application specific code, SQLite database that caches fonts  downloaded from Google Fonts, it’s up to you.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lys0gen</div>
          <div class="post_content">
<p>Thank you, got it working now.<br/>
A bit more cumbersome than I had hoped, but it’ll do.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lys0gen</div>
          <div class="post_content">
<p>Hello once again <img alt=":slight_smile:" class="emoji" height="20" loading="lazy" src="../../../images2/8530119c6b193068506d060980578cf7.png" title=":slight_smile:" width="20"/></p>
<p>Just wondering, have you implemented the underline or strikethrough tags on your end?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I haven’t implemented those yet.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>