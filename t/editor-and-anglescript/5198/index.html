<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Editor and anglescript</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Editor and anglescript</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2317_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">UNDEFINED-BEHAVIOR</div>
          <div class="post_content">
<p>Was there any particular reason to why the original editor was/has to be implemented in anglescript?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>You asked the question too late. The original author has left the project. But the same question has been asked a few times in this forum and the old one. If you are lucky, Lasse may drop by to say a few words again.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1016_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">S.L.C</div>
          <div class="post_content">
<p>My guess is that it was easy to prototype. Make changes and additions quickly without much hassle.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>I guess is that it was an ideal way to “harden” the angelscript implementation, but the main benefit is that you can write entire games without ever going near a c++ compiler, taking advantage of hotloading for rapid development / reduced iteration times, in a way that completely just works across platforms. This means your “dev team” can be using entirely different operating systems, and still sharing a completely common codebase. The editor uses the “player” application as an execution shell at runtime, and so can your games.<br/>
Personally, I’ve barely started using scripting in Urho, however I can see advantages in going totally script-driven, and totally avoiding the mixed language approach (and the platform issues it can raise).<br/>
I like the idea that we can rapid-develop in script to get stuff working quickly, identify performance bottlenecks fairly easily, and promote the offending code to native c++, and that’s coming from an oldschool asm and machine language programmer. Don’t be a language purist, blind to the advantages of a slower but potentially more productive language - I avoided c++ for decades.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I think this message by <span class="mention">@cadaver</span> (Lasse) contains the answer to your question:</p><aside class="quote quote-modified" data-post="2" data-topic="2407">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/b36d360b4fce73300b0e56f725288d21.png" width="20"/>
<a href="https://discourse.urho3d.io/t/new-urho3d-editor-update-from-2017-11-03/2407/2">New Urho3D Editor [update from 2017-11-03]</a> <a class="badge-wrapper bullet" href="/c/developer-talk/16"><span class="badge-category-bg" style="background-color: #3AB54A;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Everything about the development of Urho3D.">Developer Talk</span></a>
</div>
<blockquote>
    My view is that the existing editor is somewhere halfway between a complex script API usage example, and a production-usable editor. Many have contributed to it and the code structure is not best. Because of Urho’s nature of “singleton” subsystems it will be hard to achieve calling into the editor from game, or vice versa. 
Your analysis is quite spot on that Urho can be used in many ways and therefore it’s not obvious how the editor and game could talk to in all the scenarios. 
Probably the ide…
  </blockquote>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/646_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">QBkGames</div>
          <div class="post_content">
<p>I think the essence of the question is why AngelScript as opposed to some other more commonly used scripting language such as Lua, Javascript, Python, etc. Because now, if you want to work on the editor, you have to learn a new scripting language which might not be useful anywhere else.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>Actually, the eventing system makes it reasonably easy to call into and out of the scripting system, so I don’t know what lasse was driving at there - subsystems were i guess the focus he had at the time, but any object can be a sender or a receiver, so its not really anything to do with subsystems</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>You can use lua no problems, and theres also a c# fork, why angelscript? because its close to c++ and very easy to upgrade and downgrade / promote and demote code between these langs</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>AngelScript is more similar to C++ than any of the other languages you mentioned. So the name may be different and unknown, but its syntax is not.</p>
<p>As <span class="mention">@cadaver</span> said repeatedly, it would probably be best to have an official editor written in C++ and developed in a <em>separate repo</em> at some point.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2317_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">UNDEFINED-BEHAVIOR</div>
          <div class="post_content">
<blockquote>
<p>You can use lua no problems</p>
</blockquote>
<blockquote>
<p>My guess is that</p>
</blockquote>
<blockquote>
<p>I think this message by <span class="mention">@cadaver</span><br/>
…<br/>
Probably the ideal would be, if you wanted to improve the user experience at the same time, would be to use an actual native UI toolkit in the editor and rewrite it in C++. Otherwise you’re always going to be struggling with both the editor and game taking over Urho’s subsystems.<br/>
…<br/>
<a href="https://github.com/eugeneko/Urho3D-Editor" rel="nofollow noopener">https://github.com/eugeneko/Urho3D-Editor</a><br/>
[Abandoned]</p>
</blockquote>
<p>lol</p>
<blockquote>
<p>AngelScript is more similar to C++</p>
</blockquote>
<blockquote>
<p>it reasonably easy to call into and out of the scripting system, so I don’t know what lasse was driving at there</p>
</blockquote>
<p>So according to responses it seems like angel script was more of a political decision.<br/>
Kinda glad to hear that actually. I was thinking the author ran into some technical issue only angle script could solve or something…</p>
<hr/>
<blockquote>
<p>easy to prototype. Make changes and additions quickly without much hassle.</p>
</blockquote>
<blockquote>
<p>without much hassle.</p>
</blockquote>
<p>idk but a quick glance to the issue board’s editor problems and most appears to be manifestation of angel script issue in some form or another…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I personally care little for non-specific editors and scripting. My birth sign may be snail, but I am of the conviction it saves times and effort to have (at least) your editor specialized for your project. Unnecessary features slow down content creation while features that may be deemed too specialized in a general purpose editor are exactly what your project needs for fast level fabrication.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>I’m surprised to hear you say that you advocate for in-game editing!<br/>
Personally, I am on the fence - I have worked both with proprietary closed-source engines and more public ones, and I have to admit that there are pros and cons for each side. Your in-game editor will NEVER be “fully-featured”, but it WILL support exactly what you need, and WILL require basically a full rewrite for each new project. We can pick the flesh from previous projects to add to the next, but that is all. An editor that the user can extend at runtime is the right solution, and currently, our only option is to use scripting (lua, AS or dare I say it, C#) to do that. I am trying not to say anything about runtime reflection, as the costs are awful, and I know that a binary plugin system is not going to fly on all platforms.</p>
<p>I like that our editor can run game scripts, but I hate that our editor can’t cope with user bindings.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="12" data-topic="5198" data-username="Leith">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/344277caf39f87861709d8bd9d77ec6d.png" width="20"/> Leith:</div>
<blockquote>
<p>I’m surprised to hear you say that you advocate for in-game editing!</p>
</blockquote>
</aside>
<p>Not at all. Although in-game editing has its place and can be neat, that is not what I meant. I <em>do</em> mean having a separate application to create levels. Just imagine making dozens of worlds like these using the default Urho, Unity or Unreal editors:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="WC3ed"><img alt="WC3ed"  height="373" src="../../../images2/9e4eee1e7e816405d9e129a0b14c0b32.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">WC3ed</span><span class="informations">1200×649 343 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>I think Dante Alighieri neatly described the mental state this would bring a person in.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>The conundrum for the time being, is that binary user code will not run in the editor, period.<br/>
Script will, even more than one kind, but not native plugin code, even if we provided code for script bindings, I could be wrong, please tell me I am wrong</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Indeed (I think) this would require modifying the engine, but since Urho3D is open source that’s perfectly possible. Although maybe not ideal.</p>
<p>…of course specific editors - like Warcraft III’s World Editor - are almost always proprietary software and only suitable for modding. Open source world creation tools like Tiled and Edddy are attempts at filling these gaps. Aiming at a balance between specialization and versatility.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>It really detracts from the editor, that it cannot grok user binary code even though we are forced to provide rtti in our compiler settings</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>basically, “my c++ zombies stand still” in the editor, and we could easily deal with this for common frame events, even with an “unknown” interface in play</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/357_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="14" data-topic="5198" data-username="Leith">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/344277caf39f87861709d8bd9d77ec6d.png" width="20"/> Leith:</div>
<blockquote>
<p>The conundrum for the time being, is that binary user code will not run in the editor, period.<br/>
Script will, even more than one kind, but not native plugin code, even if we provided code for script bindings, I could be wrong, please tell me I am wrong</p>
</blockquote>
</aside>
<p>If you write a custom component in C++, and link it with your player executable, it will be available in the editor. When you call RegisterFactory, provide a category name string and it will appear in the create component menu option. Any attributes registered as attributes will be reflected in the node attributes dialog, and it will receive the events that it registers for.</p>
<p>This actually caused me a tiny issue once, as at one point I made use of a TimedDeath component for certain entities, that would receive Update events and decrease a timer until 0, at which point it would remove the node it belonged to. In the editor, any time I added that component to a node, the whole node would disappear 1 second later (the default TTL).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>The problem there is, I don’t rely on the player executable - my project has its own executable, whose source was derived from the sample application framework.<br/>
Merging my project with the player sourcecode would be a possible solution.<br/>
Linking unreferenced object code in the player clearly won’t work.<br/>
What do I need to do to force the inclusion of my custom components in the player?</p>
<p>Oh I just realized!<br/>
I just need to register my new classes in the Player sourcecode, and all is well - the code is referenced and will be included by the linker (fingers crossed)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2367_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jmiller</div>
          <div class="post_content">
<aside class="quote no-group" data-post="18" data-topic="5198">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/3f264c270c82daf0485ab9380aad140b.png" width="20"/> JTippetts:</div>
<blockquote>
<p>If you write a custom component in C++, and link it with your player executable, it will be available in the editor. When you call RegisterFactory, provide a category name string and it will appear in the create component menu option. Any attributes registered as attributes will be reflected in the node attributes dialog, and it will receive the events that it registers for.</p>
</blockquote>
</aside>
<p>Maybe a candidate for adding to docs somewhere?<br/>
<a href="https://urho3d.github.io/documentation/HEAD/_editor_instructions.html#EditorInstructions_Workflow" rel="nofollow noopener">#EditorInstructions_Workflow</a></p>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>