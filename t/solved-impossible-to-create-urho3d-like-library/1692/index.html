<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>&lt;SOLVED&gt;Impossible to create Urho3D like library</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">&lt;SOLVED&gt;Impossible to create Urho3D like library</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p>Hi everyone.<br/>
I’m new in Linux but i need implement Urho3D. I would like make a new empty project and compile it whit Codeblocks or other IDE.<br/>
I can make only the samples <img alt=":frowning:" class="emoji" src="../../../images2/2506cac83464f3f86e257fa414340d4c.png" title=":frowning:"/></p>
<p>How can I make an empty project in a very easy way?</p>
<p>I’m not expert in Cmake.<br/>
Thanks you a lot! <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">valera_rozuvan</div>
          <div class="post_content">
<p>Hi! Check out my sample project at <a href="https://github.com/valera-rozuvan/urho3d-demos/tree/master/rotating-cubes-in-shade" rel="nofollow noopener">github.com/valera-rozuvan/urho3 … s-in-shade</a> . It includes just one *.cpp file and a Makefile. You can use it with any IDE. If you have any further questions, don’t hesitate to ask = )</p>
<p>Also, check out this topic: <a href="http://discourse.urho3d.io/t/my-urho3d-demos/1683/1">topic1748.html</a> .</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p><img alt=":astonished:" class="emoji" src="../../../images2/d210df802a5d9b4bc3a55c75eca07db3.png" title=":astonished:"/>  OOHHH!!!</p>
<p>This exactly I need  <img alt=":stuck_out_tongue:" class="emoji" src="../../../images2/31a2303e479834609bf5befdf8c3501a.png" title=":stuck_out_tongue:"/></p>
<h2>Thank you very much!</h2>
<p><img alt=":neutral_face:" class="emoji" src="../../../images2/e1eb899949dd51d6ee6b6c3c153a3f33.png" title=":neutral_face:"/>  Not work.</p>
<p>How can I import the project in a IDE?<br/>
Codeblocks can’t find the libraries like <span class="hashtag">#include</span> &lt;Urho3D/Core/CoreEvents.h&gt;</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p>Hi again.</p>
<p>I think the problem is in the makefile.</p>
<p>URHO3D_INCLUDE_DIR=$(URHO_DIR)/build/include</p>
<p>I don’t have /build/include folder in my Urho3D-1.5 folder.</p>
<p>I think is necessary make other action before, like build the library, am i right?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">valera_rozuvan</div>
          <div class="post_content">
<aside class="quote no-group" data-username="Kanfor">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/7bf973f8493572f4a52e528148c23445.png" width="20"/> Kanfor:</div>
<blockquote>
<p>I think is necessary make other action before, like build the library, am i right?</p>
</blockquote>
</aside>
<p>I have updated the Makefile, and added instructions. Please check again <a href="https://github.com/valera-rozuvan/urho3d-demos/tree/master/rotating-cubes-in-shade" rel="noopener nofollow ugc">github.com/valera-rozuvan/urho3 … s-in-shade</a> .</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p>Great!<br/>
<img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
<p>Thanks again!  <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/></p>
<hr/>
<p>Now I don’t have error. I made the libraries (I think) and now they are in the PATH of Linux.</p>
<p>The problem now is when I BUILD the project.</p>
<p>In file included from /usr/local/include/Urho3D/Input/Input.h:29:0,<br/>
from sampleApp.cpp:4:<br/>
/usr/local/include/Urho3D/Input/InputEvents.h:27:30: fatal error: SDL/SDL_joystick.h: not exist</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">valera_rozuvan</div>
          <div class="post_content">
<p>It might be because you don’t have several necessary SDL packages installed on your system. Try installing:</p>
<p>[ul]<br/>
[li]libsdl-image1.2[/li]<br/>
[li]libsdl1.2debian[/li]<br/>
[li]libsdl2-2.0-0[/li]<br/>
[li]libsdl2-dev[/li][/ul]</p>
<p>What Linux distribution are you using, <span class="bbcode-b">Kanfor</span>?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">valera_rozuvan</div>
          <div class="post_content">
<p>Also, <span class="bbcode-b">Kanfor</span>, please read carefully the page <a href="http://urho3d.github.io/documentation/1.5/_building.html" rel="nofollow noopener">urho3d.github.io/documentation/1 … lding.html</a> . It describes in detail the prerequisites (what libraries must be installed on your system) for building Urho3D.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>[quote=“valera_rozuvan”]It might be because you don’t have several necessary SDL packages installed on your system. Try installing:</p>
<p>[ul]<br/>
[li]libsdl-image1.2[/li]<br/>
[li]libsdl1.2debian[/li]<br/>
[li]libsdl2-2.0-0[/li]<br/>
[li]libsdl2-dev[/li][/ul]</p>
<p>What Linux distribution are you using, <span class="bbcode-b">Kanfor</span>?[/quote]</p>
<p>Urho3D project does not depend on SDL packages because it has included SDL source files as one of its internal 3rd-party libraries. All the SDL symbols can be found in both the Urho3D static library and Urho3D shared library, so downstream projects simply just need to “link” against the Urho3D library. For using Urho3D v1.5 as external library in your project, reference this documentation page instead. <a href="http://urho3d.github.io/documentation/HEAD/_using_library.html">urho3d.github.io/documentation/H … brary.html</a>. There are subtle changes in between them already.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">valera_rozuvan</div>
          <div class="post_content">
<p>Anyways, my proposed sample project can be built using the instructions I provided. Please see a screencast I made that demonstrates this:</p>
<p>[video]<a href="https://www.youtube.com/watch?v=cBhw8qL840o%5B/video%5D" rel="nofollow noopener">https://www.youtube.com/watch?v=cBhw8qL840o[/video]</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p>WOW!  <img alt=":astonished:" class="emoji" src="../../../images2/d210df802a5d9b4bc3a55c75eca07db3.png" title=":astonished:"/><br/>
Thanks for your time.</p>
<p>The game compile perfectly, but when I start with /sampleApp I have this error:</p>
<p>[color=#FF0000]error while loading shared libraries: libUrho3D.so.0: cannot open shared object file: No such file or directory[/color]</p>
<p><img alt=":unamused:" class="emoji" src="../../../images2/21382c100a852239caa7667da5bafe68.png" title=":unamused:"/></p>
<p>I did everything as shown in the video.</p>
<hr/>
<p>NOW WORKS!!!</p>
<p>You must add this in command line:</p>
<p>export LD_LIBRARY_PATH=/build/lib:$LD_LIBRARY_PATH</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">valera_rozuvan</div>
          <div class="post_content">
<p>You have to make sure that the <span class="bbcode-b">*.so</span> file is discoverable. First, check that in the folder <span class="bbcode-b">~/projects/Urho3D-1.5/build/lib</span> you have:</p>
<p><code>valera@valera-HP-ENVY-17-Notebook-PC:~/projects/Urho3D-1.5/build/lib$ ls -a -h -l 
total 22M
drwxrwxr-x 2 valera valera   24 Jan 21 09:15 .
drwxrwxr-x 8 valera valera 4.0K Jan 21 09:11 ..
lrwxrwxrwx 1 valera valera   14 Jan 21 09:15 libUrho3D.so -&gt; libUrho3D.so.0
lrwxrwxrwx 1 valera valera   20 Jan 21 09:15 libUrho3D.so.0 -&gt; libUrho3D.so.0.0.171
-rwxrwxr-x 1 valera valera  22M Jan 21 09:15 libUrho3D.so.0.0.171</code></p>
<p>Then create the file <span class="bbcode-b">/etc/ld.so.conf.d/urho3d.conf</span>, and add the following line to it:</p>
<pre><code class="lang-auto"></code></pre>
<p>Then run the command:</p>
<pre><code class="lang-auto"></code></pre>
<p>Of course, modify the paths according to your setup.</p>
<p>PS: In the video I also do these steps. Maybe you didn’t notice them?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p>Thank you very much!</p>
<p><img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/><br/>
<span class="bbcode-b">[color=#00BF80]All works right now![/color]</span></p>
<p>By the way. If you use Netbeans, if you have an error when tun the project, you must add the lib<br/>
in [color=#0000FF]propierties/Run/Environment[/color]</p>
<p>There add:<br/>
Like name: LD_LIBRARY_PATH<br/>
Like value: $LD_LIBRARY_PATH:/build/lib</p>
<p><img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>When linking with Urho3D as shared library, you have to pass the linker flags to set up the “rpath” correctly. Something like this: -Wl,-rpath,/home/weitjong/ClionProjects/urho3d/native-Build/lib:::<br/>
Adjust the path accordingly naturally. When done properly then the binary should be able to find the lib without using the LD_LIBRARY_PATH or messing the global ldconfig. If you plan to install the Urho3D library (and your binary) to another location after building it then you need to readjust the rpath entries once again. Below is the ldd output of the sample binary which I built in one place and then move it to /tmp, see that it still able to find the libUrho3D.so.0 correctly despite of that and of course I can also run the binary in /tmp just fine (with -pp for setting the resource prefix path).</p>
<p><code>[weitjong@igloo tmp]$ ldd 01_HelloWorld 
	linux-vdso.so.1 (0x00007ffc351c0000)
	libUrho3D.so.0 =&gt; /home/weitjong/ClionProjects/urho3d/native-Build/lib/libUrho3D.so.0 (0x00007f41dfb1b000)
	libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f41df8e4000)
	librt.so.1 =&gt; /lib64/librt.so.1 (0x00007f41df6dc000)
	libGL.so.1 =&gt; /usr/lib64/nvidia/libGL.so.1 (0x00007f41df3a8000)
	libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f41df0a5000)
	libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007f41ded23000)
	libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f41deb0c000)
	libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f41de8ee000)
	libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f41de52d000)
	/lib64/ld-linux-x86-64.so.2 (0x0000558951546000)
	libnvidia-tls.so.358.16 =&gt; /usr/lib64/nvidia/tls/libnvidia-tls.so.358.16 (0x00007f41de329000)
	libnvidia-glcore.so.358.16 =&gt; /usr/lib64/nvidia/libnvidia-glcore.so.358.16 (0x00007f41dc6c7000)
	libX11.so.6 =&gt; /lib64/libX11.so.6 (0x00007f41dc387000)
	libXext.so.6 =&gt; /lib64/libXext.so.6 (0x00007f41dc175000)
	libxcb.so.1 =&gt; /lib64/libxcb.so.1 (0x00007f41dbf52000)
	libXau.so.6 =&gt; /lib64/libXau.so.6 (0x00007f41dbd4e000)</code></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Kanfor</div>
          <div class="post_content">
<p>Hi, Weitjong.</p>
<p>What I must add in makefile to not need LD_LIBRARY_PATH?</p>
<p>Thanks!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I have already mentioned how to do that in my previous comment. Use the “rpath” linker flag.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>