<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>DirectX model files with urho3d</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">DirectX model files with urho3d</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">GodMan</div>
          <div class="post_content">
<p>Hello Urho3d forum user I’ve decided to give Urho3d a try as I use to use Irrlicht but most of it’s active developers have left. I’ve compiled Urho3d 1.7 and everything works fine except when I try to use a 3d model I converted from AssetImporter. The model itself seems to load fine but I can never get the diffuse texture to show. I’ve read the documentation and scoured the forums heres a screenshot. <img alt="screen1" height="291" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/ac8f85a4646d409ce3e68165c89161b01c191540.jpg" width="690"/></p>
<p>Also with the animation I ran into 2 problems. One the animation appears to be playing way to fast. Two I believe the AssetImporter removed key frames and ruined the animation. I viewed this topic and commented out the part of code in AssetImporter and when I convert the model I don’t get any errors however the animation is still ruined only parts of the model animate correctly. <a href="https://discourse.urho3d.io/t/cant-get-animations-in-this-model-to-work/2709">Topic on differing channel keyrames</a></p>
<p>I use 3ds max I know people use blender but I’ve been using 3ds max since 2008 so I would like to keep using it if possible.<br/>
I’ve used this model and animation in Irrlicht just fine so I know they work correctly.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2369_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Dave82</div>
          <div class="post_content">
<aside class="quote no-group" data-post="1" data-topic="3702" data-username="GodMan">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ec6d74ff2472bced6f12da93c20c296f.png" width="20"/> GodMan:</div>
<blockquote>
<p>One the animation appears to be playing way to fast.</p>
</blockquote>
</aside>
<p>Well if you use 3ds max i assume you use Panda exporter so your best bet is to export your models without<br/>
animation frames.And export animation into Urho’s .ani format.And play those animations separately with playAnimation() where you can set speed , blending , weight etc.</p>
<aside class="quote no-group" data-post="1" data-topic="3702" data-username="GodMan">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ec6d74ff2472bced6f12da93c20c296f.png" width="20"/> GodMan:</div>
<blockquote>
<p>The model itself seems to load fine but I can never get the diffuse texture to show.</p>
</blockquote>
</aside>
<p>I’m not suse but it probably the material isn’t automatically applied to your model.<br/>
Use yourModel-&gt;SetMaterial() to apply the corresponding materials to your model.Also make sure the textures are placed in the data/textures folder (or in a folder registered by the engine)</p>
<p>EDIT : Also here’s my biped animation exporter script.(Unfortunately this works only with biped rigs so if you use your own bone structure you need to modify the script)</p>
<aside class="quote quote-modified" data-post="1" data-topic="1071">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/39fd1aeff01d89e7279fa956666af00e.png" width="20"/>
<a href="https://discourse.urho3d.io/t/3ds-max-biped-animation-export-script/1071">3ds max biped animation export script</a> <a class="badge-wrapper bullet" href="/c/discussions/general-discussion/9"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #652D90;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="General discussion around Urho3D.">General Discussion</span></a>
</div>
<blockquote>
    Hi everyone i’ve just finished my biped exporter for my game and i thought there may be other 3ds max users who will probably found this tool useful. 
So basically what it does is searches the scene and exports the FIRST biped found in the scene hierarchy. 
It was tested with 3ds max 9 but should work with any version… let me know if you found some issues… 
NOTE : Make sure your biped and the skined mesh’s biped have the axact same size otherwise the exported data will be invalid (but the result…
  </blockquote>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>If you make a portable sample (X with animation and code/guidelines), I could try to debug AssetImporter when I have enough time. If it corrupts animation, it should be fixed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">GodMan</div>
          <div class="post_content">
<p>Here’s a rar file of the original model file in DirectX format and the items Asset Importer spits out. <a href="https://ufile.io/hl1v0" rel="nofollow noopener">https://ufile.io/hl1v0</a></p>
<p>I’m using the Skeletal Animation sample all I’ve done is passed my custom model and materials.<br/>
<span class="mention">@Dave82</span> I’ve used the  modelObject-&gt;SetMaterial(cache-&gt;GetResource(“Materials/JoinedMaterial_<span class="hashtag">#1</span>.xml”));<br/>
in this example but still no texture displayed. I checked the hierarchy also and even changed the model material to one that was already in the scene and it did not show up on the model as well so I believe AssetImporter messed up something. Perhaps because the model is using a multi sub object material. Also I can’t use your maxscript as the character has bones and not max’s biped system. Also how can you export the model in DirectX format but not have any animations in the file how would Asset Importer create them then??</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">GodMan</div>
          <div class="post_content">
<p>I’d like to update that I tried using the fbx format instead and ran that through Asset Importer and everything seems to be okay the .ani file was 23kb instead of 2kb from the DirectX conversion and the diffuse texture did show up fine. I do believe the DirectX conversion seem to cause some sort of problem I’m not using panda exporter I use to use it in the past but I upgraded to max 2015 and I believe panda exporter was not available for max 2015 sadly. After checking materials and textures they were working on the DirectX model but some kind of error I suppose destroyed the uvs and animations so that’s why they were not working. Is the fbx format okay to use for converting as I used the same animation model and texture and it converted it fine bare in mind I have not tried to use normal mapping or anything that requires tangents and Binormals so fingers crossed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2369_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Dave82</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="5" data-topic="3702" data-username="GodMan">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ec6d74ff2472bced6f12da93c20c296f.png" width="20"/> GodMan:</div>
<blockquote>
<p>I’d like to update that I tried using the fbx format instead and ran that through Asset Importer and everything seems to be okay the .ani file was 23kb instead of 2kb from the DirectX conversion and the diffuse texture did show up fine. I do believe the DirectX conversion seem to cause some sort of problem I’m not using panda exporter I use to use it in the past but I upgraded to max 2015 and I believe panda exporter was not available for max 2015 sadly. After checking materials and textures they were working on the DirectX model but some kind of error I suppose destroyed the uvs and animations so that’s why they were not working. Is the fbx format okay to use for converting as I used the same animation model and texture and it converted it fine bare in mind I have not tried to use normal mapping or anything that requires tangents and Binormals so fingers crossed.</p>
</blockquote>
</aside>
<p>I’m glad you succeeded ! About the tangents AFAIK fbx can export tangents.Max has some really cumbersome way of handling vertices so elements like tangents require some serious hack if you need to calculate them manually.</p>
<p>I’m a max user as well since 2006-2007 ! Can i ask you what’s your experience with max 2015 ? i’m using 2010 and it seems that whenewer Autodesk release a new version it only meke it slower and introduce more bugs along the old bugs which are present from max 7…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">GodMan</div>
          <div class="post_content">
<p>I chose max 2015 as the newer one seemed strange to me. They had it were anything you select in the viewport had a glow outline around it. Their were some other things to I just can’t remember so I settled for 3ds max 2015. I stated out with 3ds max 2008 modding the old halo ce game.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>