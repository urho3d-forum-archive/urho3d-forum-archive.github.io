<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Linux version can&rsquo;t build,multiple definition of</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Linux version can&rsquo;t build,multiple definition of</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1166_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">spwork</div>
          <div class="post_content">
<p>[ 77%] Linking CXX executable …/…/…/bin/Urho3DPlayer<br/>
/usr/bin/ld: …/…/…/lib/libUrho3D.a(SDL_surface.c.o):(.bss+0x0): multiple definition of <code>WAYLAND_wl_proxy_get_user_data'; ../../../lib/libUrho3D.a(SDL_video.c.o):(.bss+0x0): first defined here /usr/bin/ld: ../../../lib/libUrho3D.a(SDL_surface.c.o):(.bss+0x8): multiple definition of </code>WAYLAND_wl_proxy_set_user_data’; …/…/…/lib/libUrho3D.a(SDL_video.c.o):(.bss+0x8): first defined here<br/>
/usr/bin/ld: …/…/…/lib/libUrho3D.a(SDL_surface.c.o):(.bss+0x10): multiple definition of `WAYLAND_wl_proxy_add_listener’; …/…/…/lib/libUrho3D.a(SDL_video.c.o):(.bss+0x10): first defined here<br/>
how should i fix it?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>Like like it could be the same as this issue (for a different project) using gcc 10 with SDL. They said they got it working by adding -fcommon to the flags passed to gcc. If you’re also using gcc version 10 you might try that.</p>
<aside class="onebox githubissue">
<header class="source">
<a href="https://github.com/onivim/oni2/issues/1778" rel="noopener nofollow ugc" target="_blank">github.com/onivim/oni2</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Issue">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a href="https://github.com/onivim/oni2/issues/1778" rel="noopener nofollow ugc" target="_blank">Cannot build in Arch</a>
</h4>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2020-05-17" data-format="ll" data-time="07:01:29" data-timezone="UTC">07:01AM - 17 May 20 UTC</span>
</div>
<div class="user">
<a href="https://github.com/qazip" rel="noopener nofollow ugc" target="_blank">
<img alt="qazip" class="onebox-avatar-inline" height="20" src="../../../images2/dc785e8fd51c53ccc38913aa5e5dd981" width="20"/>
          qazip
        </a>
</div>
</div>
</div>
</div>
<div class="github-row">
<p class="github-content">I am trying to install Onivim2 via AUR (This version: https://aur.archlinux.org/packages/onivim2-git/) but it seems to give an error on build. Below...</p>
</div>
<div class="labels">
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">A-technical</span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">U-other</span>
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">question</span>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1166_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">spwork</div>
          <div class="post_content">
<p>how can do adding -fcommon to gcc whith cmake <img alt=":joy:" class="emoji" src="../../../images2/992266ca67283a4f8ec4857170d37703.png" title=":joy:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1166_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">spwork</div>
          <div class="post_content">
<p>built succeed.add CmakeLists.txt<br/>
SET(GCC_FCOMMON_COMPILE_FLAGS “-fcommon”)</p>
<p>add_definitions(${GCC_FCOMMON_COMPILE_FLAGS})</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I just upgraded my Fedora to version 33 which comes with GCC 10.2.1. If I can reproduce the issue locally and able to fix it, I may push my fix to the main branch. And, if I can get my NVIDIA proprietary driver to play ball with Wayland this time then I will make Urho3D engine to support Wayland correctly too with the help from SDL. Don’t hold your breath as always.</p>
<p>EDIT: well, just one “rake” command on the master branch. Everything went through uneventfully without any change nor sweat. Test run a few samples and they were OK. Still on X11 though.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Time flies. Just got my new rig to multi-boot into F34 with beta version of NVIDIA driver that finally works on XWayland. So, it means both X11 apps running on XWayland as well as Wayland-native apps could run with hardware acceleration. Personally I think the time is right to switch to Wayland now, even for those using NVIDIA graphics card like me.</p>
<p>EDIT: forgot to mention that finally I am able to reproduce the issue locally now <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I could not find anything in upstream SDL for the fix yet. So, I have added a quick fix to add the <code>-fcommon</code> compiler flag when compiling SDL library. In my test both GCC and Clang compilers need this patch, i.e. it seems both of them default to <code>-fno-common</code>.</p>
<aside class="onebox githubcommit" data-onebox-src="https://github.com/urho3d/Urho3D/commit/884c09447dd5068e79f86f81e09a06b2f47aa946">
<header class="source">
<a  rel="noopener" target="_blank">github.com/urho3d/Urho3D</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Commit">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60"><path d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a  rel="noopener" target="_blank">Quick fix for Wayland with both GCC and Clang.</a>
</h4>
<div class="github-info">
<div class="date">
        committed <span class="discourse-local-date" data-date="2021-08-05" data-format="ll" data-time="15:41:16" data-timezone="UTC">03:41PM - 05 Aug 21 UTC</span>
</div>
<div class="user">
<a href="https://github.com/weitjong" rel="noopener" target="_blank">
<img alt="weitjong" class="onebox-avatar-inline" height="20" src="../../../images2/790a1e66cde17449d3b09081591e88f0" width="20"/>
          weitjong
        </a>
</div>
<div class="lines" title="changed 1 files with 3 additions and 0 deletions">
<a  rel="noopener" target="_blank">
<span class="added">+3</span>
<span class="removed">-0</span>
</a>
</div>
</div>
</div>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>


    </div>
  </body>
</html>