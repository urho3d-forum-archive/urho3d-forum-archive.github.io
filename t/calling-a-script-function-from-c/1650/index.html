<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Calling a script function from C++</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Calling a script function from C++</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/81_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Enhex</div>
          <div class="post_content">
<p><a href="http://urho3d.github.io/documentation/HEAD/_scripting.html" rel="nofollow noopener">urho3d.github.io/documentation/H … pting.html</a> documents that you can call a script-side function from C++.<br/>
But it doesn’t cover getting a return value, or passing references. Are those possible?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>There is currently no safe engine-supported way for this. Rather you need to go to AngelScript internal classes. You should be able to get the AngelScript context that was used for the last function call execution with Script::GetScriptFileContext(), then access the context for the return value.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Sir_Nate</div>
          <div class="post_content">
<p>I think you need to make Script::GetScriptFileContext() to that, however.<br/>
If you don’t need to do it to often, you could try putting the results in a node’s user variables.<br/>
I will say, though, that with a non-AngelScript-internal class (i.e. IntVector2 instead of using an (AngelScript) int), I was able to pass it as an &amp;out reference and read the value from it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/81_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Enhex</div>
          <div class="post_content">
<p>[quote=“Sir Nate”]I think you need to make Script::GetScriptFileContext() to that, however.<br/>
If you don’t need to do it to often, you could try putting the results in a node’s user variables.<br/>
I will say, though, that with a non-AngelScript-internal class (i.e. IntVector2 instead of using an (AngelScript) int), I was able to pass it as an &amp;out reference and read the value from it.[/quote]</p>
<p>How did you pass a &amp;out reference? As a void pointer?</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>