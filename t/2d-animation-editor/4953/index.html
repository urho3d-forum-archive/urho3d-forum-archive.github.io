<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>2D animation editor</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">2D animation editor</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Im developing a 2D game. How can i create some animations like this? Can it achieve it in the editor?<br/>
Im mean creating keyframes in a timeline for node attributes like position or location.</p>
<p><img alt="" height="188" src="../../../images2/5ffd935544ac1025594651fb219bc837.gif" width="533"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I have not used this feature myself, but a SplinePath seems the way to go:</p><aside class="quote quote-modified" data-post="18" data-topic="3943">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/55025fbd2afcb6a1f5abc6e341ed02b9.png" width="20"/>
<a href="https://discourse.urho3d.io/t/possible-splinepath-speed-bug/3943/18">Possible SplinePath Speed Bug</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    A simple piecewise linear over existing interpolation. 
[Linear Spline fixed] 
I first linearized the spline. 
void LinearisedPath() 
{ 
	if (queuePath_-&gt;GetControlPoints().Size() &gt; 2)
	{
		Spline spline = queuePath_-&gt;GetSpline();
		int size = queuePath_-&gt;GetControlPoints().Size();
		double rate = 0.001f;
		splinePath_.Clear();
		for (float f = 0.f; f &lt;= 1.0f; f += rate)
		{
			Vector3 b = spline.GetPoint(f).GetVector3();
			splinePath_.AddKnot(b);
		}
	}
	else if (queuePath_-&gt;GetControlPoints()…
  </blockquote>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Tnx man. So there is no way to create some keyframes in a visual timeline? i think i should add it to editor myself though im not familiar with such a thing.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Have to checked out attribute animation?</p>
<aside class="onebox whitelistedgeneric">
<header class="source">
<a href="https://urho3d.github.io/documentation/HEAD/_attribute_animation.html" rel="nofollow noopener" target="_blank">Urho3D</a>
</header>
<article class="onebox-body">
<h3><a href="https://urho3d.github.io/documentation/HEAD/_attribute_animation.html" rel="nofollow noopener" target="_blank">Attribute animation</a></h3>
<p>Urho3D is a free lightweight, cross-platform 2D and 3D game engine implemented in C++ and released under the MIT license. Greatly inspired by OGRE and Horde3D.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Hm, indeed that may be alot simpler yet sufficient.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Yes i did, but some animations should be created visually. I mean consider making something like this using 3 sprite node:<br/>
<img alt="Folding%20platform" height="101" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/a/a3271e1cf2b60dcc7a9c6cb34d7b36cd7ac2ba17.jpeg" width="690"/><br/>
Each sprite needs to rotate and positioned by hand. Also a box collider that its size change while the platforms unfold. Im developing a 2D platformer game and i need mechanics like this a lot. Its so hard to do this in code. Any suggestion?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">I3DB</div>
          <div class="post_content">
<p>It’s not hard to do in code.</p>
<p>You are rotating and translating.</p>
<p>Once you try a few to see what’s going on, you’ll see how easy it is.</p>
<p>Also, you can readily animate using Actions. <a href="https://developer.xamarin.com/api/namespace/Urho.Actions/" rel="nofollow noopener">The urhosharp guys describe them</a>. And they may have been ported into C++ already.</p>
<p>You could just apply your custom action to the nodes and get much better result than animating in a framewise manner. Often your custom action can just be a couple few existing actions applied in sequence or parallel.</p>
<p>So from <span class="hashtag">#1</span> to <span class="hashtag">#2</span>, you rotated round a point. To <span class="hashtag">#3</span> you translated along an axis then rotated around a point. To <span class="hashtag">#4</span> you rotated around a point as is <span class="hashtag">#5-</span><span class="hashtag">#7</span>.</p>
<p><a href="https://discourse.urho3d.io/t/urhosharp-actions/1655">Here’s a discussion about them</a>, but don’t know the end result. But once you understand the base code behind actions, to animate, you’ll see how easy it all is.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>You can either use SplinePath as originally proposed by Modanung if your animation path is organic in nature or just based on some artistic impression; Or use the attribute animation if your animation is more mechanical or clockwork in nature. The former approach allows you to use the Editor to visualize and modify the path interactively. The latter approach does not have Editor support at the moment, I believe. Having said that, I think the value/object animation keyframe definition XML file can be easily generated using a small external util program. It should not be only faster to get it done, but also should produce more accurate result, IMHO.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Depending on the situation you <em>could</em> also use skeletal animation for this purpose.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Thanks for the answer sir. I’m familiar with the actions and have no problem implementing it, but after that, animations should be create in code. As i said my problem is lack of a visual tool to create animations.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Thanks sir. I think your latter approach to use XML file will solve my problem. Do you have any external program in mind to doing that? I will start searching for it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Thanks sir. you mean using something like Spriter? I think <span class="mention">@weitjong</span> solution to use exported XML animation from an external software is more efficient. But Spriter could work too. I will test both solutions and share the results.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>The related documentation is quite scarce, but you can always turns to C++ implementation source code for clue. You can actually choose between XML format or JSON format as the animation resource definition file.</p>
<p>For ValueAnimation:<br/>
<aside class="onebox githubblob">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a  rel="nofollow noopener" target="_blank">urho3d/Urho3D/blob/master/Source/Urho3D/Scene/ValueAnimation.cpp#L89</a></h4>
<pre class="onebox"><code class="lang-cpp"><ol class="start lines" start="79" style="counter-reset: li-counter 78 ;">
<li>{
</li>
<li>XMLFile xmlFile(context_);
</li>
<li>
</li>
<li>XMLElement rootElem = xmlFile.CreateRoot("valueanimation");
</li>
<li>if (!SaveXML(rootElem))
</li>
<li>    return false;
</li>
<li>
</li>
<li>return xmlFile.Save(dest);
</li>
<li>}
</li>
<li>
</li>
<li class="selected">bool ValueAnimation::LoadXML(const XMLElement&amp; source)
</li>
<li>{
</li>
<li>valueType_ = VAR_NONE;
</li>
<li>eventFrames_.Clear();
</li>
<li>
</li>
<li>String interpMethodString = source.GetAttribute("interpolationmethod");
</li>
<li>auto method = (InterpMethod)GetStringListIndex(interpMethodString.CString(), interpMethodNames, IM_LINEAR);
</li>
<li>
</li>
<li>SetInterpolationMethod(method);
</li>
<li>if (interpolationMethod_ == IM_SPLINE)
</li>
<li>    splineTension_ = source.GetFloat("splinetension");
</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<br/>
<aside class="onebox githubblob">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a  rel="nofollow noopener" target="_blank">urho3d/Urho3D/blob/master/Source/Urho3D/Scene/ValueAnimation.cpp#L151</a></h4>
<pre class="onebox"><code class="lang-cpp"><ol class="start lines" start="141" style="counter-reset: li-counter 140 ;">
<li>    const VAnimEventFrame&amp; eventFrame = eventFrames_[i];
</li>
<li>    XMLElement eventFrameElem = dest.CreateChild("eventframe");
</li>
<li>    eventFrameElem.SetFloat("time", eventFrame.time_);
</li>
<li>    eventFrameElem.SetUInt("eventtype", eventFrame.eventType_.Value());
</li>
<li>    eventFrameElem.CreateChild("eventdata").SetVariantMap(eventFrame.eventData_);
</li>
<li>}
</li>
<li>
</li>
<li>return true;
</li>
<li>}
</li>
<li>
</li>
<li class="selected">bool ValueAnimation::LoadJSON(const JSONValue&amp; source)
</li>
<li>{
</li>
<li>valueType_ = VAR_NONE;
</li>
<li>eventFrames_.Clear();
</li>
<li>
</li>
<li>String interpMethodString = source.Get("interpolationmethod").GetString();
</li>
<li>auto method = (InterpMethod)GetStringListIndex(interpMethodString.CString(), interpMethodNames, IM_LINEAR);
</li>
<li>
</li>
<li>SetInterpolationMethod(method);
</li>
<li>if (interpolationMethod_ == IM_SPLINE)
</li>
<li>    splineTension_ = source.Get("splinetension").GetFloat();
</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>For ObjectAnimation:<br/>
<aside class="onebox githubblob">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a  rel="nofollow noopener" target="_blank">urho3d/Urho3D/blob/master/Source/Urho3D/Scene/ObjectAnimation.cpp#L78</a></h4>
<pre class="onebox"><code class="lang-cpp"><ol class="start lines" start="68" style="counter-reset: li-counter 67 ;">
<li>{</li>
<li>XMLFile xmlFile(context_);</li>
<li>
</li>
<li>XMLElement rootElem = xmlFile.CreateRoot("objectanimation");</li>
<li>if (!SaveXML(rootElem))</li>
<li>    return false;</li>
<li>
</li>
<li>return xmlFile.Save(dest);</li>
<li>}</li>
<li>
</li>
<li class="selected">bool ObjectAnimation::LoadXML(const XMLElement&amp; source)</li>
<li>{</li>
<li>attributeAnimationInfos_.Clear();</li>
<li>
</li>
<li>XMLElement animElem;</li>
<li>animElem = source.GetChild("attributeanimation");</li>
<li>while (animElem)</li>
<li>{</li>
<li>    String name = animElem.GetAttribute("name");</li>
<li>
</li>
<li>    SharedPtr&lt;ValueAnimation&gt; animation(new ValueAnimation(context_));</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<br/>
<aside class="onebox githubblob">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a  rel="nofollow noopener" target="_blank">urho3d/Urho3D/blob/master/Source/Urho3D/Scene/ObjectAnimation.cpp#L131</a></h4>
<pre class="onebox"><code class="lang-cpp"><ol class="start lines" start="121" style="counter-reset: li-counter 120 ;">
<li>    if (!info-&gt;GetAnimation()-&gt;SaveXML(animElem))</li>
<li>        return false;</li>
<li>
</li>
<li>    animElem.SetAttribute("wrapmode", wrapModeNames[info-&gt;GetWrapMode()]);</li>
<li>    animElem.SetFloat("speed", info-&gt;GetSpeed());</li>
<li>}</li>
<li>
</li>
<li>return true;</li>
<li>}</li>
<li>
</li>
<li class="selected">bool ObjectAnimation::LoadJSON(const JSONValue&amp; source)</li>
<li>{</li>
<li>attributeAnimationInfos_.Clear();</li>
<li>
</li>
<li>JSONValue attributeAnimationsValue = source.Get("attributeanimations");</li>
<li>if (attributeAnimationsValue.IsNull())</li>
<li>    return true;</li>
<li>if (!attributeAnimationsValue.IsObject())</li>
<li>    return true;</li>
<li>
</li>
<li>const JSONObject&amp; attributeAnimationsObject = attributeAnimationsValue.GetObject();</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>The documentation does show how to load such resource file, however. If done correctly, perhaps you can reuse the same animation file for the grouping node (containing two sprite node) and for the individual node.</p>
<p>I don’t know any of the external tool out there that can readily generate the resource file in these formats. These are anyway very Urho-specific format, but who knows you will be lucky to find one in your search. If I were you though, I would probably just use Ruby/Perl/Python/JS script to generate the JSON file myself. Isn’t it just simple rotation? So, a simple sine wave function can do the trick, no?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>Maybe its a simple rotation yeah, but its just an example to explain what i need. I have multiple mechanics that some of them have location, rotation and scale changes over the time and creating that effect through the code is just not efficient and not the right way in my opinion. If there was a visual animator tool, they could be easily created. There is no such a thing in the urho editor so i think searching for a program to export animation with XML or JSON will be the best option though they need to be changed in a way that urho can read them.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I just have an idea. I haven’t tried it myself. It is plausible that you still can use our current Editor to visualize the animation, but using other tool to modify the animation resource file. The Editor uses a file watcher, so it auto reloads the resource when its content changes externally. The Editor has a minimalist quake-like console where you can enter AS or LUA command. So, in theory you could invoke the animation resource load/save scripting API from the console window. Once the scene is setup, use the play button in Editor to play the value/object animation. Use external file editor to alter the key frame or add new one, and our Editor should reflect the changes interactively. Again, this is just an idea before my morning coffee and untested yet. So I wish you good luck.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2053_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Yatsomi</div>
          <div class="post_content">
<p>I just wanna say thank you for being so helpful and responsive. I’m searching for the external tool and will test your idea as soon as i can.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>