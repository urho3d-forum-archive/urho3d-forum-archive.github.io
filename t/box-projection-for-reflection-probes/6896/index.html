<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Box projection for reflection probes</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Box projection for reflection probes</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3007_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cmd</div>
          <div class="post_content">
<p>Related to discussion:</p><aside class="quote quote-modified" data-post="1" data-topic="3016">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/e1a772c3f2f09a176b0f7c7024796bc4.png" width="20"/>
<a href="https://discourse.urho3d.io/t/use-skybox-material-as-reflection-source/3016">Use Skybox material as reflection source</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    Is it possible to use the Skybox material as the environment map for reflective materials? Ideally this would also work with the PBR pipeline. My understanding is that currently only a TextureCube resource can be used - and in the case of PBR, only the texture cube associated with the Zone is used. 
My goals is just interact with the Skybox material (say, something like this): 
[image]
  </blockquote>
</aside>
<p>I had some success implementing the HLSL and GLSL shader code changes to use box projection for the reflection probe. I’ve not generalised it yet, and it probably needs to be made optional for Zone environment (or more generally on TextureCube mapping). It is also currently based on the assumption that the zone bounds matches the required bounds for the box projection, which may not always be the case. Also assumes Zone bounds is in world space. For these reasons I decided not to make a PR out of it yet, but can provide details of what I changed if anyone is interesting in taking it further.</p>
<p>Here is my test scene, prior to my shader changes:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="utummndsjADcq7YZ2ppOojv6Gdt"  height="499" src="../../../images2/417ce875561a0ace3567a04d5a38970a.jpeg"  width="653"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1054×807 228 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>An here is the same scene with my box projection shader changes:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="hTVFf57JloZpCTeLnDnQpTaA6mQ"  height="499" src="../../../images2/17bab3ba9cc8fcd35fa9092c61b674df.jpeg"  width="650"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1050×807 237 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>