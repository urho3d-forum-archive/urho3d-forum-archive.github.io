<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Rubik&rsquo;s cube texturing, adding material, cubemap</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Rubik&rsquo;s cube texturing, adding material, cubemap</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">kaapa</div>
          <div class="post_content">
<p>Hello,</p>
<p>I am pretty new to Urho3D. As a side project, I’ve decided to make a simple rubik’s cube game. Everything works fine, except that I can’t get the texturing right. Basically, what I want to achieve is to have just one model, which will represent a single cubie which will be colored differently based on to which cube face it belongs. My problem is that, I don’t know where to start. The documentation of materials tells me nothing. The one interesting thing I found was Cubemap, which to my understanding, will provide me with the ability to set different texture to different faces of the model. But, when using cubemap (I set all cubemap faces to be red), my whole cube went completely black.</p>
<p>To sum up:</p>
<ol>
<li>I want to have just one model.</li>
<li>I want to set different colors to different cube faces.</li>
</ol>
<p>And I completely don’t know how to do that, or even search for info/examples on how to do it. Do you guys know how to do it? Do you have any examples of something like this working?</p>
<p>What I’ve done is this</p>
<p>material - rubiks.xml</p>
<p>[code]<br/>
<br/>
<br/>
</p>
<p>[/code]</p>
<p>texture - rubiks.xml</p>
<p><code>&lt;cubemap&gt;
    &lt;face name="red.png" /&gt;
    &lt;face name="red.png" /&gt;
    &lt;face name="red.png" /&gt;
    &lt;face name="red.png" /&gt;
    &lt;face name="red.png" /&gt;
    &lt;face name="red.png" /&gt;
    &lt;quality low="0" /&gt;
&lt;/cubemap&gt;
</code></p>
<p>Where red.png is just 16x16 png image.</p>
<p>Thanks,<br/>
Kacper</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>A cubemap is not what you’re looking for. Those are used for reflections and backgrounds.</p>
<p><a data-bbcode="true" href="http://luckeyproductions.nl/mdl/RubixCubie.mdl">This model</a> <a data-bbcode="true" href="http://luckeyproductions.nl/blends/RubixCubie.blend">[Blend]</a> uses vertex colors. Applying a material with a VCol technique will show the colors.<br/>
There’s a lot of ways you could do this, but I think this is the most straightforward one.</p>
<p>I know it’s better to teach a person how to fish than to give one a fish. But I think this is more like providing a hook. <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">kaapa</div>
          <div class="post_content">
<p>great, thanks for help!</p>
<p>Meanwhile I’ve figured out that I can make a blender cube model which will have 6 different materials (one per side), and then just use SetMaterial method (with proper material index as a first argument) to set different colored materials. Is it going to work?</p>
<p>Thanks,<br/>
Kacper</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Why do you need 6 materials? Just unwrap cube model and paint texture with 6 colored rectangles.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-username="kaapa">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/f58ba84b48f288577fce64db1ed46dc8.png" width="20"/> kaapa:</div>
<blockquote>
<p>Meanwhile I’ve figured out that I can make a blender cube model which will have 6 different materials (one per side), and then just use SetMaterial method (with proper material index as a first argument) to set different colored materials. Is it going to work?</p>
</blockquote>
</aside>
<p>Yes, that would be another way. Mind you that for the Geometry indices to match the material order in Blender you usually need to <a data-bbcode="true" href="https://www.blender.org/manual/modeling/meshes/editing/misc.html" rel="noopener nofollow ugc">sort the elements</a> by material.<br/>
Eight months ago CodeMonkey provided this image to help me find it:<br/>
<a data-bbcode="true" href="http://savepic.su/6184007.png" rel="noopener nofollow ugc"><img alt="" height="1" src="../../../images2/50c4134fd269ff75a773eef84af989df.png" width="1"/></a></p>
<p>In case you need to do this for many objects in the future, this python script will do the same for all selected objects:</p>
<p>[code]<br/>
import bpy</p>
<p>for ob in bpy.context.selected_objects:<br/>
bpy.context.scene.objects.active = ob</p>
<pre><code>bpy.ops.object.mode_set(mode = 'EDIT')
bpy.ops.mesh.select_all(action='SELECT')
bpy.ops.mesh.sort_elements(type='MATERIAL', elements={'FACE'})
bpy.ops.object.mode_set(mode = 'OBJECT')[/code]
</code></pre>
<p>For assigning the materials (in C++11) you’re probably best of using something like:</p>
<pre><code class="lang-auto">for (int i{0}; i &lt; model-&gt;GetNumGeometries(); ++i) {

    Material* material{ GetResource&lt;Material&gt;(path)-&gt;Clone() };
    switch (i){
    default:
    case 0: material-&gt;SetShaderParameter("MatDiffColor", Color::WHITE);
    break;
    case 1: material-&gt;SetShaderParameter("MatDiffColor", Color::RED);
    break;
    ...
    }
    model-&gt;SetMaterial(i, material);
}
</code></pre>
<p>That way you don’t have to create and edit six materials and the glossiness or technique can be changed by editing this one material. Cloning the materials once for the entire cube would be more efficient though.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>