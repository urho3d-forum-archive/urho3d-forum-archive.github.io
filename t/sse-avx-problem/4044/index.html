<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>SSE/AVX problem</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">SSE/AVX problem</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">lexx</div>
          <div class="post_content">
<p>I take this here because dont know should I write this to github issue<br/>
<aside class="onebox githubissue">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com/urho3d/Urho3D</a>
</header>
<article class="onebox-body">
<a href="https://github.com/bosoni" rel="nofollow noopener">
<img class="thumbnail onebox-avatar" height="420" src="../../../images2/d6b1827bb31ccf31666f871d8b91a8b4.png" width="420"/>
</a>
<h4><a  rel="nofollow noopener" target="_blank">Issue: SSE problem</a></h4>
<div class="date" style="margin-top:10px;">
<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/bosoni" rel="nofollow noopener" target="_blank">bosoni</a>
	on <a  rel="nofollow noopener" target="_blank">2018-01-17</a>
</div>
<div class="user">
	closed by <a href="https://github.com/weitjong" rel="nofollow noopener" target="_blank">weitjong</a>
	on <a  rel="nofollow noopener" target="_blank">2018-02-26</a>
</div>
</div>
<pre class="content" style="white-space: pre-wrap;">After this commit
" Adjust compiler flags to enable SSE3 when it is supported.
SHA 093a5b6
"
compiling with default cmake settings, all .exe files...</pre>
<div class="labels">
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">build system</span>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>I was thinking that if .exe is compiled with AVX, then it doesnt work on my quite old processor (above links shows it with cpu-z).<br/>
But all games I have tested, at least starts (slow but starts).</p>
<p>What Im wondering, does these games have fallback to not use AVX and use AVX or different .exes?  I dont remember multiple exes. Can source code be compiled with and without using AVX?</p>
<p>Because if one compile now trunk and create awesome game, I cant play it.</p>
<p>Or am I totally off the tracks so to speak?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>I can confirm - tested my app on a modern low end Lenovo laptop with Pentium N3540 and NVidia GT820, it doesn’t start, main reason is AVX. It will probably run fine with low resolution so maybe it is reasonable to fix this.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Also read this post in GitHub. I have asked the question months ago and got zero feedback.</p>
<aside class="onebox githubissue">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com/urho3d/Urho3D</a>
</header>
<article class="onebox-body">
<a href="https://github.com/amerkoleci" rel="nofollow noopener">
<img class="thumbnail onebox-avatar" height="96" src="../../../images2/19662f13111fa8d233ed66411f99fd2b.jpg" width="96"/>
</a>
<h4><a  rel="nofollow noopener" target="_blank">Issue: SDL 2.0.7</a></h4>
<div class="date" style="margin-top:10px;">
<div class="user" style="margin-top:10px;">
	opened by <a href="https://github.com/amerkoleci" rel="nofollow noopener" target="_blank">amerkoleci</a>
	on <a  rel="nofollow noopener" target="_blank">2017-10-12</a>
</div>
<div class="user">
	closed by <a href="https://github.com/weitjong" rel="nofollow noopener" target="_blank">weitjong</a>
	on <a  rel="nofollow noopener" target="_blank">2017-12-16</a>
</div>
</div>
<pre class="content" style="white-space: pre-wrap;">Version 2.0.6 has been released (https://discourse.libsdl.org/t/sdl-2-0-6-released/23109).
If I'm able I will send PR</pre>
<div class="labels">
<span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">enhancement</span>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Similar issue on Linux, program compiled with GCC 4.7 on one machine (gitlab CI/CD and docker environment) fires this:</p>
<pre><code class="lang-auto">Program received signal SIGILL, Illegal instruction.
0x0000000000e81051 in Urho3D::StringHashRegister::StringHashRegister(bool) ()
(gdb) bt
#0  0x0000000000e81051 in Urho3D::StringHashRegister::StringHashRegister(bool) ()
#1  0x0000000000e875cc in Urho3D::GetEventNameRegister() ()
#2  0x000000000080abcd in _GLOBAL__sub_I_player_application.cpp ()
#3  0x0000000001e9021d in __libc_csu_init ()
#4  0x00007fffedeb7150 in __libc_start_main (main=0x80e4b0 &lt;main&gt;, argc=2, argv=0x7fffffffe428, init=
    0x1e901d0 &lt;__libc_csu_init&gt;, fini=&lt;optimized out&gt;, rtld_fini=&lt;optimized out&gt;, stack_end=0x7fffffffe418)
    at ../csu/libc-start.c:264
#5  0x000000000089239f in _start ()</code></pre>
<p>The machine it is running on has <strong>Intel® Pentium® CPU G630T @ 2.30GHz</strong>:</p>
<pre><code class="lang-auto">Architecture:        x86_64
CPU op-mode(s):      32-bit, 64-bit
Byte Order:          Little Endian
CPU(s):              2
On-line CPU(s) list: 0,1
Thread(s) per core:  1
Core(s) per socket:  2
Socket(s):           1
NUMA node(s):        1
Vendor ID:           GenuineIntel
CPU family:          6
Model:               42
Model name:          Intel(R) Pentium(R) CPU G630T @ 2.30GHz
Stepping:            7
CPU MHz:             2294.638
CPU max MHz:         2300,0000
CPU min MHz:         1600,0000
BogoMIPS:            4589.27
Virtualization:      VT-x
L1d cache:           32K
L1i cache:           32K
L2 cache:            256K
L3 cache:            3072K
NUMA node0 CPU(s):   0,1
Flags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 popcnt tsc_deadline_timer xsave lahf_lm epb tpr_shadow vnmi flexpriority ept vpid xsaveopt dtherm arat pln pts</code></pre>
<p>There is no AVX on the target CPU, but there is AVX on the CI/CD machine. Any help will be appreciated, in the meantime I’m trying to find the problem myself.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>By default our build system will try use the “native” instruction set of the build/host machine. If you want to target lower spec machine than your build/host then you should use the “URHO3D_DEPLOYMENT_TARGET” build option. This is quite similar in concept when targeting Apple platforms, where you need to specify the deployment target build option correctly. See <a href="https://urho3d.github.io/documentation/HEAD/_building.html#Build_Options">https://urho3d.github.io/documentation/HEAD/_building.html#Build_Options</a> for more detail.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/259_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Pencheff</div>
          <div class="post_content">
<p>Thank you <span class="mention">@weitjong</span>, that fixed it. I wonder how I missed something that important, it even has the deployment keyword in it .</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>