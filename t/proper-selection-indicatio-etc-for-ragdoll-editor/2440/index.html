<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Proper selection indicatio, etc. for ragdoll editor</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Proper selection indicatio, etc. for ragdoll editor</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Hi, all!</p>
<p>I currently work on tool which should allow me to create ragdolls<br/>
(as it is currently very hard and frustrating task).<br/>
The idea is to be able to select bone with mouse click and be able to<br/>
create RigidBody, CollisionShape  and Constraint allowing settings, rotation, etc.<br/>
And write the result as xml (or whatever format)for later use.</p>
<p>The planned feature is to start simple, i.e. something similar to Unity ragdoll wizard,<br/>
but done in different way. So we select subset of bones we want for ragdoll<br/>
and set them to a category, also setting masses and constraint axes (could not find<br/>
how to do this automagically).</p>
<p>Of course doing<br/>
this I’ve met a lot of first-type problems of showstopper kind and would appreciate all<br/>
help with these.<br/>
My current completion status is here: <a href="https://youtu.be/rsq9gtbxb4E" rel="nofollow noopener">youtu.be/rsq9gtbxb4E</a> so<br/>
to visually show the idea.</p>
<p>What I come up with is 3D model displayed in view and allowing to select bones<br/>
and do various things:</p>
<ul>
<li>
<p>I need to implement a way for user to see which local bone axes point in which direction,<br/>
so I need to draw such geometry. As I understand I just need to add StaticModel to bone node<br/>
which shows axes and the bone transform for bone node will do the rest. Is it correct?</p>
</li>
<li>
<p>I need to indicate the selection, i.e. I need to show which bone is selected on 3D model.<br/>
The best would be to show what bone is current among axes. The direction axes are pointing is important<br/>
for constraints use and placement, while dependency is not really well grasped yet.<br/>
Also I need to know the length of bone. Basically I need to know 2 points - base and tip,<br/>
so I could draw some geometry on top.</p>
</li>
<li>
<p>In addition I need to visualize collision shapes - I wanted to go cheap way and use debug geometry for that,<br/>
but somehow this doesn’t work as debug geometry is somehow overdrawn by actual model geometry (can be seen<br/>
on video). But if debug geometry can be made working that would be much better.</p>
</li>
</ul>
<p>If these 3 problems get solved the rest seems to be trivial to do. I just wonder why nobody did this yet?<br/>
(or is there some works in the area?)</p>
<p>Thanks!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Mike</div>
          <div class="post_content">
<p>I think first and only step is to procedurally generate the ragdoll. This has already been discussed in a couple of threads.<br/>
That way you don’t have to rely on xml definitions or oyher complicated setups.</p>
<p>From what I remember Unity expects bones to be oriented in a standard way, so if you don’t use the correct orientation or use a reversed hip setup you may get into trouble. This certainly also applies here.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Well, the “procedural ragdoll” thing applies only to bone bounding boxes, as I see,<br/>
but as for constraints it is really not known how to match constraints, and that is really a problem for me too.<br/>
I think that it should be possible using reference skeleton (ragdoll template) to know what needs to be<br/>
rotated (axis rotation) to make things work, to make things work. But I still can’t get there…</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>