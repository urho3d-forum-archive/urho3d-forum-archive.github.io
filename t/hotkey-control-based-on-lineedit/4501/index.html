<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Hotkey control based on LineEdit</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Hotkey control based on LineEdit</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Hi all,</p>
<p>I’ve create a simple Hotkey control based on LineEdit, e.g to customize shortcuts in a game. You can find it here:<br/>
<aside class="onebox githubgist">
<header class="source">
<a href="https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af" rel="nofollow noopener" target="_blank">gist.github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af" rel="nofollow noopener" target="_blank">https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af</a></h4>
<h5>HotkeyEdit.cpp</h5>
<pre><code class="C++">#include "stdafx.h"
#include "HotkeyEdit.h"
#include &lt;SDL/SDL_keyboard.h&gt;

void HotkeyEdit::RegisterObject(Context* context)
{
    context-&gt;RegisterFactory&lt;HotkeyEdit&gt;();
}

HotkeyEdit::HotkeyEdit(Context* context) :</code></pre>
This file has been truncated. <a href="https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af" rel="nofollow noopener" target="_blank">show original</a>
<h5>HotkeyEdit.h</h5>
<pre><code class="C++">#pragma once

#define SC_MOD_LSHIFT  1               // Left Shift
#define SC_MOD_RSHIFT  1 &lt;&lt; 1          // Right Shift
#define SC_MOD_SHIFT   1 &lt;&lt; 2          // Left or right Shift
#define SC_MOD_LCTRL   1 &lt;&lt; 3          // Left Ctrl
#define SC_MOD_RCTRL   1 &lt;&lt; 4          // Right Ctrl
#define SC_MOD_CTRL    1 &lt;&lt; 5          // Left or right Ctrl
#define SC_MOD_LALT    1 &lt;&lt; 6          // Left Alt
#define SC_MOD_RALT    1 &lt;&lt; 7          // Right Alt</code></pre>
This file has been truncated. <a href="https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af" rel="nofollow noopener" target="_blank">show original</a>
<p>
</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>Maybe someone can need it.</p>
<p>Best Stefan</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p>What is type Key in the code?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>It is defined in InputConstants.h, see<br/>
<aside class="onebox githubblob">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a  rel="nofollow noopener" target="_blank">urho3d/Urho3D/blob/master/Source/Urho3D/Input/InputConstants.h#L60</a></h4>
<pre class="onebox"><code class="lang-h"><ol class="start lines" start="50" style="counter-reset: li-counter 49 ;">
<li>{</li>
<li>QUAL_NONE = 0,</li>
<li>QUAL_SHIFT = 1,</li>
<li>QUAL_CTRL = 2,</li>
<li>QUAL_ALT = 4,</li>
<li>QUAL_ANY = 8</li>
<li>};</li>
<li>URHO3D_FLAGSET(Qualifier, QualifierFlags);</li>
<li>
</li>
<li>
</li>
<li class="selected">enum Key : unsigned</li>
<li>{</li>
<li>KEY_UNKNOWN = SDLK_UNKNOWN,</li>
<li>KEY_A = SDLK_a,</li>
<li>KEY_B = SDLK_b,</li>
<li>KEY_C = SDLK_c,</li>
<li>KEY_D = SDLK_d,</li>
<li>KEY_E = SDLK_e,</li>
<li>KEY_F = SDLK_f,</li>
<li>KEY_G = SDLK_g,</li>
<li>KEY_H = SDLK_h,</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p><img alt=":sweat_smile:" class="emoji" src="../../../images2/677108e2ca3184440222fa48fee4f409.png" title=":sweat_smile:"/>this is from the master branch… im using urho3d version 1.7, no wonder i cant figure out what it is.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Oh, I see there is no InputConsts.h in 1.7. I think you can just change it to an (unsigned) int and use the SDLK_* constants instead.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p>I got a serious problem…<br/>
cant i add custom ui components to precompiled urho3d library? i tried to add several custom ui components shared on forum to my project and all of them worked just fine except style part.</p>
<p>just like this one</p>
<pre><code>auto *edit = window-&gt;CreateChild&lt;HotkeyEdit&gt;();
edit-&gt;SetStyle("LineEdit");
edit-&gt;SetMinSize(200, 32);

auto *edit2 = window-&gt;CreateChild&lt;LineEdit&gt;();
edit2-&gt;SetStyleAuto();
edit2-&gt;SetMinSize(200, 32);
edit2-&gt;SetPosition(0, 32);
</code></pre>
<p><img alt="Annotation%202019-01-19%20180936" height="430" src="../../../images2/f81178324d907fcac88d3a095d9c89cf.jpeg" width="431"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Hm yes, I also have problems with the styling part from time to tome. For the moment I set the style manually in code, e.g.:</p>
<pre><code>HotkeyEdit* hkEdit = hkContainer-&gt;CreateChild&lt;HotkeyEdit&gt;("HotkeyEditor");
Texture2D* tex = cache-&gt;GetResource&lt;Texture2D&gt;("Textures/UI.png");
hkEdit-&gt;SetTexture(tex);
hkEdit-&gt;SetImageRect(IntRect(48, 0, 64, 16));
hkEdit-&gt;SetBorder(IntRect(4, 4, 4, 4));
</code></pre>
<p><img alt="image" height="445" src="../../../images2/21bddedda05f59439b7257fe41cbce83.png" width="410"/></p>
<p>When I don’t set the Texture by code, I get the same white control as you, even when I use SetStyle(“LineEdit”).</p>
<p>Maybe someone can enlighten me what I’m doing wrong.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p>is this Lumak’s TabGroup?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Yes, it’s great <img alt=":grinning:" class="emoji" src="../../../images2/bd13dfa3e8d190158dc9e35d03130a24.png" title=":grinning:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p><img alt=":sob:" class="emoji" src="../../../images2/fd0a89c72158eef545a87c4486a26aec.png" title=":sob:"/> i need to do your style trick again if i wanna use this TabGroup!</p>
<p><img alt=":rofl:" class="emoji" src="../../../images2/ff418d3d7e46a258c9acb76ba689f2a8.png" title=":rofl:"/> i adjusted code for his TabGroup, but the style part is still not working, wth!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>How and when the styling works is not entirely clear to me. In this case i just trial and error around <img alt=":grin:" class="emoji" src="../../../images2/bd57768e0464a7021132815cde8c7ce7.png" title=":grin:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>The styling of all UI-element derived classes are nothing else but a mechanism to apply a set of predefined attributes to the UIElement object. You first define the set of attributes in a “style sheet” or whatever you want to call it, in an XML file. You then reference them by using <code>UIElement::SetStyle("predefined-style-name")</code>. The <code>UIElement::SetStyleAuto()</code> variant uses the type of the UI-element itself as the name of the style to be applied, i.e. <code>Button::SetStyleAuto()</code> is equivalent to <code>Button::SetStyle("Button")</code>. But how does the UI subsystem know which “style sheet” you want to use in the first place? In actual fact it does not. So you must do the below quite early on, if you plan to create the UI layout by code.</p>
<pre><code class="lang-auto">auto* cache = GetSubsystem&lt;ResourceCache&gt;();
auto* stylesheet = cache-&gt;GetResource&lt;XMLFile&gt;("path/to/your/stylesheet.xml");
auto* uiRoot = GetSubsystem&lt;UI&gt;()-&gt;GetRoot());
uiRoot-&gt;SetDefaultStyle(stylesheet);
</code></pre>
<p>When you create a new UIElement object as a child of some other object that is already in the UI hierarchy, the child object will ask the parent object for a style sheet, if the child does not explicitly have one. So, ultimately the query will reach to the root UI element. That’s why the above code is important.</p>
<p>Of course alternatively, you can also set the style sheet you want to use in the individual object before calling the <code>SetStyle()</code>. You may want to do this if you want to have different style sheet to be applied than the normal default one, for instance. Or, if you want to create a new object and style it before parenting it.</p>
<p>HTH.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p>actually i did set default to ui root and i create ui elements directly into ui root. but like in this HotkeyEdit, the Text element inside does apply styles, and the BorderImage just wont.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I did not look at your code so I don’t know what went wrong. But If you understand what I explained above then you should find the Urho3D UI styling mechanism is quite versatile and flexible. The Urho3D project provided style sheet is actually designed to be used by its Editor. I cannot imagine why anyone would want to use it as it is in one own game. So perhaps Lumak has a modified version of that file but you are not.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p>Lumak’s repo <a href="https://github.com/Lumak/Urho3D-UI-Components" rel="nofollow noopener">https://github.com/Lumak/Urho3D-UI-Components</a><br/>
i copied his <code>DefaultStyle.xml</code> and <code>UI.png</code> and still does not work</p>
<p>;;</p>
<p>back to HotkeyEdit:<br/>
I tried setting default <code>SetDefaultStyle()</code> then <code>SetStyle()</code>,<br/>
and <code>SetStyle()</code> with second argument specified, both didnt work.<br/>
results are same: only the Text element inside applied style</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<pre><code>SetStyle("LineEdit", GetSubsystem&lt;ResourceCache&gt;()-&gt;GetResource&lt;XMLFile&gt;("UI/DefaultStyle.xml"));
SetTexture(GetSubsystem&lt;ResourceCache&gt;()-&gt;GetResource&lt;Texture2D&gt;("Textures/UI.png"));
SetImageRect(IntRect(48, 0, 64, 16));
SetBorder(IntRect(4, 4, 4, 4));
</code></pre>
<p>code snippet above works, it seems like the problem is within BorderImage?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Thank you for your explanation, this is indeed very useful.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Virgo</div>
          <div class="post_content">
<p><img alt=":face_with_raised_eyebrow:" class="emoji" src="../../../images2/3af556cfb46bc5d94bbfc2c31a876017.png" title=":face_with_raised_eyebrow:"/>what, did you figure out how to properly set style?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Not yet, but it made some things clearer. I need to cleanup my client code anyway one time (at them moment it’s a bit messy), then I’ll look into it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>Why does your key enumeration  (the <span class="hashtag">#defines</span>) not take advantage of binary enum?<br/>
For example,</p>
<pre><code class="lang-auto">#define SC_MOD_LSHIFT  1               // Left Shift
#define SC_MOD_RSHIFT  1 &lt;&lt; 1          // Right Shift
#define SC_MOD_SHIFT  SC_MOD_RSHIFT | SC_MOD_LSHIFT         // Left or right Shift
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2350_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">trillian</div>
          <div class="post_content">
<p>Yes, good question. But then the method GetQualName (<a href="https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af#file-hotkeyedit-h-L39" rel="nofollow noopener">https://gist.github.com/stievie/878a4f04d2499dc4f1d12dbb7552b2af#file-hotkeyedit-h-L39</a>) wouldn’t work anymore. I know it could be changed to work with it, but this control was a quick solution for a problem I had. I agree there is a lot room for improvements <img alt=":blush:" class="emoji" src="../../../images2/f7219af3a28b187e66a8a7d9ec923fbb.png" title=":blush:"/>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>Actually, your GetQualName will still work!<br/>
It performs a bunch of AND tests on active bits, and collates a result, it will still work perfectly with a binary enum.<br/>
You did not test the combined bitflag enumerations in this method, but had you, it would STILL work (with some positive results appearing more than once) <img alt=":slight_smile:" class="emoji" src="../../../images2/33cb8d9bf277cdb113680cf5564b6764.png" title=":slight_smile:"/></p>
<p>Keep up the good work!</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>