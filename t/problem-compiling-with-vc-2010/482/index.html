<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Problem compiling with VC 2010</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Problem compiling with VC 2010</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rogerdv</div>
          <div class="post_content">
<p>Im trying to compile for Windows using Visual Studio Express 2010. I run the corresponding bat file (cmake_vs2010) but I get a lot of errors:</p>
<p>[code]D:\work\Urho3D&gt;cmake_vs2010.bat</p>
<p>D:\work\Urho3D&gt;cmake -E chdir Build cmake  -G “Visual Studio 10” VERSION=10 -DUR<br/>
HO3D_SAMPLES=1 URHO3D_LUAJIT=1 …\Source<br/>
– The C compiler identification is MSVC 16.0.30319.1<br/>
– The CXX compiler identification is MSVC 16.0.30319.1<br/>
– Check for working C compiler using: Visual Studio 10 2010<br/>
– Check for working C compiler using: Visual Studio 10 2010 – broken<br/>
CMake Error at C:/Program Files (x86)/CMake/share/cmake-3.0/Modules/CMakeTestCCo<br/>
mpiler.cmake:61 (message):<br/>
The C compiler “C:/Program Files (x86)/Microsoft Visual Studio<br/>
10.0/VC/bin/cl.exe” is not able to compile a simple test program.</p>
<p>It fails with the following output:</p>
<p>Change Dir: D:/work/Urho3D/Build/CMakeFiles/CMakeTmp</p>
<p>Run Build Command:“C:/Windows/Microsoft.NET/Framework/v4.0.30319/MSBuild.exe” “cmTryCompileExec3866937741.vcxproj” “/p:Configuration=Debug” "/p:VisualStudioVersion=10.0"<br/>
Microsoft ® Build Engine version 4.0.30319.17929</p>
<p>[Microsoft .NET Framework, version 4.0.30319.17929]</p>
<p>Copyright © Microsoft Corporation. All rights reserved.</p>
<p>Build started 13/10/2014 11:08:23.</p>
<p>Project “D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\cmTryCompileExec3866937741.vcxproj” on node 1 (default targets).</p>
<p>PrepareForBuild:</p>
<p>Creating directory “cmTryCompileExec3866937741.dir\Debug”.</p>
<p>Creating directory “D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\Debug”.</p>
<p>InitializeBuildStatus:</p>
<p>Creating “cmTryCompileExec3866937741.dir\Debug\cmTryCompileExec3866937741.unsuccessfulbuild” because “AlwaysCreate” was specified.</p>
<p>ClCompile:</p>
<p>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D _DEBUG /D “CMAKE_INTDIR=“Debug”” /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo"cmTryCompileExec3866937741.dir\Debug\" /Fd"cmTryCompileExec3866937741.dir\Debug\vc100.pdb" /Gd /TC /analyze- /errorReport:queue testCCompiler.c</p>
<p>Microsoft ® 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86</p>
<p>Copyright © Microsoft Corporation.  All rights reserved.</p>
<p>cl /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D _DEBUG /D “CMAKE_INTDIR=“Debug”” /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo"cmTryCompileExec3866937741.dir\Debug\" /Fd"cmTryCompileExec3866937741.dir\Debug\vc100.pdb" /Gd /TC /analyze- /errorReport:queue testCCompiler.c</p>
<p>testCCompiler.c</p>
<p>ManifestResourceCompile:</p>
<p>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\rc.exe /nologo /fo"cmTryCompileExec3866937741.dir\Debug\cmTryCompileExec3866937741.exe.embed.manifest.res" cmTryCompileExec3866937741.dir\Debug\cmTryCompileExec3866937741_manifest.rc</p>
<p>Link:</p>
<p>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\link.exe /ERRORREPORT:QUEUE /OUT:“D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\Debug\cmTryCompileExec3866937741.exe” /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /ManifestFile:“cmTryCompileExec3866937741.dir\Debug\cmTryCompileExec3866937741.exe.intermediate.manifest” /MANIFESTUAC:“level=‘asInvoker’ uiAccess=‘false’” /DEBUG /PDB:“D:/work/Urho3D/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec3866937741.pdb” /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:“D:/work/Urho3D/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec3866937741.lib” /MACHINE:X86 cmTryCompileExec3866937741.dir\Debug\cmTryCompileExec3866937741.exe.embed.manifest.res</p>
<p>cmTryCompileExec3866937741.dir\Debug\testCCompiler.obj  /machine:X86 /debug</p>
<p>LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt [D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\cmTryCompileExec3866937741.vcxproj]</p>
<p>Done Building Project “D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\cmTryCompileExec3866937741.vcxproj” (default targets) – FAILED.</p>
<p>Build FAILED.</p>
<p>“D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\cmTryCompileExec3866937741.vcxproj” (default target) (1) -&gt;</p>
<p>(Link target) -&gt;</p>
<p>LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt [D:\work\Urho3D\Build\CMakeFiles\CMakeTmp\cmTryCompileExec3866937741.vcxproj]</p>
<pre><code>0 Warning(s)

1 Error(s)
</code></pre>
<p>Time Elapsed 00:00:01.09<br/>
[/code]</p>
<p>What Im doing wrong here?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/5_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cin</div>
          <div class="post_content">
<p>Another version of Visual Studio installed?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rogerdv</div>
          <div class="post_content">
<p>Nop, only 2010, with VC++ and VC# installed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bluemoon</div>
          <div class="post_content">
<p>Just tried it on my system and got the same error with windows reporting that “Microsoft Resource File To COFF Object Conversion Utility has stopped working” more like a crash. I used both the cmake batch file supplied with Urho3D and the cmake-gui, the Urho3D source used was downloaded three days ago.<br/>
My System is Windows Vista, 4GB Ram, with visual c++ 2010 ( and also visual c# 2010 just like rogerdv)<br/>
Below is the output of cmake</p>
<pre><code class="lang-auto">Check for working C compiler using: Visual Studio 10
Check for working C compiler using: Visual Studio 10 -- broken
CMake Error at C:/CMAKE/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):
  The C compiler "cl" is not able to compile a simple test program.

  It fails with the following output:

   Change Dir: C:/Build_Folder/Urho3D-master/Build/CMakeFiles/CMakeTmp

  

  Run Build Command:C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe
  cmTryCompileExec231998991.vcxproj /p:Configuration=Debug

  Microsoft (R) Build Engine version 4.0.30319.17929

  [Microsoft .NET Framework, version 4.0.30319.17929]

  Copyright (C) Microsoft Corporation.  All rights reserved.

  Build started 13/10/2014 23:03:04.

  Project
  "C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\cmTryCompileExec231998991.vcxproj"
  on node 1 (default targets).

  PrepareForBuild:

    Creating directory "cmTryCompileExec231998991.dir\Debug\".

  InitializeBuildStatus:

    Creating "cmTryCompileExec231998991.dir\Debug\cmTryCompileExec231998991.unsuccessfulbuild" because "AlwaysCreate" was specified.

  ClCompile:

    C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D _DEBUG /D "CMAKE_INTDIR=\"Debug\"" /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo"cmTryCompileExec231998991.dir\Debug\\" /Fd"C:/Build_Folder/Urho3D-master/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec231998991.pdb" /Gd /TC /analyze- /errorReport:queue "C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\testCCompiler.c"  /Zm1000 
    Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 16.00.30319.01 for 80x86
    Copyright (C) Microsoft Corporation.  All rights reserved.
    
    cl /c /Zi /W3 /WX- /Od /Ob0 /Oy- /D WIN32 /D _WINDOWS /D _DEBUG /D "CMAKE_INTDIR=\"Debug\"" /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo"cmTryCompileExec231998991.dir\Debug\\" /Fd"C:/Build_Folder/Urho3D-master/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec231998991.pdb" /Gd /TC /analyze- /errorReport:queue "C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\testCCompiler.c"  /Zm1000 
    testCCompiler.c
    

  ManifestResourceCompile:

    C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin\rc.exe /nologo /fo"cmTryCompileExec231998991.dir\Debug\cmTryCompileExec231998991.exe.embed.manifest.res" cmTryCompileExec231998991.dir\Debug\cmTryCompileExec231998991_manifest.rc 

  Link:

    C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\link.exe /ERRORREPORT:QUEUE /OUT:"C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\Debug\cmTryCompileExec231998991.exe" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /ManifestFile:"cmTryCompileExec231998991.dir\Debug\cmTryCompileExec231998991.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"C:/Build_Folder/Urho3D-master/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec231998991.pdb" /SUBSYSTEM:CONSOLE /STACK:"10000000" /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:"C:/Build_Folder/Urho3D-master/Build/CMakeFiles/CMakeTmp/Debug/cmTryCompileExec231998991.lib" /MACHINE:X86 cmTryCompileExec231998991.dir\Debug\cmTryCompileExec231998991.exe.embed.manifest.res
    cmTryCompileExec231998991.dir\Debug\testCCompiler.obj  /machine:X86 /debug 

  LINK : fatal error LNK1123: failure during conversion to COFF: file invalid
  or corrupt
  [C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\cmTryCompileExec231998991.vcxproj]


  Done Building Project
  "C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\cmTryCompileExec231998991.vcxproj"
  (default targets) -- FAILED.

  Build FAILED.
  
  "C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\cmTryCompileExec231998991.vcxproj"
  (default target) (1) -&gt;

  (Link target) -&gt; 

    LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt [C:\Build_Folder\Urho3D-master\Build\CMakeFiles\CMakeTmp\cmTryCompileExec231998991.vcxproj]

      0 Warning(s)
      1 Error(s)

  Time Elapsed 00:00:06.48

  CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
  CMakeLists.txt:24 (project)


Configuring incomplete, errors occurred!</code></pre>
<p>I feel the issue might be from the cmake build script  <img alt=":frowning:" class="emoji" src="../../../images2/2506cac83464f3f86e257fa414340d4c.png" title=":frowning:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I doubt that this issue is caused by the CMake build script itself, although I could be wrong.</p>
<p>I have quickly done a google search on the reported problem and immediately reveal the problem is not unique to our project. If you have to stay with an outdated VS 2010 then you probably should ensure your other components (e.g. .NET framework) in your host system stays slightly outdated as well so they are compatible with VS 2010. And also ensure that your PATH environment variable is correctly set so that CMake is able to invoke “cmd.exe”. These are the two reasons I find to be the most plausible for your problem. Google is your best friend.</p>
<p><a href="http://delta3d.org/forum/viewtopic.php?showtopic=22426">delta3d.org/forum/viewtopic.php?showtopic=22426</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rogerdv</div>
          <div class="post_content">
<p>Tried at home yesterday and it built the engine successfully (except for the samples, but thats not essential). Same setup: VC++/VC# 2010.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>