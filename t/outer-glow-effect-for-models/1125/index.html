<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Outer Glow effect for models</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Outer Glow effect for models</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">v0van1981</div>
          <div class="post_content">
<p>like selection in Diablo 3 and Dota 2</p>
<p>examples <a href="http://forum.unity3d.com/threads/highlighting-system-released.143043/" rel="nofollow noopener">forum.unity3d.com/threads/highli … ed.143043/</a><br/>
<a href="http://i40.tinypic.com/a0yxaa.png" rel="nofollow noopener">i40.tinypic.com/a0yxaa.png</a><br/>
<a href="http://hydra-media.cursecdn.com/dota2.gamepedia.com/thumb/2/25/Unit_highlighting.gif/180px-Unit_highlighting.gif?version=9f55206c423a76b18280e3d30b982593" rel="nofollow noopener">hydra-media.cursecdn.com/dota2.g … d30b982593</a><br/>
<a href="http://i.imgur.com/WVE3f.jpg" rel="nofollow noopener">i.imgur.com/WVE3f.jpg</a></p>
<p>algorithm from <a href="http://habrahabr.ru/post/157447/" rel="nofollow noopener">habrahabr.ru/post/157447/</a></p>
<ol>
<li>render model to texture <a href="http://imageshack.us/a/img834/2183/highlights.jpg" rel="nofollow noopener">imageshack.us/a/img834/2183/highlights.jpg</a>
</li>
<li>blur</li>
<li>blurred image minus original texrure</li>
<li>out result over scene</li>
</ol>
<p>i try realise it, but I do not know much engine and shader language</p>
<p>added:<br/>
also i find <a href="http://stackoverflow.com/questions/23260853/inner-and-outer-glow-implementation-using-opengl-es-3-0" rel="nofollow noopener">stackoverflow.com/questions/2326 … ngl-es-3-0</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/62_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">GoogleBot42</div>
          <div class="post_content">
<p>Here you go <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/>: <a data-bbcode="true" href="http://nervegass.blogspot.com/2014/12/urho-shaders-edge-detection.html" rel="nofollow noopener">http://nervegass.blogspot.com/2014/12/urho-shaders-edge-detection.html</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">v0van1981</div>
          <div class="post_content">
<p>Thank you</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p><a href="https://github.com/1vanK/Urho3DOutline">github.com/1vanK/Urho3DOutline</a></p>
<p><a data-bbcode="true" href="http://savepic.su/6098764.htm"><img alt="" height="" src="../../../images2/fa72de4a004a120e27ef857adf7524b1.jpg" width=""/></a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>Thanks for sharing 1vank <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> I’m looking for something like this as well.</p>
<p>Some questions:</p>
<ul>
<li>how do you make the outline more of a solid color, like in toon effect?</li>
<li>Can this be created with a pure material shader solution? I see you need to clone the object to produce the effect.</li>
</ul>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>[quote=“rasteron”]Thanks for sharing 1vank <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/> I’m looking for something like this as well.</p>
<p>One question though, how do you make the outline more of a solid color, like in toon effect?[/quote]</p>
<p>This is not feature, this is bug xD A lot of blur</p>
<pre><code class="lang-auto">    vec4 blurredMask = GaussianBlur(3, vec2(0.0, 1.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 0.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(0.0, 1.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 0.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);</code></pre>
<p>If you want to fully solid color change shader</p>
<pre><code class="lang-auto">void PS()
{
    vec3 rgb = texture2D(sDiffMap, vScreenPos).rgb;
    vec3 mask = texture2D(sNormalMap, vScreenPosInv).rgb;      

    vec4 blurredMask = GaussianBlur(3, vec2(0.0, 1.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 0.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(0.0, 1.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 0.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);
        
    if (mask.rgb == vec3(1.0, 1.0, 1.0))
        gl_FragColor = vec4(rgb, 1.0);
    else if (GetIntensity(blurredMask.rgb) &gt; 0.01)
        gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
    else
        gl_FragColor = vec4(rgb, 1.0);
}</code></pre>
<p><a data-bbcode="true" href="http://savepic.su/6104899.htm"><img alt="" height="" src="../../../images2/a47c01d81aa016504cdb2b4415c52099.jpg" width=""/></a></p>
<p>Edit:The object is cloned to another scene to receive his mask may be exist a different method</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2367_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jmiller</div>
          <div class="post_content">
<p>Looks nice! Thanks for sharing.</p>
<p>Here’s yet another approach using a stencil buffer, which may be too specific to their SDK but maybe another thing to search on.<br/>
<a href="https://developer.valvesoftware.com/wiki/L4D_Glow_Effect">developer.valvesoftware.com/wik … low_Effect</a></p>
<p><img alt="" height="446" src="../../../images2/852094b50661009b4f64e34fe48af506.jpg" width="373"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>Thanks 1vanK, it works great  <img alt=":smiley:" class="emoji" src="../../../images2/94dd27e9c6c243335d29229e02e34e9d.png" title=":smiley:"/></p>
<p>One more small issue that I seem to notice is when you view the effect away, it looks uneven and weird.</p>
<p><img alt="" height="358" src="../../../images2/07c6ce1dbe0aef8e3992c418e7cac57d.png" width="538"/></p>
<p>still a great share, appreciate this.</p>
<p><span class="bbcode-b"><span class="mention">@Carnalis</span></span></p>
<p>Yes that effect on those valve games seems really nice!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>[quote=“rasteron”]Thanks 1vanK, it works great  <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
<p>One more small issue that I seem to notice is when you view the effect away, it looks uneven and weird.<br/>
[/quote]</p>
<p>This question of tuning. Perhaps even need to use another method of blur. Try</p>
<pre><code class="lang-auto">void PS()
{
    vec3 rgb = texture2D(sDiffMap, vScreenPos).rgb;
    vec3 mask = texture2D(sNormalMap, vScreenPosInv).rgb;      

    vec4 blurredMask = GaussianBlur(3, vec2(0.0, 1.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 0.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 1.0), vec2(0.008, 0.008), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 0.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(0.0, 1.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(1.0, 1.0), vec2(0.004, 0.004), 2.0, sNormalMap, vScreenPosInv);
            
    if (mask.rgb == vec3(1.0, 1.0, 1.0))
        gl_FragColor = vec4(rgb, 1.0);
    else if (GetIntensity(blurredMask.rgb) &gt; 0.0)
        gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
    else
        gl_FragColor = vec4(rgb, 1.0);
}</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>…I’m still getting a deformed outline when viewed from a distance but it looks much better than the first version. Can you make the outline stay the same thickness or at least proportioned?</p>
<p><img alt="" height="485" src="../../../images2/d2cf16394216cfb1287624c671ee00f2.jpg" width="624"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>Btw, I tried converting this to Angelscript and it does not seem to have an effect. Let me know what I am missing here:</p>
<pre><code class="lang-auto">#include "Scripts/Utilities/Sample.as"

RenderSurface@ surface;
Scene@ outlineScene_;
Node@ outlineCameraNode_;
Node@ outlineNode;
Viewport@ outlineViewport;
Texture2D@ renderTexture;

void Start() {
  // Execute the common startup for samples
  SampleStart();
  // Create the scene content
  CreateScene();
  // Create the UI content
  CreateUI();
  // Setup the viewport for displaying the scene
  SetupViewport();
  // Hook up to the frame update and render post-update events
  SubscribeToEvents();
}

void CreateScene() {

  scene_ = Scene();
  // Create octree, use default volume (-1000, -1000, -1000) to (1000, 1000, 1000)
  // Also create a DebugRenderer component so that we can draw debug geometry
  scene_.CreateComponent("Octree");
  scene_.CreateComponent("DebugRenderer");
  // Create scene node &amp; StaticModel component for showing a static plane
  Node@ planeNode = scene_.CreateChild("Plane");
  planeNode.scale = Vector3(100.0f, 1.0f, 100.0f);
  StaticModel@ planeObject = planeNode.CreateComponent("StaticModel");
  planeObject.model = cache.GetResource("Model", "Models/Plane.mdl");
  planeObject.material = cache.GetResource("Material", "Materials/StoneTiled.xml");
  // Create a Zone component for ambient lighting &amp; fog control
  Node@ zoneNode = scene_.CreateChild("Zone");
  Zone@ zone = zoneNode.CreateComponent("Zone");
  zone.boundingBox = BoundingBox(-1000.0f, 1000.0f);
  zone.ambientColor = Color(0.4f, 0.5f, 0.8f);
  zone.fogColor = Color(0.4f, 0.5f, 0.8f);
  zone.fogStart = 100.0f;
  zone.fogEnd = 300.0f;
  // Create a directional light to the world. Enable cascaded shadows on it
  Node@ lightNode = scene_.CreateChild("DirectionalLight");
  lightNode.direction = Vector3(0.6f, -1.0f, 0.8f);
  Light@ light = lightNode.CreateComponent("Light");
  light.lightType = LIGHT_DIRECTIONAL;
  light.color = Color(0.6f, 0.5f, 0.2f);
  light.castShadows = true;
  light.shadowBias = BiasParameters(0.00025f, 0.5f);
  // Set cascade splits at 10, 50 and 200 world units, fade shadows out at 80% of maximum shadow distance
  light.shadowCascade = CascadeParameters(10.0f, 50.0f, 200.0f, 0.0f, 0.8f);
  Node@ ouNode = scene_.CreateChild("Mushroom");
  ouNode.position = Vector3(0.0f, 0.0f, 20.0f);
  ouNode.SetScale(1.5f + Random(2.0f));
  ouNode.rotation = Quaternion(0.0f, 360.0f, 0.0f);
  StaticModel@ ouObject = ouNode.CreateComponent("StaticModel");
  ouObject.model = cache.GetResource("Model", "Models/Mushroom.mdl");
  ouObject.material = cache.GetResource("Material", "Materials/Mushroom.xml");
  // Create the camera. Limit far clip distance to match the fog
  cameraNode = scene_.CreateChild("Camera");
  Camera@ camera = cameraNode.CreateComponent("Camera");
  cameraNode.position = Vector3(0.0f, 5.0f, 0.0f);
  
  outlineScene_ = Scene();
  outlineScene_.CreateComponent("Octree");
  
  outlineCameraNode_ = cameraNode.Clone();
  outlineCameraNode_.parent = outlineScene_;
}

void CreateUI() {
  // Create a Cursor UI element because we want to be able to hide and show it at will. When hidden, the mouse cursor will
  // control the camera, and when visible, it will point the raycast target
  XMLFile@ style = cache.GetResource("XMLFile", "UI/DefaultStyle.xml");
  Cursor@ cursor = Cursor();
  cursor.SetStyleAuto(style);
  ui.cursor = cursor;
  // Set starting position of the cursor at the rendering window center
}

void SetupViewport() {
  // Set up a viewport to the Renderer subsystem so that the 3D scene can be seen
  Viewport@ viewport = Viewport(scene_, cameraNode.GetComponent("Camera"));
  
  renderer.viewports[0] = viewport;
  RenderPath@ effectRenderPath = renderer.viewports[0].renderPath.Clone();
  effectRenderPath.Append(cache.GetResource("XMLFile", "PostProcess/Outline.xml"));
  effectRenderPath.Append(cache.GetResource("XMLFile", "PostProcess/FXAA3.xml"));
  renderer.viewports[0].renderPath = effectRenderPath;
  Texture2D@ renderTexture = Texture2D();
  renderTexture.SetSize(graphics.width, graphics.height, GetRGBFormat(), TEXTURE_RENDERTARGET);
  renderTexture.filterMode = FILTER_NEAREST;
  renderTexture.name = "OutlineMask";
  cache.AddManualResource(renderTexture);
  RenderSurface@ surface = renderTexture.renderSurface;
  surface.updateMode = SURFACE_UPDATEALWAYS;
  outlineViewport = Viewport(outlineScene_, outlineCameraNode_.GetComponent("Camera"));
  surface.viewports[0] = outlineViewport;
}

void SubscribeToEvents() {
  // Subscribe HandleUpdate() function for processing update events
  SubscribeToEvent("Update", "HandleUpdate");
  // Subscribe HandlePostRenderUpdate() function for processing the post-render update event, during which we request
  // debug geometry
  SubscribeToEvent("PostRenderUpdate", "HandlePostRenderUpdate");
}

void MoveCamera(float timeStep) {
  // Right mouse button controls mouse cursor visibility: hide when pressed
  ui.cursor.visible = !input.mouseButtonDown[MOUSEB_RIGHT];
  // Do not move if the UI has a focused element (the console)
  if (ui.focusElement!is null) return;
  // Movement speed as world units per second
  const float MOVE_SPEED = 20.0f;
  // Mouse sensitivity as degrees per pixel
  const float MOUSE_SENSITIVITY = 0.1f;
  // Use this frame's mouse motion to adjust camera node yaw and pitch. Clamp the pitch between -90 and 90 degrees
  // Only move the camera when the cursor is hidden
  if (!ui.cursor.visible) {
    IntVector2 mouseMove = input.mouseMove;
    yaw += MOUSE_SENSITIVITY * mouseMove.x;
    pitch += MOUSE_SENSITIVITY * mouseMove.y;
    pitch = Clamp(pitch, -90.0f, 90.0f);
    // Construct new orientation for the camera scene node from yaw and pitch. Roll is fixed to zero
    cameraNode.rotation = Quaternion(pitch, yaw, 0.0f);
  }
  // Read WASD keys and move the camera scene node to the corresponding direction if they are pressed
  if (input.keyDown['W']) cameraNode.Translate(Vector3(0.0f, 0.0f, 1.0f) * MOVE_SPEED * timeStep);
  if (input.keyDown['S']) cameraNode.Translate(Vector3(0.0f, 0.0f, -1.0f) * MOVE_SPEED * timeStep);
  if (input.keyDown['A']) cameraNode.Translate(Vector3(-1.0f, 0.0f, 0.0f) * MOVE_SPEED * timeStep);
  if (input.keyDown['D']) cameraNode.Translate(Vector3(1.0f, 0.0f, 0.0f) * MOVE_SPEED * timeStep);
  // Toggle debug geometry with space
  if (input.keyPress[KEY_SPACE]) drawDebug = !drawDebug;
}

void HandleUpdate(StringHash eventType, VariantMap &amp; eventData) {
  // Take the frame time step, which is stored as a float
  float timeStep = eventData["TimeStep"].GetFloat();
  // Move the camera, scale movement with time step
  MoveCamera(timeStep);
  outlineCameraNode_.position = cameraNode.position;
  outlineCameraNode_.rotation = cameraNode.rotation;
  
  if (outlineNode is null) {} else {
    outlineNode.Remove();
  }
  
  outlineNode = scene_.GetChild("Mushroom").Clone();
  StaticModel@ stModel = outlineNode.GetComponent("StaticModel");
  stModel.material = cache.GetResource("Material", "Materials/White.xml");
  outlineNode.parent = outlineScene_;
}

void HandlePostRenderUpdate(StringHash eventType, VariantMap &amp; eventData) {
  // If draw debug mode is enabled, draw viewport debug geometry. Disable depth test so that we can see the effect of occlusion
  if (drawDebug) renderer.DrawDebugGeometry(false);
}

String patchInstructions = "";</code></pre>
<p>No console errors. I just modified some demo scripts and adapt your code.</p>
<p>Thanks again.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>[quote=“rasteron”]Btw, I tried converting this to Angelscript and it does not seem to have an effect. Let me know what I am missing here:</p>
<p>No console errors. I just modified some demo scripts and adapt your code.</p>
<p>Thanks again.[/quote]</p>
<p>I think you forgot to specify the folder with resources</p>
<p><code>start "" Urho3DPlayer_d.exe Scripts/Outline.as -p "Data;CoreData;MyData" -w -x 800 -y 600
</code></p>
<p>It works.</p>
<p>Edit:<br/>
Also it implemented only OpengGL shader. May be your Player using DirectX?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/119_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">codingmonkey</div>
          <div class="post_content">
<p><span class="bbcode-b">1vanK</span>, nice effect!)</p>
<p>I think for avoid this deformations on far distances need to turn-off blur. Create additional uniform for material maxBlurDistance and then compare distance between (in VS) vertex.pos and camPosVS if this distance &gt; uniform value(maxBlurDistance) do not use bluring and if it less use blur.</p>
<p>also I think in some way it may rendered to internal RT (in RenderPath) and additional pass in material.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>[quote=“1vanK”]<br/>
I think you forgot to specify the folder with resources</p>
<p><code>start "" Urho3DPlayer_d.exe Scripts/Outline.as -p "Data;CoreData;MyData" -w -x 800 -y 600
</code></p>
<p>It works.</p>
<p>Edit:<br/>
Also it implemented only OpengGL shader. May be your Player using DirectX?[/quote]</p>
<p>Yes, that’s the problem. I’m now using OpenGL and copied all the files to their designated folders instead. I even tried with the same setup you got above.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Good settings:</p>
<pre><code class="lang-auto">void PS()
{
    vec3 rgb = texture2D(sDiffMap, vScreenPos).rgb;
    vec3 mask = texture2D(sNormalMap, vScreenPosInv).rgb;     

    vec4 blurredMask = GaussianBlur(3, vec2(0.3, 0.0), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(0.0, 0.2), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(0.3, 0.2), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
    blurredMask = blurredMask + GaussianBlur(3, vec2(0.3, -0.2), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
           
    if (mask.rgb == vec3(1.0, 1.0, 1.0))
        gl_FragColor = vec4(rgb, 1.0);
    else if (GetIntensity(blurredMask.rgb) &gt; 0.0)
        gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
    else
        gl_FragColor = vec4(rgb, 1.0);
}</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>[quote=“1vanK”]Good settings:</p>
<p>[code]<br/>
void PS()<br/>
{<br/>
vec3 rgb = texture2D(sDiffMap, vScreenPos).rgb;<br/>
vec3 mask = texture2D(sNormalMap, vScreenPosInv).rgb;</p>
<pre><code>vec4 blurredMask = GaussianBlur(3, vec2(0.3, 0.0), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
blurredMask = blurredMask + GaussianBlur(3, vec2(0.0, 0.2), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
blurredMask = blurredMask + GaussianBlur(3, vec2(0.3, 0.2), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
blurredMask = blurredMask + GaussianBlur(3, vec2(0.3, -0.2), vec2(0.01, 0.01), 2.0, sNormalMap, vScreenPosInv);
       
if (mask.rgb == vec3(1.0, 1.0, 1.0))
    gl_FragColor = vec4(rgb, 1.0);
else if (GetIntensity(blurredMask.rgb) &gt; 0.0)
    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
else
    gl_FragColor = vec4(rgb, 1.0);
</code></pre>
<p>}<br/>
[/code][/quote]</p>
<p>Now that’s perfect! <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> Though I’m still figuring out what is wrong with my angelscript version…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>[quote=“rasteron”]<br/>
Now that’s perfect! <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> Though I’m still figuring out what is wrong with my angelscript version…[/quote]</p>
<p><a href="https://drive.google.com/open?id=0B_XuF2wRVpw4bERnSVZrUXV5Vk0">drive.google.com/open?id=0B_XuF … VZrUXV5Vk0</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>[quote=“1vanK”][quote=“rasteron”]<br/>
Now that’s perfect! <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> Though I’m still figuring out what is wrong with my angelscript version…[/quote]</p>
<p><a href="https://drive.google.com/open?id=0B_XuF2wRVpw4bERnSVZrUXV5Vk0" rel="nofollow noopener">drive.google.com/open?id=0B_XuF … VZrUXV5Vk0</a>[/quote]</p>
<p>Aha ok… I double checked it with my player built and it looks like mine is outdated. Thanks for confirming this as well! <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">tianlv777</div>
          <div class="post_content">
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="QQ图片20220330125711"><img alt="QQ图片20220330125711" data-base62-sha1="vykxoAFIJMK1J4NVuYXEXbJJqBW"  height="310" src="../../../images2/c909a8d456d992eaecd15da60ef65498.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">QQ图片20220330125711</span><span class="informations">1600×720 171 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">tianlv777</div>
          <div class="post_content">
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="QQ图片20220330130129"><img alt="QQ图片20220330130129" data-base62-sha1="pdaCTlrUJ1QVXynID3sl1M8ukLV"  height="493" src="../../../images2/83204b5318a2c1760532d9f7f7a72c82.jpeg" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">QQ图片20220330130129</span><span class="informations">884×632 66.1 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
Now I want to achieve this. What should I do?<br/>
I also want the front border of the box to be displayed, indicating that I have selected this character.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>I think you’d need to either adjust your model to have holes at the edge of the box that would then be filled with the glow, or look at something like this.</p>
<aside class="quote" data-post="3" data-topic="1517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/5cd5016ca0f9e749a2a834ee22877f36.png" width="20"/>
<a href="https://discourse.urho3d.io/t/toon-and-line-shader/1517/3">Toon and line shader</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    as well, the effect you are refering from pokemon is specifically an edge detection shader. Putting a black pixel where it finds a huge color difference in the normal gradient. Which is a post process as bananaft mentioned. 
I’ve made a very basic edge detection shader “tutorial” (that I’m not even sure works anymore, I need to actually check soon) , that I have plugged a few times on this forum, here: 
<a href="http://nervegass.blogspot.com/2014/12/urho-shaders-edge-detection.html">nervegass.blogspot.com/2014/12/u … ction.html</a>
</blockquote>
</aside>

          </div>
        </div>
      </div>


    </div>
  </body>
</html>