<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Script binding automation</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Script binding automation</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Since this switch (and others) would be such a hassle in the current AS situation, it seems to me like getting its autobinding up and running should be our main priority.</p>
<hr/>
<p>Urho3D script binding automation projects:</p>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/298b47bcb25b5f93b2f65fdd18e4cc1a.ico" width="32"/>
<a href="https://github.com/SirNate0/Pyrho3D" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="420" src="https://avatars1.githubusercontent.com/u/10181610?s=400&amp;v=4" width="420"/>
<h3><a href="https://github.com/SirNate0/Pyrho3D" target="_blank">SirNate0/PYrho3D</a></h3>
<p>Python bindings for the Urho3D game engine. Contribute to SirNate0/PYrho3D development by creating an account on GitHub.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Not exits any magical automatcs bindings. Just look it <a href="https://github.com/***/***/tree/master/Source/Urho3D/CSharp/Swig">https://github.com/***/***/tree/master/Source/Urho3D/CSharp/Swig</a> With a significant change of engine, this will also have to be changed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="1" data-topic="5921" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d8b355ba34b4e347e81eaaa2cb3b7b0.png" width="20"/> Modanung:</div>
<blockquote>
<p>it seems to me like getting its autobinding up and running should be our main priority</p>
</blockquote>
</aside>
<p>So far I didn’t see anybody willing to bring automatic AS bindings in Urho. I saw one attempt, but it didn’t look finished.</p>
<p>There’s no point to call task “main priority” when said priority doesn’t affect the outcome in slightest /sad smile/</p>
<aside class="quote no-group quote-modified" data-post="83" data-topic="5872" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/><a href="https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/83">Migration from custom container library to augmented EASTL</a>
</div>
<blockquote>
<p>With a significant change of engine, this will also have to be changed.</p>
</blockquote>
</aside>
<p>How often do you change classes listed in the folder you linked?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-post="3" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>How often do you change classes listed in the folder you linked?</p>
</blockquote>
</aside>
<p>I don’t understand why this is a question. I don’t often change engine classes.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="3" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>There’s no point to call task “main priority” when said priority doesn’t affect the outcome in slightest</p>
</blockquote>
</aside>
<p>Would you agree it is better to remove a boulder from the road than to headbutt it?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="85" data-topic="5872" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/><a href="https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/85">Migration from custom container library to augmented EASTL</a>
</div>
<blockquote>
<p>I don’t understand why this is a question. I don’t often change engine classes.</p>
</blockquote>
</aside>
<p>Because the folder you mentioned has manual bindings for</p>
<ol>
<li>Object</li>
<li>RefCounted</li>
<li>Context</li>
<li>StringHash</li>
<li>Math</li>
</ol>
<p>And these are not complete bindings. Just a fraction of their functionality requires manual bindings.<br/>
What kind of changes in the engine will require changes in these files?</p>
<aside class="quote no-group" data-post="2" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>With a significant change of engine, this will also have to be changed.</p>
</blockquote>
</aside>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-post="6" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<ul>
<li>Object</li>
<li>RefCounted</li>
<li>Context</li>
<li>StringHash</li>
<li>Math</li>
</ul>
</blockquote>
</aside>
<p>Firstly, there are much more files than you listed. Secondly, where is the contradictory in what I said? Imagine you have to change containers in ***. Do these automatic bindings help you in some way and you don’t have to redo all this?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<aside class="quote no-group" data-post="7" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Do these automatic bindings help you in some way and you don’t have to redo all this?</p>
</blockquote>
</aside>
<p>Not in case lf AS. If SWIG was to be used for lua then it is possible to make use of lua bindings for stdlib, due to identical interfaces. I did just that. Bindings started before EASTL port and making SWIG bindings for custom urho containers was tedious work.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>That is, the bindings were made earlier by someone else? Great, we already have AS bindings made by someone else. You only need to change the bindings to the container when changing containers and so on.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="7" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Firstly, there are much more files than you listed</p>
</blockquote>
</aside>
<p>I see a lot of <em>annotations</em> in these files. When you just tell SWIG what to bind and what not to bind.<br/>
Annotations are not the bindings, and they are much simpler to edit.<br/>
I see a lot of autogenerated files there.<br/>
I <em>don’t</em> see a lot of manual bindings there. Unlike <code>Urho3D/Script</code> that has thousands of LOCs.</p>
<aside class="quote no-group" data-post="7" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Imagine you have to change containers in ***</p>
</blockquote>
</aside>
<p>How often do you change containers and how often do you change <em>not</em> containers?</p>
<p>The point is not to get rid of manual bindings at all.<br/>
The point is to remove them from the hot path.</p>
<p>PS. Anyway, autobindings for AS do not exist in the nature, so this is moot point to talk about how they can help us</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-post="10" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>The point is not to get rid of manual bindings at all.<br/>
The point is to remove them from the hot path.</p>
</blockquote>
</aside>
<p>Thus, you say that you do not have to change these files when changing the engine?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="11" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Thus, you say that you do not have to change these files when changing the engine?</p>
</blockquote>
</aside>
<p>Yes, I do not. Because engine has hundreds of classes, and manual <em>bindings</em> are written only for maybe 0.1% of functionality. <span class="mention">@rku</span> correct me if I’m wrong</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<aside class="quote no-group" data-post="9" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>You only need to change the bindings to the container when changing containers and so on.</p>
</blockquote>
</aside>
<p>Yeah well… *** happened so i do not have to deal with bindings. So there is a conflict here.</p>
<aside class="quote no-group quote-modified" data-post="94" data-topic="5872" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/><a href="https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/94">Migration from custom container library to augmented EASTL</a>
</div>
<blockquote>
<p>I <em>don’t</em> see a lot of manual bindings there. Unlike <code>Urho3D/Script</code> that has thousands of LOCs.</p>
</blockquote>
</aside>
<p>Correct. Most manual part of SWIG bindings is writing rules of what binding code SWIG should generate for certain types in certain cases. <a href="https://github.com/***/***/blob/master/Source/Urho3D/CSharp/Swig/StringHash.i" rel="nofollow noopener">StringHash.i</a> is a good example, being compact and not trivial. See <code>StringHash</code> is implemented in C# directly and that SWIG interface tells SWIG how to convert between C++ and C# types. Once written it becomes extremely low maintenance thing.</p>
<p>At the moment our highest maintenance cost comes from template classes. If we add some template type to API, that SWIG is not aware of - we must add one line to the .i file to generate wrapper for that particular template instantiation.</p>
<p>Some bells and whistles (like turning getters and setters into properties) require more effort and maintenance. They are also optional.</p>
<aside class="quote no-group quote-modified" data-post="96" data-topic="5872" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/><a href="https://discourse.urho3d.io/t/migration-from-custom-container-library-to-augmented-eastl/5872/96">Migration from custom container library to augmented EASTL</a>
</div>
<blockquote>
<p>Yes, I do not. Because engine has hundreds of classes, and manual <em>bindings</em> are written only for maybe 0.1% of functionality. <span class="mention">@rku</span> correct me if I’m wrong</p>
</blockquote>
</aside>
<p>True. Manual bindings are a special case. These are our manual bindings: <a href="https://github.com/***/***/tree/master/Source/Urho3D/CSharp/Native" rel="nofollow noopener">https://github.com/***/***/tree/master/Source/Urho3D/CSharp/Native</a>. As you can see we have very little of them. Most of which are dealing with quite specialized features (factories, events, callbacks). SWIG is not perfect, but it gets us 95% of the way.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>So far the biggest flaw of SWIG comparing it to our current AS bindings is that we have no facility to easily wrap user classes when *** is linked as 3rdparty.</p>
<p><span class="mention">@rku</span> You have any idea how can it be supported?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="10" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>Anyway, autobindings for AS do not exist in the nature, so this is moot point to talk about how they can help us</p>
</blockquote>
</aside>
<p>To the contrary - if they indeed do not exist - creating them would <em>add</em> them to nature, making them available to the whole world. It would amount to more than just contributing (greatly) to Urho.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="14" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>So far the biggest flaw of SWIG comparing it to our current AS bindings is that we have no facility to easily wrap user classes when *** is linked as 3rdparty.</p>
<p><span class="mention">@rku</span> You have any idea how can it be supported?</p>
</blockquote>
</aside>
<p>This is actually a strong point of SWIG. User code may import our SWIG modules and magically use of all the rules to bind said types in their own API. User does not need to care how to bind <code>ea::string</code>, <code>VariantMap</code> or <code>Material</code>. All user would have to do is include their headers in .i file and mark class as inheriting from <code>RefCounted</code> (another weak point, still beats writing manual bindings).</p>
<p>Our build system is not rigged to do all that, but it would not be that much work to make it happen. Day’s work maybe.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-post="13" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p><a href="https://github.com/***/***/blob/master/Source/Urho3D/CSharp/Swig/StringHash.i">StringHash.i</a> is a good example, being compact and not trivial. See <code>StringHash</code> is implemented in C# directly</p>
</blockquote>
</aside>
<p>Well… <a href="https://github.com/Dviglo/Dviglo/blob/CSharp/Source/Urho3D/CSharp/Managed/Math/StringHash.cs">https://github.com/Dviglo/Dviglo/blob/CSharp/Source/Urho3D/CSharp/Managed/Math/StringHash.cs</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p><span class="mention">@1vanK</span> not sure what you are trying to say <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>My manual version seems more understandable to me than your manually written module</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>This is actually interesting question how those are different, in the specific case of StringHash. <span class="mention">@rku</span> can you explain? I’m curious too.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>You are right. SWIG bindings are <strong>hell</strong>. Also what you see in *** has 2x complexity because we need <code>cs-&gt;c-&gt;cpp</code> and <code>cpp-&gt;c-&gt;cs</code> conversions. In case of lua it would be somewhat simpler, because we do not need to generate any wrapper <code>.lua</code> files. Nevertheless SWIG bindings will always be more complicated to write. I actually started writing my own bindings generator because i thought SWIG was too complex and i did not want to put in time to learn. After 3 months of hard work i realized i am re-implementing SWIG. Then i deleted my custom bindings generator and switched to SWIG… Because bindings are hard either way.</p>
<aside class="quote no-group" data-full="true" data-post="20" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>This is actually interesting question how those are different, in the specific case of StringHash. <span class="mention">@rku</span> can you explain? I’m curious too.</p>
</blockquote>
</aside>
<p>SWIG-generated class bindings are basically a <code>class</code> instance + <code>IntPtr</code> holding native instance pointer. As you can see it gets stupid real fast with types like <code>StringHash</code>, as it essentially is a value type in C++, 4 bytes in size. If SWIG wrapped it without manual intervention we would end up with 2 heap objects whenever <code>StringHash</code> is passed to C#: C++ <code>StringHash</code> would have to be copied to heap so we can have it’s pointer and then each <code>class</code> instance in C# is a heap object.</p>
<p>What i did instead is pass <code>StringHash</code> between boundaries as <code>unsigned</code> and implement C# <code>struct StringHash</code> holding <code>uint</code>. <code>struct</code> is a value type in C# so this becomes super-efficient.</p>
<p>See, <code>StringHash</code> is a very special case needing special care. For things like <code>Material</code> we are passing object pointers around already so letting SWIG to wrap them as it does by default is fine (terms and conditions apply!)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Doing a quick search I ran into <a href="https://accu.org/index.php/journals/1608">this outdated article</a> which states the following:</p>
<blockquote>
<p>Until C++0x becomes widely implemented, it will be necessary to write specializations like this out long-hand, i.e. a specialization for functions with no arguments, 1 argument, 2 arguments, etc. This works, but is extremely tedious - variadic templates will ultimately make this a lot easier.</p>
</blockquote>
<p>Does anyone have experience with these <em>variadic templates</em>?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="22" data-topic="5921" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d8b355ba34b4e347e81eaaa2cb3b7b0.png" width="20"/> Modanung:</div>
<blockquote>
<p>Does anyone have experience with these <em>variadic templates</em> ?</p>
</blockquote>
</aside>
<p>Well, I use them.</p>
<p>And automatic AS bindings can be implemented, too.<br/>
In the similar fashion modern realtime bindings (w/o code generation) are done.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>They would not be fully automatic though. It would be required to at least write simple manual binding that bind classes and methods (like pybind11) or write a simple API scanner that generates these bindings. Would work for lua/AS good enough. Not for languages like C# that also need <code>.cs</code> files generated.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<aside class="quote no-group" data-post="23" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>In the similar fashion modern realtime bindings (w/o code generation) are done.</p>
</blockquote>
</aside>
<p>Could you explain what you mean by this in more detail, it sounds interesting.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>You create generic template functions like RegisterFunction that use variadics and c++ type traits to extract all information about function signature, and you build AS binding string basing on this information, like in the article above.<br/>
Just look at modern Lua bindings, they do almost the same except they need to do all this in real-time.<br/>
Theory is simple. Practice requires to properly handle every single aspect of c++ signatures and class traits. It is huge but totally doable project.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>Like this sort of project for Lua <a href="https://github.com/ThePhD/sol2/blob/develop/README.md">https://github.com/ThePhD/sol2/blob/develop/README.md</a> or pybind11 for Python, right? Or something more advanced than those?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Right. No rocket science, except that you need to know C++ template magic really well. Which may be like rocket science for some.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="24" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p>They would not be fully automatic though. […] or write a simple API scanner that generates these bindings. Would work for lua/AS good enough.</p>
</blockquote>
</aside>
<p>That sound like fully automatic to me, once in place of course.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="29" data-topic="5921" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d8b355ba34b4e347e81eaaa2cb3b7b0.png" width="20"/> Modanung:</div>
<blockquote>
<p>That sound like fully automatic to me, once in place of course.</p>
</blockquote>
</aside>
<p>It is still better than current situation by the order of magnitude, but you will have to bind manually every name you need in the script.<br/>
If you think it’s easy or not too much, just look at the size of our current AS bindings. Sure, they will be safer if automated, but they will not get any bit smaller.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="30" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>…but you will have to bind manually every name you need in the script.</p>
</blockquote>
</aside>
<p>Doesn’t the aforementioned API scanner take care of this?</p>
<aside class="quote no-group" data-post="30" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>Sure, they will be safer if automated, but they will not get any bit smaller.</p>
</blockquote>
</aside>
<p>Maybe a level of automation would be possible where the binding process could be part of compiling?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="31" data-topic="5921" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d8b355ba34b4e347e81eaaa2cb3b7b0.png" width="20"/> Modanung:</div>
<blockquote>
<p>Doesn’t the aforementioned API scanner take care of this?</p>
</blockquote>
</aside>
<p>You mean automatically process C++ headers?<br/>
I’m not aware of any lightweight tools capable of doing it. SWIG is the closest thing we have, but I have no idea how hard is to reuse its functionality.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>It’s hard and SWIG code is terrible. This would introduce dependency on externally installed libclang. There are bins for all platforms so it’s just somewhat nconvenient on windows.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Can you remind me how SWIG works in ***? Does it use binaries for libclang or what?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>SWIG implements it’s own c++ parser.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Do you look at <a class="inline-onebox" href="https://discourse.urho3d.io/t/asbindgen-c-to-angelscript-bindings-generator/3270">ASBindGen (C++ To AngelScript Bindings Generator)</a> ?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">brokensoul</div>
          <div class="post_content">
<p>Hello, i’m new in this forum, although i have been using Urho for the past 6 months.</p>
<p>I don’t wanna be a jerk here, but is AngelScript really worth it ? I mean, it seems a lot of work, just to keep using a language that is not really widely used outside of Urho.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JimMarlowe</div>
          <div class="post_content">
<p>I’ve used ASBindGen, and while it works ok if you want to bind AS user code, it was not appropriate for adding Urho Core classes. It uses comments in the code to know what to make bindings for, which pretty much polluted my source code. The code gen structure it produces is technically correct, but it does not play well with existing Urho AS integration code, nor was it designed to. I ended up using the generated code, but had to repackage it into a form like the existing AS integration. Now, I just maintain it by hand, once you learn it, it’s far less work.<br/>
And don’t get me started on the Lua binding with the custom constructors.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="37" data-topic="5921" data-username="brokensoul">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/388abede156fe46a63d00317f08937b5.png" width="20"/> brokensoul:</div>
<blockquote>
<p>…is AngelScript really worth it ?</p>
</blockquote>
</aside>
<p>Let’s find out:</p><aside class="quote quote-modified" data-post="1" data-topic="5925">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/1452724d26bb99fb2e8f87d8c705c1c9.png" width="20"/>
<a href="https://discourse.urho3d.io/t/polling-language-popularity/5925">Polling language popularity</a> <a class="badge-wrapper bullet" href="/c/discussions/7"><span class="badge-category-bg" style="background-color: #25AAE2;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Discussions about using Urho3D.">Discussions</span></a>
</div>
<blockquote>
    Do you primarily write Urho3D games and applications in C++ or a scripting language? 
<a href="/t/polling-language-popularity/5925/1">poll</a>
What is (or would be) your preferred scripting language? 
<a href="/t/polling-language-popularity/5925/1">poll</a>
</blockquote>
</aside>
<p><span class="mention">@brokensoul</span> Welcome to the forums, btw! <img alt=":confetti_ball:" class="emoji" src="../../../images2/493e34d79be55d27b0c2a9cf4449024c.png" title=":confetti_ball:"/> <img alt=":slightly_smiling_face:" class="emoji" src="../../../images2/87e0a7daec339818bcddbf25ee57347b.png" title=":slightly_smiling_face:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="37" data-topic="5921" data-username="brokensoul">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/388abede156fe46a63d00317f08937b5.png" width="20"/> brokensoul:</div>
<blockquote>
<p>I mean, it seems a lot of work, just to keep using a language that is not really widely used outside of Urho.</p>
</blockquote>
</aside>
<p>Before running into Urho3D I had never even heard of AngelScript but I like how it is similar to C++. If this is true for more people, Urho is increasing the popularity of AS and so might a good autobinder, even if created with primarily Urho3D in mind.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>I have the opposite - in one of my projects I needed a scripting language that was as close as possible to C++ and native calls to the x86 code. So I found AngelScript. And already working with him, I learned about Urho3D, in which he was used.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p><span class="mention">@1vanK</span> suggested the following on <a >GitHub</a>:</p>
<blockquote>
<p>Currently we use Doxygen for generation of docs. Doxygen fully parses C++ sources, so has full information about classes. Is it possible to use it information to generate bindings?</p>
<p><a href="http://www.doxygen.nl/manual/features.html">http://www.doxygen.nl/manual/features.html</a></p>
<blockquote>
<p>Generates structured XML output for parsed sources, which can be used by external tools.</p>
</blockquote>
</blockquote>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>I have never seen doxy output used for binding, so I just assume this idea unviable. Tell me if I’m wrong.<br/>
I’m not sure if doxy extracts enough information, if it’s stable enough to reliably parse c++ headers, and I don’t even mention that one will have to write actual binding code generator.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Doxygen extract all information (even comments) because use clang.</p>
<p>Set <code>GENERATE_XML           = YES</code> in file <code>Urho3D\Docs\Doxyfile.in</code> and build Urho3D with docs. Doxygen place all information about classes/structs/etc in separate files:</p>
<ul>
<li>Build\Docs\xml\struct_*</li>
<li>Build\Docs\xml\class_*</li>
<li>Build\Docs\xml\namespace_*<br/>
…</li>
</ul>
<p>Doxygen already split information to parts.</p>
<p>class_urho3_d_1_1_color.xml</p>
<pre><code class="lang-auto">...
&lt;memberdef kind="variable" id="class_urho3_d_1_1_color_1af0749ad190652fe9b992185b65beac81" prot="public" static="no" mutable="no"&gt;
        &lt;type&gt;float&lt;/type&gt;
        &lt;name&gt;r_&lt;/name&gt;
...
&lt;memberdef kind="function" id="class_urho3_d_1_1_color_1a06623b98b5524439f8a243d103b214dd" prot="public" static="no" const="yes" explicit="no" inline="no" virt="non-virtual"&gt;
        &lt;type&gt;unsigned&lt;/type&gt;
        &lt;name&gt;ToUInt&lt;/name&gt;
...

&lt;memberdef kind="function" id="class_urho3_d_1_1_color_1acb5866e1447fd157ebd5a8292e6a5b6c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual"&gt;
        &lt;type&gt;void&lt;/type&gt;
        &lt;name&gt;FromUInt&lt;/name&gt;
        &lt;param&gt;
          &lt;type&gt;unsigned&lt;/type&gt;
          &lt;declname&gt;color&lt;/declname&gt;
        &lt;/param&gt;
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Oh, I see, so it uses clang.<br/>
It solves both my questions but creates new one. Urho is built from source so it doesn’t have any external dependencies. We cannot build doxy from source, tho.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>There is no need to force users to generate bindings on their own, just like he does not need to generate documentation or AngelScriptAPI.h file on his own (but he can do it).</p>
<p>I mean bindings can be automatically generated like documentation and placed in the repository.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p><span class="mention">@1vanK</span> does it extract the default values for function parameters?</p>
<p>And I’m definitely in favor of it if it does, even if it’s something we have to run as a separate tool rather than something that the user builds and runs like tolua.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>I see one more issue here.<br/>
Doxy doesn’t have annotations required for bindings.<br/>
How to mark functions that shall be ignored during bindings?<br/>
How to override bindings for specific functions with manually written ones?<br/>
Shall we invent our own language of annotation to use doxy for bindings?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>I don’t remember whether the default values are used in bindings (bindings should not somehow change values), but</p>
<pre><code class="lang-auto">      &lt;memberdef kind="function" id="class_urho3_d_1_1_text_1a7f99f0265997743f8e91b0436c80bd73" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual"&gt;
        ...
        &lt;param&gt;
          &lt;type&gt;float&lt;/type&gt;
          &lt;declname&gt;size&lt;/declname&gt;
          &lt;defval&gt;DEFAULT_FONT_SIZE&lt;/defval&gt;
        &lt;/param&gt;

      &lt;memberdef kind="variable" id="_text_8h_1ae03d382e84a0a13b3dd8146e1dbc14a7" prot="public" static="yes" mutable="no"&gt;
        &lt;type&gt;const float&lt;/type&gt;
        &lt;name&gt;DEFAULT_FONT_SIZE&lt;/name&gt;
        &lt;initializer&gt;= 12&lt;/initializer&gt;
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>we can use comments before function to mark all we need</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>It would be basically re-inventing SWIG, just worse.<br/>
Because all internal binding details will be in our public headers and in our published documentation too.</p>
<p>I think you saw *** SWIG files and they are nasty.<br/>
Imagine all this mess in our main headers instead of separate folder.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>SWIG modules look awful because they contain a bunch of C # code, which should be placed in separate manually written files and already located in the output directory. The module should only contain a mark to ignore this class / function (because the binding is written manually and is already located where necessary).</p>
<p>Also, I don’t understand why property marks are needed, since properties can be automatically generated if a function name starts with “get” / “set”</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="52" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>which should be located in separate manually written files and already located in the output directory</p>
</blockquote>
</aside>
<p>You cannot do it if you don’t know where to put this code.<br/>
What if you need to add C#/Lua function <em>for each</em> class?<br/>
You cannot just make <code>for_each_RefCounted.cs</code> and write it there.<br/>
I’m not sure if generics can be used there, I’m not C# guy.</p>
<aside class="quote no-group" data-post="52" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Also, I don’t understand why property marks are needed, since properties can be automatically generated if a function name starts with “get” / “set”</p>
</blockquote>
</aside>
<p>Because it’s Urho-specific rule, SWIG doesn’t know anything about it.<br/>
So we have our own scripts to generate property annotations.<br/>
If you use doxy, you will have to do the same, maybe on the different level.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-post="53" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>You cannot do it if you don’t know where to put this code.</p>
</blockquote>
</aside>
<p>Use copy to target dir</p>
<blockquote>
<p>What if you need to add C#/Lua function <em>for each</em> class?</p>
</blockquote>
<p>Examples pls. Also I don’t see why manual written file cannot contain everything I need (or was added there by a generator: file may contain “// PLACEHOLDER FOR ADDITIONAL FUNCTIONS”)</p>
<blockquote>
<p>If you use doxy, you will have to do the same, maybe on the different level.</p>
</blockquote>
<p>Doxy just give xml files, generator still need to write</p>
<pre><code class="lang-auto">   string result = ""
   foreach xmlFile
      if xmlFIle is class
         foreach member
             result +=
     if xmlFIle is struct
         ...
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="54" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Examples pls</p>
</blockquote>
</aside>
<p>The very file you mentioned here:</p>
<blockquote>
<p>SWIG modules look awful because they contain a bunch of C # code</p>
</blockquote>
<p>How would you extract code in <code>RefCounted.i</code> into *.cs file?<br/>
I mean, maybe this is possible, I just have no idea how to do it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<blockquote>
<p>How would you extract code in <code>RefCounted.i</code> into *.cs file?</p>
</blockquote>
<p><a href="https://github.com/Dviglo/Dviglo/blob/CSharp/Source/Urho3D/CSharp/Managed/Container/RefCounted.cs">https://github.com/Dviglo/Dviglo/blob/CSharp/Source/Urho3D/CSharp/Managed/Container/RefCounted.cs</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="56" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p><a href="https://github.com/Dviglo/Dviglo/blob/CSharp/Source/Urho3D/CSharp/Managed/Container/RefCounted.cs" rel="nofollow noopener">https://github.com/Dviglo/Dviglo/blob/CSharp/Source/Urho3D/CSharp/Managed/Container/RefCounted.cs</a></p>
</blockquote>
</aside>
<p>It offers only a fraction of functionality of <code>RefCounted.i</code>. It’s not surprising for me that it’s simpler.</p>
<p>No instance cache. No utilities for <em>automatic</em> marshaling of raw and shared and weak pointers to <code>RefCounted</code> – your bindings are fully manual. No weak pointers. No derived classes support.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>I added functionality as needed when porting examples, I threw the project in half, because C# is not a scripting language, but an analogue of C ++ (only slower).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="58" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>I threw the project in half, because C# is not a scripting language, but an analogue of C ++ (only slower).</p>
</blockquote>
</aside>
<p>Yeah, I ignore C# for the same reason, I just don’t need it.</p>
<p>It doesn’t change the fact that it’s pointless to compare code complexity when feature set is different by the order of magnitude.</p>
<p>Since Lua has simpler requirements, it may be ok with simpler bindings.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>SWIG interface files are awful because they contain <em>templates</em> for type marshalling. We can not extract <code>RefCounted.i</code> to <code>RefCounted.cs</code> because that interface defines things that have to be added to <em>every</em> generated wrapper of subclass of <code>RefCounted</code>. Same is for type marshalling. You can not extract rules of how to marshal <code>SharedPtr&lt;T&gt;</code> into .cs/.cpp. You would still need a SWIG interface except then you would have another indirection to some hidden code in some .cpp file. And possibly pay a cost for function call while at that.</p>
<p>Also it is important that users can easily generate bindings themselves. Users will want to bind their own code and thus they must be able to. Suggestion to just generate bindings and include them in the repo sounds much like what UrhoSharp did and that is not a good solution.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Let’s be honest, this will not make it easier for users to create bindings. To create bindings, users will need to learn the new SWIG tool because it does not work in fully automatic mode.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Let’s be honest, better option does not exist.<br/>
You cannot have truly automatic bindings without annotations to handle exceptions.<br/>
User will either have to learn existing and popular 3rdPatry tool with documented annotation language, or our custom tool with our custom annotation language.</p>
<p>Amount of manual annotations in both cases will be about the same.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>I talked about this earlier, that there is no magic that creates automatic bindings.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="63" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>I talked about this earlier, that there is no magic that creates automatic bindings</p>
</blockquote>
</aside>
<p>Yeah, exactly. We will have to do <em>something</em> manually.<br/>
How does it make custom tool better than existing tool?<br/>
Effort is bigger by the order(s) of magnitude, but the outcome is lower.</p>
<aside class="quote no-group" data-post="60" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p>Suggestion to just generate bindings and include them in the repo sounds much like what UrhoSharp did and that is not a good solution</p>
</blockquote>
</aside>
<p>*** still does it in some cases, tho. List of RefCounted, renames, properties…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>My other question is, should the user, when creating semi-automatic bindings, understand what result should be generated? I guess so. In addition to this, he now needs to learn the strange syntax of SWIG modules.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="50" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>we can use comments before function to mark all we need</p>
</blockquote>
</aside>
<p>I found this</p>
<pre><code class="lang-auto">/// RGBA color.
/// @xmlonly IGNOE_IT @endxmlonly
class URHO3D_API Color
</code></pre>
<p>INGNORE_IT is written to xml, but no written to generated docs</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="65" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>My other question is, should the user, when creating semi-automatic bindings, understand what result should be generated? I guess so. In addition to this, he now needs to learn the strange syntax of SWIG modules.</p>
</blockquote>
</aside>
<p>What do you suggest?</p>
<p>There are only two fair options.<br/>
A) Bindings do not require manual update every time function signature or class interface is updated, exceptions are rare;<br/>
B) Bindings stay in separate repo and are maintained by dedicated person.</p>
<p>Any other option is basically freeloading.</p>
<aside class="quote no-group" data-post="65" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>In addition to this, he now needs to learn the strange syntax of SWIG modules.</p>
</blockquote>
</aside>
<p>Do you have an option where a person doesn’t need to learn strange syntax?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>I take time to experiments with doxygen</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>This reminds … when I was doing the realXtend Urho port (at work) we also used Doxygen-based bindings generation to replace Qt’s JavaScript engine with duktape.</p>
<p>This is the C++ code structure inspection from Doxygen xml, originally written by Jukka Jylänki (clb):</p>
<aside class="onebox githubblob">
<header class="source">
<a href="https://github.com/realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/CodeStructure.cs" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://github.com/realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/CodeStructure.cs" target="_blank">realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/CodeStructure.cs</a></h4>
<pre><code class="lang-cs">﻿using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.IO;
using System.Web;
using System.Text.RegularExpressions;

namespace BindingsGenerator
{
    public enum VisibilityLevel
    {
        Public,
        Protected,
        Private
    };

    public enum Virtualness
    {
</code></pre>

  This file has been truncated. <a href="https://github.com/realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/CodeStructure.cs" target="_blank">show original</a>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>And this is the generation of duktape bindings using the data generated above (ugly, but illustrates the idea):</p>
<aside class="onebox githubblob">
<header class="source">
<a href="https://github.com/realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/Program.cs" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://github.com/realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/Program.cs" target="_blank">realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/Program.cs</a></h4>
<pre><code class="lang-cs">﻿// For conditions of distribution and use, see copyright notice in LICENSE

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace BindingsGenerator
{
    struct Overload
    {
        public string functionName;
        public Symbol function;
        public List&lt;Parameter&gt; parameters;
        public bool hasDefaultParameters;
        public int numSignificantParameters;
        public bool property;
    }

</code></pre>

  This file has been truncated. <a href="https://github.com/realXtend/tundra-urho3d/blob/master/src/Plugins/JavaScript/BindingsGenerator/Program.cs" target="_blank">show original</a>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="69" data-topic="5921" data-username="cadaver">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b36d360b4fce73300b0e56f725288d21.png" width="20"/> cadaver:</div>
<blockquote>
<p>when I was doing the realXtend Urho port (at work) we also used Doxygen-based bindings generation</p>
</blockquote>
</aside>
<p>Do you remember how did it turn out?<br/>
How much manual tinkering was needed?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>There’s a caveat that we didn’t actually expose Urho, but rather the realXtend Tundra core classes, which in the port used Urho as an internal engine similarly like the original was using Ogre + Qt. But for what it was worth, the actual bindings worked well and similarly to the QScriptEngine-based bindings. There were some hacks and special cases built into the bindings generator .cs code itself.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>I like how the BindingsGenerator was written in C# :).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<p>To throw fuel on fire, shouldn’t AngelScript people write automated C++ binding tool mostly or entirely in AngelScript?  I suppose possibly AngelScript and C++ since that’s their compatibility culture.  Seems like they are the language community who should be trying to control their own fate, not Urho3D.  Like, bring it up in their <a href="https://www.gamedev.net/forums/forum/34-angelcode/" rel="nofollow noopener">official forum</a> and see what people have done and what they want.</p>
<p>I doubt it’s SWIG.  Aside from being ugly as far as I’ve heard in all times in history, today I learned it’s GPLed.  Didn’t realize.  I don’t personally like worrying about convolutions, even if for this case it may not matter.  I also hate contributing to GPLed projects, basically I will almost never do so.  Big problem for indie game devs is almost every game project is GPLed, so spending time on open source games is mostly career suicide.  Got off that boat after my Battle for Wesnoth debacle.  Freeciv before that.</p>
<p>If AngelScript community doesn’t want to control its own destiny, then I don’t think it should be holding Urho3D community back.  It’s tiny, micro dot of significance in broader world of language ecosystems.  It’s not the only scripting language selling itself as similar to C++ syntax and C++ binding friendly.  I don’t want to undermine extant Urho3D users, but they shouldn’t hold Urho3D progress hostage either.  C++ contributors shouldn’t have to worry about AS problems when submitting pull requests to Urho3D.</p>
<p>Lua ecosystem for dealing with C++ is excellent and advanced.  <a href="http://lua-users.org/wiki/BindingCodeToLua" rel="nofollow noopener">Many choices</a>.  Sol3 developer is very serious, has <a href="https://sol2.readthedocs.io/en/latest/features.html#the-feature-matrix" rel="nofollow noopener">feature matrix</a> of all major binding options, including the mediocre SWIG.  Has strong <a href="https://sol2.readthedocs.io/en/latest/benchmarks.html" rel="nofollow noopener">benchmarks</a>.  Another author did kaguya, also has <a href="http://satoren.github.io/lua_binding_benchmark/" rel="nofollow noopener">benchmarks</a> that are close, so also considered serious.  Good to have choice!  <strong>Lua attracts language binding experts.</strong>  That’s how “Lua jocks” roll, they can solve these kinds of problems.</p>
<p>Don’t think C++ pull requests should need to worry about Lua either.  But in Lua’s case, pretty good binding tools are right there.  Don’t know about 100% automated, but that goal seems realistic, given the expertise available.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<aside class="quote no-group" data-post="64" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>*** still does it in some cases, tho. List of RefCounted, renames, properties…</p>
</blockquote>
</aside>
<p>Well that is not the same. Thing is current *** SWIG bindings have all pieces needed for user to wrap their own new classes with little care. Yes user would have to annotate every class with that refcounted macro (these annotations we pre-generate for engine itself). Anything else is optional addons. Now including binding code in the repository is essentially saying “here you can use Lua/AS/whatever, but you cant mix your c++ code in” which is unacceptable to me.</p>
<aside class="quote no-group" data-post="65" data-topic="5921" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>In addition to this, he now needs to learn the strange syntax of SWIG modules.</p>
</blockquote>
</aside>
<p>Strange syntax is not <em>that</em> strange once you get grip of it. I admit it is not ideal. But if you decided to write your own bindings generator you would be solving same problem SWIG solved already. I am telling you this as a person who out of lazyness to to learn SWIG wrote his own bindings generator for C# and then switched to SWIG. *** git history has my old and terrible bindings generator. Anyway ya all can learn from my mistake or can repeat it. Your choice <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/></p>
<p>Edit: I misunderstood your question. User does not need to learn any strange syntax actually. All the hard work is done already. This is what user has to do:</p>
<pre><code class="lang-auto">%{
#include "my/class.h"
%}
%include "my/class.h"
URHO3D_REFCOUNTED(MyClass);
</code></pre>
<p>That’s it. It is possible to reuse SWIG interfaces in order to take advantage of type marshalling we already implemented. It would be <em>crazy</em> if each user had to write rules for string marshalling. There would be hard cases like marshalling <code>std::shared_ptr</code> that we do not implement because we do not use it.</p>
<aside class="quote no-group" data-post="73" data-topic="5921" data-username="bvanevery">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/db36ed6f89b5f5a67fae0253c42f0748.png" width="20"/> bvanevery:</div>
<blockquote>
<p>GPLed</p>
</blockquote>
</aside>
<p>Irrelevant personal preferences are irrelevant. The fact that you do not like the license has no effect on quality of the tool. This is also irrelevant because product never ships with any SWIG code and therefore it is not a derivative project. SWIG interface files are explicitly mentioned as a license exception and are not covered by GPL. SWIG is a compiler, nothing more and it’s license does not extend to projects that use it any more than license of GCC.</p>
<hr/>
<p>SWIG is perfect for *** because all languages we will possibly ever support are covered by it. It is not the case for Urho3D so if there is intention to keep AS then by all means SWIG may not be the best choice. But it still is better than any custom solution that i can guarantee will be dead once person who wrote it moves on to do the next thing.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="73" data-topic="5921" data-username="bvanevery">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/db36ed6f89b5f5a67fae0253c42f0748.png" width="20"/> bvanevery:</div>
<blockquote>
<p>today I learned it’s GPLed. Didn’t realize. I don’t personally like worrying about convolutions, even if for this case it may not matter. I also hate contributing to GPLed projects, basically I will almost never do so</p>
</blockquote>
</aside>
<p>Well, I don’t really like GPL too… so what?<br/>
Doxygen is GPL too and Urho uses it to generate docs.<br/>
How is it different from using SWIG to generate bindings?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<aside class="quote no-group" data-post="74" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p>The fact that you do not like the license has no effect on quality of the tool.</p>
</blockquote>
</aside>
<p><em>Community</em> preferences matter though.  Like for AngelScript community controlling their own destiny.  Have you asked what <em>they</em> want to put the energy into supporting?  AngelScript is zlib, and that is likely their dominant development culture.</p>
<aside class="quote no-group" data-post="74" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p>SWIG is perfect for *** because all languages we will possibly ever support are covered by it.</p>
</blockquote>
</aside>
<p>SWIG’s coverage of Lua is grossly inferior.  I’m aware that you don’t seem to like Lua anyways.  It means that you are interested / working with technology that is <em>bad</em>, to the extent that Urho3D wants to continue to support Lua <em>or</em> AngelScript.  I’m showing up here and putting in my $2 (I’m verbose) because I’ve done a lot of homework now.  I hope I can persuade people to back different strategy than SWIG.  I’ll also make no bones about the fact, that I don’t care about C# and think it’s open source suicide for Urho3D to ever worry about it.</p>
<p>Furthermore I note you can’t count on SWIG to continue to support <em>minority</em> languages in its portfolio.  I used to be CMake buildmaster for Chicken Scheme.  That’s another one of my open source debacles.  Yes Chicken Scheme doesn’t have CMake, but it <em>did</em>, for awhile under my watch.  Until we had a big fight about author not liking CMake because it was “buggy”.  As though he never wrote a bug.  Somehow over the years, Chicken Scheme got into SWIG, I don’t know how.  Fast forward to SWIG-4.0.0 release notes and I see that support is gone.  Along with CFFI, CLISP, UFFI, and Pike, names of things I recognize from “back in the day”.  Says to me, language authors and communities decided to <em>dump SWIG</em> as inferior and control own destinies.  SWIG didn’t get the love because there’s nothing to love.  AngelScript definitely has the profile of a language that, long term, would get <em>dumped</em>.</p>
<p>I also suspect your best C# option is <em>not SWIG</em>.  Won’t be doing any research on that, but c’mon.  C# ecosystem is huge, there has to be better “talk to C++” solution than SWIG.</p>
<aside class="quote no-group" data-post="75" data-topic="5921" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>Doxygen is GPL too and Urho uses it to generate docs.<br/>
How is it different from using SWIG to generate bindings?</p>
</blockquote>
</aside>
<p>Docs aren’t code.  There’s a well-defined problem boundary where interference is not a problem.  Somebody writing docs, doesn’t want to cut and paste their intellectual effort into a program.  Whereas, programmers want to do this all the time.  I don’t want my intellect wasted on the GPL, speaking for me personally.</p>
<p>Note furthermore that Linux’s success <em>really isn’t GPL</em>, it’s GPL with linkage exception.  Really big pragmatic difference of philosophy there.  Not that I want to contribute to Linux kernel anyways, just saying that what people tend to think of as “GPL success story”, isn’t actually so.  It’s much more similar to LGPL and it might take a lawyer to spell out the exact difference, other than marketing.</p>
<p>Whether Doxygen would work as a code generation tool, seems to be up to 1vanK’s research and contemplation at this point.  My wonderment, is whether this will handle Windows-specific compilation.  Historically, Clang broke down on that, but it’s been a long time so maybe it’s been solved by now.</p>
<p>Meanwhile, I know that Doxygen is not needed or desired for Lua C++ binding.</p>
<p>I think AngelScript community should be consulted about what they think of the idea.</p>
<p>It is not important to bind <em>all</em> languages.  There should be a <em>business strategy</em> for any choice made, for Urho3D’s future.  So having generic XML specs that anyone could use for anything, doesn’t strike me as a value add.  It’s all contingent upon what a <em>specific</em> language is capable of doing with C++.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p><span class="mention">@bvanevery</span> to be honest i do not even read most of your brain dump, just skim it over. That is way too many words for not saying much… <img alt=":expressionless:" class="emoji" src="../../../images2/b1af50d66bcb5474ff35560e2696f772.png" title=":expressionless:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<p>I understand, but at the same time, <em>you are biased</em> towards your own *** development.  You are of course not equally vested in what is best for Urho3D.  Maybe by way of Python 3.x, someday you can live “downstream” of Urho3D, but right now you are <em>forked</em>.  I am trying to persuade <em>people</em>, possibly including you, <em>not</em> to walk down this SWIG road.  Many words are required to explain, why not just grab SWIG and call it a day.  The TL;DR version is “because it’s a bad idea” but of course nobody who actually thinks, is going to accept that.  You might start meditating about this in the future.  You might not, because of your bias.</p>
<p>My writeup doesn’t have to be for you.  You’re forked.  My writeup is for <em>Urho3D community decision making</em>.  I’d like to head SWIG off at the pass, make it stop, before that train gets rolling in any way.</p>
<p>There are 2 binding problems to solve for Urho3D right now.  Lua, and AngelScript.  <em>Nothing else</em>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>I looked through swig docs for lua and there indeed is no mention of director classes. You are indeed right about swig for lua being suboptimal. It is great for c# though. And by that I mean there are so many nasty cases handled… I would totally go with pybind11 for python or something comparable for lua in that case. Too bad cpp metaprogramming magic isn’t really a viable option for binding to c#.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<aside class="quote no-group" data-post="79" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p>Too bad cpp metaprogramming magic isn’t really a viable option for binding to c#.</p>
</blockquote>
</aside>
<p>You mean you researched lots of things in the C# ecosphere and there’s uniform agreement that this is some impossible and foolish developer journey?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>Right. Problem is there is no pure c API as flexible as 8n say lua. So we need to wrap c++ in a c API and we need a managed wrapper that consumes this c API.  C++/CLI might make it possible, but it is windows-only therefore not an option. Short of generating IL code manually… we are stuck with generating bunch of c and cs code. Situation indeed isn’t that good when it comes to cs bindings.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<aside class="quote no-group" data-post="81" data-topic="5921" data-username="rku">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1a5eea7dbbb3958777541ddbeb59abe6.png" width="20"/> rku:</div>
<blockquote>
<p>C++/CLI might make it possible, but it is windows-only therefore not an option.</p>
</blockquote>
</aside>
<p>Mono never provided this??  If true, Good Lord.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>Nah, mono has just c# compiler. But it has extensive c API. But probably not enough to bind it like lua. Btw if you are wondering - unity binds same way: a mix of c# wrapper code + c API, manually written. So yeah…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<p>I am really confused now.  What is the <a href="https://www.mono-project.com/docs/advanced/runtime/" rel="nofollow noopener">Mono Runtime</a>?  They say:</p>
<blockquote>
<p>The Mono runtime implements the <a href="http://www.ecma-international.org/publications/standards/Ecma-335.htm" rel="nofollow noopener">ECMA Common Language Infrastructure</a> (CLI). The Mono runtime implements this virtual machine.<br/>
If you are interested in the technical aspects of the Mono runtime check the <a href="https://www.mono-project.com/docs/advanced/runtime/docs/" rel="nofollow noopener">Runtime Documentation</a>.</p>
</blockquote>
<p>I thought a CLI VM is a CLI VM is a CLI VM.  You should be able to “run languages” on this.  Shouldn’t be a Windows thing.  Thought that was the whole point of ECMA standardization.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>C++/CLI is a c++ dialect that compiles to a mixed mode assembly containing both managed CLI bytecode and native code. Mixing c++ and .NET is easy. It’s an awesome tech. Too bad it’s not xplat <img alt=":confused:" class="emoji" src="../../../images2/7678bd25c0e19b3a45e5d0b2348a29ef.png" title=":confused:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<p>My lingo is out of date.  This sort of thing used to be called “Managed C++”.  In 2004 the so-called “C++/CLI” takes over.  Ok, so the open source world never came up with an equivalent.  I see the problem now.</p>
<p><a href="http://www.stroustrup.com/bs_faq.html#CppCLI" rel="nofollow noopener">Note though</a>:</p>
<blockquote>
<p>It has been standardized by ECMA (ECMA-372).</p>
</blockquote>
<p>Nobody in open source picked up that ball in practice?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>There was at least one attempt based on llvm but it was left unfinished. <a href="https://github.com/tritao/clang-cli" rel="nofollow noopener">https://github.com/tritao/clang-cli</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">bvanevery</div>
          <div class="post_content">
<p>I’m not clear on whether that’s the same thing as the <a href="http://www.atoker.com/blog/2012/04/12/llvm-europe-2012-cli-compiler/#comment-69790" rel="nofollow noopener">Nuanti C++/CLI compiler</a>, circa 2012.  Searching around, it seems to have vanished from open source radar.  I don’t see Alp Toker as an author in the Git repository you gave, nor any mention of Nuanti.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>Never heard of one you mentioned. One i pointed to was an experiment by João Matos (employee of Xamarin).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote quote-modified" data-post="9" data-topic="5932">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/fb52f23a6782e890737d90432eac55f2.png" width="20"/>
<a href="https://discourse.urho3d.io/t/interest-in-python-3-8-and-3-9/5932/9">Interest in Python 3.8 and 3.9?</a> <a class="badge-wrapper bullet" href="/c/developer-talk/16"><span class="badge-category-bg" style="background-color: #3AB54A;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Everything about the development of Urho3D.">Developer Talk</span></a>
</div>
<blockquote>
    Unrelated to the most recent posts, I’ve successfully created Python bindings for Urho, (as in it can create and run an application without crashing). These are (for the most part) automatically generated using the python wrapper for libclang. Presently they are just python 2.7, but that’s just what I had configured before (I believe pybind11 supports both, so it’s just a matter of switching the libraries and includes when building). It is by no means feature complete (probably not really even r…
  </blockquote>
</aside>

          </div>
        </div>
      </div>


    </div>
  </body>
</html>