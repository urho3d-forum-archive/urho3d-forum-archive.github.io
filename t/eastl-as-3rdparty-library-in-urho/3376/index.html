<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>EASTL as 3rdParty library in Urho</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">EASTL as 3rdParty library in Urho</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Urho have a lot of “bicycle” things.<br/>
We cannot just drop things like Urho.Container, but we can stop writing even more garbage code.<br/>
So, I suggest to include EASTL as part of 3rdparties available for internal and external usage.</p>
<p>Pros:</p>
<ul>
<li>
<p>Stop re-re-re-implementing things when some algo or specific container is needed. No more garbage like <code>Urho::LowerBound</code>-s (shame on me) or maybe even <code>Urho::Sort</code></p>
</li>
<li>
<p>More functionality for C++devs who dislike STL or want fast containers/compilation.</p>
</li>
</ul>
<p>There shall be the same restriction as for other 3rdparties like Bullet: Urho shall not use EASTL types and things in interface. So, Urho containers will be used for public API and EASTL will be used to simplify some algos or internally store data in exotic containers.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Did you compare it with Urho?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>I reviewed it, at least. What are you interested in?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>I mean comparison of performance</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>I didn’t think in that way, actually. There is too little common between Urho.Container and EASTL.</p>
<p>Urho.Container is few simple containers and algorithms needed for the Engine. EASTL is dozens of different containers, hundreds of algorithms and traits for almost every possible task.</p>
<p>I doubt that there is important performance difference between e.g. <code>eastl::hash_map</code> and <code>Urho3D::HashMap</code>. And since we cannot get rid of Urho.Container completely, there is no sence to replace Urho containers in Engine internals with EASTL ones and complain about performance.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>I started integrating EASTL into <a href="https://github.com/***/***/commit/71a1ba528d46cbca0edbacbf2feb29e429996bd6" rel="nofollow noopener">***</a>. There are more benefits than meets the eye too.</p>
<ul>
<li>Compatibility with stdlib. This is important.</li>
<li>Swig already has code written to wrap stdlib containers and adapting them will be easy. This will relieve some C# maintenance burden.</li>
<li>Can easily adapt other libs to use same classes. For example <code>fmt</code> could use same string implementation. This will be most likely just swapping some includes in <code>fmt</code>.</li>
<li>Allocator customization. Instead of using separate allocator per container we could benefit from some memory pooling.</li>
</ul>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>I am done with initial migration. Had to patch EASTL in the process, adding some convenience functions we are all used to. Smart pointers also needed a bit of love to allow us constructing <code>eastl::shared_ptr&lt;&gt;</code> from plain <code>T*</code> instead of having to explicitly use <code>ptr-&gt;shared_from_this()</code>. It all appears to be working fine.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>