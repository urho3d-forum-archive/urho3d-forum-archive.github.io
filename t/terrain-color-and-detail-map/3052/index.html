<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Terrain Color and Detail map</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Terrain Color and Detail map</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>Some small stuff here as I was just messing around with the default terrain, I got a bit of detail and color map added to improve the terrain visuals up close and from a distance. Still a work in progess with the height or elevation modified to shorten the process and generate a 2048x2048 color map.</p>
<p><img height="330" src="../../../images2/4f0b747847a5931f18e54ee0fd56b989.png" width="640"/></p>
<p><img height="331" src="../../../images2/bb155d0c7c8d5dcc5cfff1f4ac2f4448.png" width="640"/></p>
<p><strong>Color and Detail map only</strong><br/>
<img height="329" src="../../../images2/02fa56b0816e7ee88d8af3fb409aec2f.jpg" width="640"/></p>
<p><strong>Terrain Weights texture as Color map for testing and aligning uv scale</strong><br/>
<img height="330" src="../../../images2/e2a5afd838eb55799e787919f52a5543.png" width="640"/></p>
<p>Imgur Set<br/>
<div class="onebox imgur-album">
<a href="https://imgur.com/a/Y8J1p" rel="nofollow noopener" target="_blank">
<span class="outer-box" style="width:600px">
<span class="inner-box">
<span class="album-title">[Album] Urho Terrain with 2048x2048 color map &amp; 256x256 detail map</span>
</span>
</span>
<img height="315" src="../../../images2/096b4c10b76b220d7c476dbafbf426e1.jpg" title="Urho Terrain with 2048x2048 color map &amp; 256x256 detail map" width="600"/>
</a>
</div>
</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Well, surely it looks better than default ones! <img alt=":grin:" class="emoji" src="../../../images2/ec34c8e58665ec32c0e7c847446db86d.png" title=":grin:"/><br/>
Proposed for entering next release!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/203_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">KonstantTom</div>
          <div class="post_content">
<p>It looks really cool! <img alt=":+1:" class="emoji" src="../../../images2/839de69da74ad690eef135029e0320bc.png" title=":+1:"/><br/>
I think, this terrain should replace default one in Urho3D samples.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">smellymumbler</div>
          <div class="post_content">
<p>Holy crap, that’s awesome! <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
<p>Can the detail map be added on a per channel basis? I mean, one detail for grass, another for rock, another for sand, etc.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>With some modifications to the cubes, could take on a eerie, alien look…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Our <a href="http://wac.450f.edgecastcdn.net/80450F/fun107.com/files/2012/11/flintstones-e1354034454144.png">Flintstone-mobile</a> would maybe require an upgrade then. I agree it’s prettier, but quite a bit more hilly too.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<p>Thanks guys! <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> As for other media like these replacement diffuse textures, it was a quick test so I have used L3DT to generate color maps out of its base textures and the modified heightmap. I have used the Temperate climate set on this setup and apparently the license prohibits redistribution of its base textures, so I’ll just find other alternatives that has either Public Domain or CC license when it is ready for PR or release.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<aside class="quote" data-full="true" data-post="6" data-topic="3052">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8b9decec7cc30729aa8f8f7015602d32.png" width="20"/> Modanung:</div>
<blockquote>
<p>Our Flintstone-mobile would maybe require an upgrade then. I agree it’s prettier, but quite a bit more hilly too.</p>
</blockquote>
</aside>
<p>haha nice one <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/55_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rasteron</div>
          <div class="post_content">
<aside class="quote no-group" data-post="4" data-topic="3052" data-username="smellymumbler">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/6da748b8a26de7f4edb17badb98017e7.png" width="20"/> smellymumbler:</div>
<blockquote>
<p>Holy crap, that’s awesome! <img alt=":smiley:" class="emoji" src="../../../images2/7014497b1c97c810791a011290bda7f5.png" title=":smiley:"/></p>
<p>Can the detail map be added on a per channel basis? I mean, one detail for grass, another for rock, another for sand, etc.</p>
</blockquote>
</aside>
<p>Thanks <span class="mention">@smellymumbler</span>! <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/> Yes with some tweaks I think this is also possible.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Sinoid</div>
          <div class="post_content">
<blockquote>
<p>Can the detail map be added on a per channel basis? I mean, one detail for grass, another for rock, another for sand, etc.</p>
</blockquote>
<p>You can pack grayscale maps into channels of an RGBA texture and get the mixed value pretty easily.</p>
<pre><code>vec4 blend = texture2D(BlendMap, texCoords).rgba;
vec4 detVal = texture2D(PackedDetailTextures, texCoords * DetailScalingFactor).rgba;
float dotValue = dot(detVal, blend);
float sVal = 1.0 - (dotValue * 2.0);
oColor += (-sVal);
</code></pre>
<p>Light-weight enough that you could also get an analytic normal from it with additional samples.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">smellymumbler</div>
          <div class="post_content">
<p>Where would <code>PackedDetailTextures</code> come from? I imagine i have a single texture, a splatmap, where each channel contains a different material definition: sand, grass, rock and snow (R, G, B, A). I use those as masks to apply 4 different channels in my terrain. Each material contains 4 textures: diffuse, specular, normal and detail.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Sinoid</div>
          <div class="post_content">
<p>They’re grayscale detail-texture maps for each blend channel, not materials - completely different thing from detail-mapping.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">smellymumbler</div>
          <div class="post_content">
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/8eb77c84d30191109e9e46b28f574fdd.ico" width="32"/>
<a href="https://urho3d.fandom.com/wiki/Expand_default_terrain_material_to_6_textures_using_the_six_primary&amp;secondary_colors" rel="nofollow noopener" target="_blank">Urho3D Wiki</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:690/315;"><img class="thumbnail" height="315" src="../../../images2/b85dbcbf953d4ff885d42ea31f330051.jpg" width="690"/></div>
<h3><a href="https://urho3d.fandom.com/wiki/Expand_default_terrain_material_to_6_textures_using_the_six_primary&amp;secondary_colors" rel="nofollow noopener" target="_blank">Expand default terrain material to 6 textures using the six...</a></h3>
<p>Here I'm using the "six basic colors" red, yellow, green, cyan, blue and magenta to get six separate color weight. Urho is currently per default limited to five textures. You need to modify the file "Source/Urho3D/Graphics/GraphicsDefs.h" first to...</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>Like that? So, if i want specular/normal, i just have to load up more texture units and load the respective maps?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Victor</div>
          <div class="post_content">
<p>You can also use texture arrays to allow for more textures. <img alt=":wink:" class="emoji" src="../../../images2/58bcd684421190f24be1944e2a997a04.png" title=":wink:"/> You can do this manually (send a large texture to the shader which contains multiple textures), or using the TextureArray feature.</p>
<aside class="quote quote-modified" data-post="2" data-topic="2695">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/7959f0d708dd3df34167f10f810416b9.png" width="20"/>
<a href="https://discourse.urho3d.io/t/how-to-use-texture2darray/2695/2">How to use Texture2DArray?</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    I use it in my custom terrain shader to provide 8 (or more) different terrain detail textures. 
In GLSL: 
uniform sampler2DArray sDetailMap2; 
Then, in the pixel shader, to sample it use: 
texture(sDetailMap2, vec3(vDetailTexCoord.xz, 1)); // To index texture at array location 1 
In HLSL: 
Texture2DArray tDetailMap : register(t2);; 
SamplerState sDetailMap : register(s2); 
In pixel shader: 
tDetailMap.Sample(sDetailMap, float3(iDetailTexCoord.xz, 0)); // To index texture at array location 0 
The…
  </blockquote>
</aside>

          </div>
        </div>
      </div>


    </div>
  </body>
</html>