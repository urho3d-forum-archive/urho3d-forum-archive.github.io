<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Support GLES3 in engine</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Support GLES3 in engine</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Hi!<br/>
I m add support for GLES3 rendering API and it features:</p>
<ul>
<li>Instancing</li>
<li>Uniform buffer object</li>
<li>Multiple render targets</li>
<li>Texture2DArray</li>
<li>Texture3D</li>
<li>Support for textures: ETC2, sRGB, floating point, depth, 1 &amp; 2 channel (R &amp; R/G).<br/>
Worked render pathes - Deferred, DeferredHWDepth, Prepass, PrepassHWDepth.</li>
</ul>
<p>Sources - <a href="https://github.com/orefkov/Urho3D/tree/GLES3_Support" rel="nofollow noopener">https://github.com/orefkov/Urho3D/tree/GLES3_Support</a></p>
<p>For build set option URHO3D_GLES3=1<br/>
For CMake need -DURHO3D_GLES3=1, for Gradle /PURHO3D_GLES3=1.</p>
<p>Builded for Android (arm64, armv7a) - <a href="https://yadi.sk/d/PYWhzveBu58epg" rel="nofollow noopener">https://yadi.sk/d/PYWhzveBu58epg</a><br/>
Please test on some devices.</p>
<p>In the builded version, there are no Lua and Lua scripts, and in the example 06_SkeletalAnimation.as added 70 point lights and deferred render path used. Here is a screenshot from the phone - CPU MTK Helio P60, GPU - Mali G72 MP3.</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Urho3D_gles3.png"><img alt="Urho3D_gles3" data-base62-sha1="89osK5IkAgwxT5KffIWoO5JxBo1"  height="318" src="../../../images2/7a45536cc91a0614db65c2c56a3b969c.png"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Urho3D_gles3.png</span><span class="informations">2340×1080 1.54 MB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>After test I will PR it at main repo.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2552_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">glitch-method</div>
          <div class="post_content">
<p>this is great! and I really like your launcher. the ui is a bit small, but still functional. (I had to use back softkey to exit console, touch wouldn’t register at the close button.)</p>
<p>are you planning to add an option for user data, like scripts/resources in /sdcard/urho3d/?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Launcher is not my work, it is stock Urho3D launcher. Later I will publish my own laucher, which I use for develop script games for Android.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2695_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Alibaba</div>
          <div class="post_content">
<p>There seems to be a problem with shadows.</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot_20191030-104915.png"><img alt="Screenshot_20191030-104915" data-base62-sha1="ohtJDcNI2b0EZbIVreeLwMKh3k5"  height="329" src="../../../images2/cb568994aac2913b19daa9f0ed16f084.png"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_20191030-104915.png</span><span class="informations">2260×1080 770 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br/>
I test on VinSmart Active 1+ ( CPU: Snapdragon 660, GPU: Adreno 512)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Yes, a strange picture.<br/>
On my device, it’s like that.<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot_20191030-094121.png"><img alt="Screenshot_20191030-094121" data-base62-sha1="XMimnkb5u9q2TTysINXK3CcDtb"  height="318" src="../../../images2/5c513019ff951b863bda205e75e43655.png"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_20191030-094121.png</span><span class="informations">2340×1080 1.11 MB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br/>
Now, for optimization on mobile devices, shadows from distant objects are not drawn.<br/>
And for some reason you have a character far from the camera, not like mine.<br/>
Can you take a screenshot with the HUD turned on?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2695_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Alibaba</div>
          <div class="post_content">
<p>Yes,<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot_20191030-172658.png"><img alt="Screenshot_20191030-172658" data-base62-sha1="wZqknIrvxrR0OTy5gMCjCtC5BNf"  height="329" src="../../../images2/91eb8af22965e04a24fcafea063a18ba.png"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_20191030-172658.png</span><span class="informations">2260×1080 944 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Confirm. On other my phone with Adreno same picture. I will investigate it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>I am not a very big specialist in OpenGL, so it took a couple of days to find the cause. As a result, it turned out that it was just necessary to set the GL_TEXTURE_COMPARE_MODE parameter to GL_COMPARE_REF_TO_TEXTURE for the shadowmap texture.</p>
<p>Now I corrected it, plus a few more edits - I activated the use of constant buffers in uniforms.glsl for tests, and corrected a few more minor errors. I’ll make a commit soon, but for now, using the same link <a href="https://yadi.sk/d/PYWhzveBu58epg" rel="nofollow noopener">https://yadi.sk/d/PYWhzveBu58epg</a>, you can download a new build for testing.</p>
<p>Here I checked the shadows on Adreno:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="screen3.jpg"><img alt="screen3" data-base62-sha1="k7bVZEhrJIMklDWtuDQxP90NY9b"  height="388" src="../../../images2/a71f2240076fedf264593f8a04ca0b7c.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">screen3.jpg</span><span class="informations">1920×1080 817 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>… In Mali:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="screen4.jpg"><img alt="screen4" data-base62-sha1="4t0tFwYpThhCHOgceVQ05lRdwkR"  height="318" src="../../../images2/05da1bb29b793540bc03be8a08f05906.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">screen4.jpg</span><span class="informations">2340×1080 1.03 MB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Even on the old weak Adreno 330, deferred rendering works (although not so fast, but for its power the scene is complicated)<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="screen6.jpg"><img alt="screen6" data-base62-sha1="jXGG0lNQHzoLDl6yR4Qrum1wXaY"  height="388" src="../../../images2/a15ebe181b63d165ff16aa56df8c299c.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">screen6.jpg</span><span class="informations">1920×1080 931 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>In general, according to <a href="https://developer.android.com/about/dashboards/index.html#OpenGL" rel="nofollow noopener">https://developer.android.com/about/dashboards/index.html#OpenGL</a> - OpenGL ES3.0-3.2 occupies about 80% of devices, it is strange that there is so little interest in adapting the engine for ES3. Using only ES2 now you will not achieve much on Android - there is no intansing, no ETC2 - the biggest problems.<br/>
I hope, with my improvements for ES3 and to improve interaction with Android (<a  rel="nofollow noopener">https://github.com/urho3d/Urho3D/pull/2538</a>), the engine will be an excellent choice in the niche of creating Android games.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2695_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Alibaba</div>
          <div class="post_content">
<p>Yeah, this is great ^^<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot_20191101-204627.png"><img alt="Screenshot_20191101-204627" data-base62-sha1="l9ebGPUK25uE5WPDGvTnmZXDvXr"  height="329" src="../../../images2/fa0f3bf7dd60cfa262e89c8f4ec0cd05.png"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_20191101-204627.png</span><span class="informations">2260×1080 704 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>By the way, I noticed that in terms of instancing on GLES3 Urho3D works better than Unity. In particular, Unity disables the use of instancing when working in GLES3 on the weak models of Adreno (330 and others, with the GL ES 3.0 driver), while on Urho3D, the instancing on these GPUs works. This is due to the fact that Unity uses the uniforms array for instancing and fetching from it through gl_instanceID, which does not work correctly on these drivers. Urho3D uses vertex buffers with instanced attributes and glVertexAttribDivisor. They work correctly on these GPUs, and in addition, they allow transferring a much larger number of instances per draw call than when using uniforms arrays.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Since the majority of the mobile devices support GLES3, should we enable the GLES3 build option by default?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1437_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">elix22</div>
          <div class="post_content">
<p>Please read below ,<br/>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="16" src="../../../images2/856c9d6b0fe79639cf26b0555431a16d.png" width="16"/>
<a href="https://godotengine.org/article/abandoning-gles3-vulkan-and-gles2" rel="nofollow noopener" target="_blank">godotengine.org</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:128/49;"><img class="thumbnail" src="../../../images2/61e52dc2f9a0861fb1052eae0e928549.svg"/></div>
<h3><a href="https://godotengine.org/article/abandoning-gles3-vulkan-and-gles2" rel="nofollow noopener" target="_blank">Godot Engine - Moving to Vulkan (and ES 2.0) instead of OpenGL ES 3.0</a></h3>
<p>The rationale for the OpenGL ES 3 renderer was having a single codebase for targeting all platforms. This sounds really good in theory and we could say it *almost* works, but...</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>21.1% of the Android devices still support only GLES2<br/>
On some there is 3.x support but with some issues/bugs .<br/>
I think GLES2 should be the default configuration with the ability to enable GLES 3.x by using CC</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Just to clarify. I am not planning to remove that build option. The “URHO3D_GLES3” build option stays. What I have in mind is to set its default to true for Android and iOS/tvOS, but user can still opt to explicitly disable it to get GLES 2 instead. Something like this in CMake build script.</p>
<pre><code class="lang-auto">cmake_dependent_option (URHO3D_GLES3 "Use GLES 3 instead of GLES 2 (Android/RPI/ARM/iOS/tvOS platforms only); default to true for Android and iOS/tvOS" "ANDROID OR IOS OR TVOS" ARM FALSE)
</code></pre>
<p>The GLES days for iOS/tvOS should be numbered. So if we exclude these two platforms, we left with Android. If you guys think that for Android it should not be defaulted to true too then we could simplify the above script.</p>
<pre><code class="lang-auto">cmake_dependent_option (URHO3D_GLES3 "Use GLES 3 instead of GLES 2" FALSE ARM FALSE)
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1437_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">elix22</div>
          <div class="post_content">
<p>My 2 cents ,<br/>
Currently the iOS/tvOS angle-metal-backend implementation   is not part of Urho3D , hopefully that will change in the near future.<br/>
So for now the configuration should remain common to both Android , iOS/tvOS</p>
<aside class="quote no-group quote-modified" data-post="13" data-topic="5688">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8c3888d68a9e52e853f0724aae6cefb6.png" width="20"/> weitjong:</div>
<blockquote>
<p>cmake_dependent_option (URHO3D_GLES3 “Use GLES 3 instead of GLES 2 (Android/RPI/ARM/iOS/tvOS platforms only); default to true for Android and iOS/tvOS” “ANDROID OR IOS OR TVOS” ARM FALSE)</p>
</blockquote>
</aside>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>What scholastic disputes do you have? Can you immediately name the game in the playmarket on the Urho3D engine? What about two? This is what should really serve as a sad subject for discussion, and not what option to default. Game developers will be able to solve this issue for themselves. But where are they? No matter how beautiful the engine is, but without the games made on it, the meaning disappears in it.<br/>
If there are no games, then it makes no difference whether the developers DO NOT make games on GLES2 or GLES3.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1437_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">elix22</div>
          <div class="post_content">
<p>I really don’t have any disputes with anyone .<br/>
I really would like this amazing game engine to prosper and still be relevant in the future  .</p>
<p>I agree with you , there are not so much developers that are making games with this amazing engine .<br/>
Chicken and the egg problem :<br/>
Developers will not invest time in making games with a game engine that is rarely maintained.<br/>
Developers will not maintain an game engine that is rarely being used to develop games.</p>
<p>I think you made a great job with GLES3 .<br/>
With my limited resources I am trying to bring Metal to iOS/macOS .<br/>
Hopefully more developers will join in the future …</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I don’t want to answer your other question here, but as for why I care for which options be made default matter for me because I am a CLI user. The default should be set to what makes the most sense. Whether the engine takes off or not, I do not really care much. If we do, we would probably stop long time ago.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/357_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts</div>
          <div class="post_content">
<p>The engine is being used a bit more than would be apparent looking at these forums or the contribution activity lately. I know personally of three potential commercial projects in the works (not mine), plus I know of a high school teacher who is using it to teach students. Please, you guys, don’t be discouraged by the seeming lack of interest. Urho3D is a project that has a great deal of merit and potential, and a larger audience than it seems, and it has really always been that way. Rest assured that everyone here is appreciated for their efforts by people, such as myself, who don’t necessarily have the time to contribute to the codebase or the forums that much anymore.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>I worked on <a href="https://play.google.com/store/apps/details?id=com.playwing.instantwar" rel="nofollow noopener">big commercial game</a> that was built on urho3d fork. Game was GLES3 initially, but they insisted on implementing GLES2 support in order to expand possible audience. GLES may be a minority, but it is not insignificant minority yet. With that said - it probably does not matter which is default. GLES3 can be default if only to get more performant and prettier samples…</p>
<p>Edit: I should note that by saying <em>big</em> i meant size of the project, not necessarily it’s popularity.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Hi, I was started my GLES3-work based on your fork <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/><br/>
For me personally, the most important thing from GLES3 is the guaranteed instancing and ETC2 textures. In my game was up to 608  simultaneous objects of the same type in the frame, and in new version it  there can be up to 860, and without instancing I had to go to different tricks in order to realize this. Although I also have to do this and with instancing <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>Awesome! I only implemented bare minimal functionality i needed. Thanks for finally finishing it properly <img alt=":+1:" class="emoji" src="../../../images2/44789f9390639d4847fd0de0a6ae5879.png" title=":+1:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2836_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">extobias</div>
          <div class="post_content">
<p>hey rku, can we know the name of the game?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/646_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">QBkGames</div>
          <div class="post_content">
<p><a href="https://discourse.urho3d.io/t/planetoid-escape-sci-fi-survival-fps-wip/5110">Planetoid Escape</a> is also a fairly big project, which I’m planning to eventually commercialize (hopefully sometimes next year), so that could count as commercial project under development using Urho.</p>
<p>I’m also interested in GLES3 mostly for Oculus Quest. For puzzle type games for the mobile market I’d probably stick to GLES2 to maximize compatibility.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Im now release my old game <a class="inline-onebox" href="https://discourse.urho3d.io/t/brick-break-andriod-mobile-game/4602">“Brick Break” - Andriod mobile game</a> on GLES3. The game has a lot of small identical elements in the frame, and without instancing it is difficult to make it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>I updated my post with a link.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I have requested help in our GitHub issue tracker but I have not getting the help I need. The original PR seems to break the Web platform, all the samples have runtime error and just displaying blank canvas. I need help from others to confirm my observation because my local test branch is not clean and it could be my own doing, and also help to fix the issue if it is indeed a regression issue.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="onebox githubpullrequest">
<header class="source">
<a  target="_blank">github.com/urho3d/Urho3D</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Pull Request">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 12 16" width="60"><path d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a  target="_blank">Add Open GL ES 3 support</a>
</h4>
<div class="branches">
<code>urho3d:master</code> ← <code>orefkov:GLES3_Support</code>
</div>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2019-10-28" data-format="ll" data-time="17:55:57" data-timezone="UTC">05:55PM - 28 Oct 19 UTC</span>
</div>
<div class="user">
<a href="https://github.com/orefkov" target="_blank">
<img alt="orefkov" class="onebox-avatar-inline" height="20" src="../../../images2/b46063696b295c8d164a2503867b725a" width="20"/>
          orefkov
        </a>
</div>
<div class="lines" title="9 commits changed 36 files with 353 additions and 120 deletions">
<a  target="_blank">
<span class="added">+353</span>
<span class="removed">-120</span>
</a>
</div>
</div>
</div>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="15" data-topic="5688" data-username="orefkov">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/6e3ebb71ca178e47618c33268008b065.png" width="20"/> orefkov:</div>
<blockquote>
<p>If there are no games, then it makes no difference whether the developers DO NOT make games on GLES2 or GLES3.</p>
</blockquote>
</aside>
<p><span class="mention">@orefkov</span></p><aside class="quote" data-post="1" data-topic="5810">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/8c3888d68a9e52e853f0724aae6cefb6.png" width="20"/>
<a href="https://discourse.urho3d.io/t/urho3d-project-is-listed-on-the-first-page-search-result/5810">Urho3D project is listed on the first page search result</a> <a class="badge-wrapper bullet" href="/c/discussions/general-discussion/9"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #652D90;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="General discussion around Urho3D.">General Discussion</span></a>
</div>
<blockquote>
    Search on this keyword “3D game engine” on Google in incognito mode <img alt="grinning" class="emoji" height="20" src="../../../images2/6ff5fe7585881b186da64ee361f7b7aa.png" title="grinning" width="20"/> 
Let’s hope it stays there for a few days before our search rank changes again.
  </blockquote>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/96_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts1</div>
          <div class="post_content">
<p>I kicked off a build before I left for work this morning, I will let you know how it goes tonight.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I got it working again. I have to revert back one line of change from the PR to what it was before.</p>
<pre><code class="lang-auto">diff --git a/bin/CoreData/Shaders/GLSL/Uniforms.glsl b/bin/CoreData/Shaders/GLSL/Uniforms.glsl
index b823be7f84..2ee0bcaafd 100644
--- a/bin/CoreData/Shaders/GLSL/Uniforms.glsl
+++ b/bin/CoreData/Shaders/GLSL/Uniforms.glsl
@@ -48,7 +48,7 @@ uniform mat4 cZone;
 #ifdef COMPILEPS
 
 // Fragment shader uniforms
-#ifdef MOBILE_GRAPHICS
+#ifdef GL_ES
     precision mediump float;
 #endif
</code></pre>
<p>Still, I become not that confident with all the proposed changes as the result. i.e. I think we need more eyeballs to validate this PR.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Let me know if my approach is wrong. As I understand the GLES 3 is more or less equivalent to WebGL 2. So, in my test branch I have added (experimental) build option to enable WebGL 2 for Web build. It builds cleanly now but runtime still gives error. I intend to “fix” the current GLES 3 implementation by fixing the runtime errors from WebGL2 build that I observed. Hopefully I do not cause further regression issue to GLES 3 on other platforms in the process. This is far beyond my comfort zone.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/357_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts</div>
          <div class="post_content">
<p>I built the orefkov_GLES3_Support branch both with EMSCRIPTEN_WEBGL2 and without, and with the fix to change MOBILE_GRAPHICS to GL_ES in Uniforms.glsl, I have no runtime errors. Without that change, I get runtime errors on both builds. GraphicsDefs.h considers WebGL to be a Desktop platform instead of a mobile platform and MOBILE_GRAPHICS isn’t being set for WebGL builds, so no float precision is being specified unless, as your recent commit does, the float precision specifier is based on GL_ES instead of MOBILE_GRAPHICS.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I totally agree with your conclusion. For Web platform, I think it is also difficult to draw the line between DESKTOP_GRAPHICS and MOBILE_GRAPHICS. The same WebGL/2 API might have slightly different implementation between mobile browser and desktop browser, for example.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1164_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">orefkov</div>
          <div class="post_content">
<p>Hi folks. I refresh my PR for work with last Urho3D master branch.<br/>
Fix emscripten builds, and now Android and Web can work on GLES2 and GLES3 without errors.<br/>
Im extend 06_SkeletalAnimation sample - on GLES3 it run with deffered render path and has many lights.<br/>
<strong>UPD: My PR merged.</strong></p>
<p>Worked in Android with GLES2<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="android_gles2"><img alt="android_gles2" data-base62-sha1="ynyCtlQ2zvn6FDPCl6CeUVWI3kJ" data-dominant-color="616A85" height="318" src="../../../images2/37e6dab2988282884b129bcb076863ff.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">android_gles2</span><span class="informations">1920×886 173 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
And worked in Android GLES3<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="android_gles3_1"><img alt="android_gles3_1" data-base62-sha1="tKCE1s25Og2A4Xx8K6kb8wrTgLp" data-dominant-color="636A7E" height="318" src="../../../images2/1f61f1ad04c2c867cc70bddadd221afc.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">android_gles3_1</span><span class="informations">1920×886 192 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
WebGL1, GLES2 Debug UI<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="webgl_gles2_descr"><img alt="webgl_gles2_descr" data-base62-sha1="uoFiZ9uccI1b6bfXJJaGIPtnl6H" data-dominant-color="697FC1" height="22" src="../../../images2/b3214ef64db402b8789c10fcd4ee6dfd.png" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">webgl_gles2_descr</span><span class="informations">858×28 5.71 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
WebGL2, GLES3<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="webgl_gles3"><img alt="webgl_gles3" data-base62-sha1="whHbQz1XHGiTbuxJAsKGfJJisNE" data-dominant-color="646D85" height="388" src="../../../images2/eea14311e4b093afef49609813ff35a2.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">webgl_gles3</span><span class="informations">1920×1080 203 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
WebGL2, GLES3, Debug UI<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="webgl_gles3_descr"><img alt="webgl_gles3_descr" data-base62-sha1="7P68mytTQHNAwxkHYXwEhnd6gwc" data-dominant-color="6B7FBB" height="15" src="../../../images2/980898183e83c0ccc61bde66ea780f35.png" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">webgl_gles3_descr</span><span class="informations">851×19 5.7 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Builded Android version with examples - <a href="https://disk.yandex.ru/d/tmCFD11dnnmogQ" rel="noopener nofollow ugc">https://disk.yandex.ru/d/tmCFD11dnnmogQ</a></p>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>