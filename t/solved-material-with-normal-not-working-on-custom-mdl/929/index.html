<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>[SOLVED]Material with Normal not working on custom mdl</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">[SOLVED]Material with Normal not working on custom mdl</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">amit</div>
          <div class="post_content">
<p>I have written a custom fbx to mdl exporter which exports vertices(offcourse), Normal and multiple uv and Morph targets.<br/>
The mesh uses single uv for diffuse, normal and specular map.<br/>
In the material xml I used diffuse and normal only, yet there is no effect of either light or normal.<br/>
But it is strange to see a very dark diffuse on the model. It should be either properly lit  or not seen at all or solid color if there was any error.</p>
<p>As discussed on <a href="http://discourse.urho3d.io/t/solved-normalmap-strange-behavior/917/1">topic939.html</a> the problem seems similar and they have suggested that we need to also generate tangent.<br/>
Below are the material I used and a screenshot from the editor showing both the heart(you have to see closely, it is very dark and to the right of brightly &amp; correctly lit cube face) and a standard cube with same material and directional light.<br/>
The cube is render correctly.</p>
<p><code>&lt;?xml version="1.0"?&gt;
&lt;material&gt;
	&lt;technique name="Techniques/DiffNormalPacked.xml" quality="1" loddistance="0" /&gt;
	&lt;technique name="Techniques/Diff.xml" quality="0" loddistance="0" /&gt;
	&lt;texture unit="diffuse" name="Textures/Heart_Diff.png" /&gt;
	&lt;texture unit="normal" name="Textures/StoneNormal.dds" /&gt;
	&lt;texture unit="specular" name="Textures/Heart_Spec.png" /&gt;
	&lt;parameter name="UOffset" value="1 0 0 0" /&gt;
	&lt;parameter name="VOffset" value="0 1 0 0" /&gt;
	&lt;parameter name="MatDiffColor" value="1 1 1 1" /&gt;
	&lt;parameter name="MatEmissiveColor" value="0 0 0" /&gt;
	&lt;parameter name="MatEnvMapColor" value="1 1 1" /&gt;
	&lt;parameter name="MatSpecColor" value="0.3 0.3 0.3 16" /&gt;
	&lt;cull value="ccw" /&gt;
	&lt;shadowcull value="ccw" /&gt;
	&lt;depthbias constant="0" slopescaled="0" /&gt;
&lt;/material&gt;
</code><br/>
<img alt="" height="" src="../../../images2/4bfcc3b163fe38315e03814b4d74c0d3.png" width=""/></p>
<p>The model is render properly if unlit material is used, ie no normal and light calculation which really degrades the scene.<br/>
I would appreciate if somebody can help me out with a good material with diffuse ,normal and specular map.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/119_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">codingmonkey</div>
          <div class="post_content">
<blockquote>
<p>they have suggested that we need to also generate tangent.<br/>
yes, without tangents the normal mapping is not work properly<br/>
see blender exporter how they is generated.<br/>
also check out your modelâ€™s normals they must orient not in inwards</p>
</blockquote>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">amit</div>
          <div class="post_content">
<p>Thanks,<br/>
Tangent were created, and normals are workin, now there is a seam when lit, but the normal prob is solved.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>