<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>sRGB Setting in Editor behaves strangely</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">sRGB Setting in Editor behaves strangely</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3482_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">kidinashell</div>
          <div class="post_content">
<p>Hello y’all. I’ve been looking at Urho3D from time to time again and recently decided to give it another go to set everything up to feel comfortable in it.</p>
<p>Since I’m planning to use the Editor I set it up the way I wanted it to, which also included changing a little bit of the scripts themselves. Something I realized, after restarting the editor after some changes, which weren’t “hot-swapped”, that the sRGB setting or visualization doesn’t work the way I would expect.</p>
<p>But first: Does sRGB in Urho3D mean the same as what sRGB mean in general in other applications/graphics settings etc? (e.g. sRGB → RGB Full → Black Level HIGH etc.)</p>
<p>With that in mind I have my systems and monitors always set up for RGB Full/Black Level HIGH.<br/>
So, with that in mind, the first time I started the editor everything looked fine, nothing washed out or anything. The sRGB setting in the editor settings was turned off and I let it stay that way for now, since I wanted to get to know the editor first.</p>
<p>When I started the Editor the next time, I saw immediately the typical symptoms of mismatched sRGB settings: washed out visuals. Especially on the UI it was prominently evident.</p>
<p>I checked the editor settings again and saw, that sRGB was now checked. I was kinda confused, because that would mean, that now sRGB would be active (in Full mode) and so would actually align with my graphics and monitor settings.</p>
<p>So I unchecked it, restarted the Editor again, but the same thing happened: washed out visuals, sRGB setting again checked (automatically).<br/>
I closed the editor, removed the Config.xml file and started the Editor again but still the same.</p>
<p>I thought maybe, that I had changed something during stumbling through the scripts but couldn’t remember changing anything connected to sRGB or the settings loading procedure or anything like that. So I cloned the repository fresh to another location and tried it fresh out of the box: same behaviour.</p>
<p>Even tried another computer (also a Linux OS) but still the same behaviour.</p>
<p>Is it possible, that something checks if sRGB is available and sets it automatically and even disabling it doesn’t matter on the next startup of the Editor?<br/>
And even if that was the case, I only get the right visuals if sRGB is disabled in the Editor, even though I run my things with sRGB enabled.</p>
<p>What I could find out is, that the setting of sRGB in the Config.xml does get set to true again on closing the Editor. I didn’t see that in code or the scripts but I did the following:</p>
<ul>
<li>Set the sRGB setting in Config.xml manually to false</li>
<li>Started the Editor (sRGB was enabled in settings and washed out visuals present)</li>
<li>Unchecked sRGB</li>
<li>Closed the Editor</li>
<li>Checked Config.xml: sRGB is set to true</li>
</ul>
<p>For a little comparison on how it looks just to make sure, I’m not crazy here and what I think to be the right visual is actually the wrong one.</p>
<p>First start of the Editor/or setting sRGB off manually affter each start (sRGB setting off, in contradiction to my graphics settings):&lt;<br/>
<em>1st picture at the bottom, since I’m a new user (means only 1 embedded media)</em></p>
<p>Second start of the Editor/or every start of the Editor (sRGB setting on automatically or manually):<br/>
<em>2nd picture at the bottom, same reason as above</em></p>
<p>Also to make sure, I’m not looking at it wrong in any kind, I checked the image the EditorUI uses for it’s symbols and background and it indeed does look like the first picture is how the editor is supposed to look like:<br/>
<em>3rd picture at the bottom, you know why</em></p>
<p>So basically my question is, did any of you ever have that “problem”, am I misunderstanding something about the use of sRGB in Urho3D? (If that’s the case, it’s still not that practical if the setting doesn’t get saved or automatically assigned “wrongly”)</p>
<p>I’m really sorry for that long post, but I just wanted to make sure I get as detailed as possible. Also, I’m not a native english speaker/writer and apologize for any mistakes.</p>
<p>Thank you very much in advance and I hope you all have a nice day <img alt=":blush:" class="emoji" src="../../../images2/4aa2fc1b9179a94cbcf3e2e00e0d95ba.png" title=":blush:"/></p>
<p>1 embedded media:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="urho3d_editor"><img alt="urho3d_editor" data-base62-sha1="59b1TX1bV3B17Zu32Lna3lgI4iY"  height="500" src="../../../images2/e57b23ab0cc7535c5dcbf3543eebe6d9.png"  width="458"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">urho3d_editor</span><span class="informations">816×889 146 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="1" data-topic="6914" data-username="kidinashell">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/18dd786e9f2182a39c8f20a047aeb2e2.png" width="20"/> kidinashell:</div>
<blockquote>
<p>am I misunderstanding something about the use of sRGB in Urho3D?</p>
</blockquote>
</aside>
<p>sRGB setting in Urho affects <em>only</em> the physical format of back buffer texture.<br/>
Literally <em>nothing</em> in the rest of the engine handles it properly. Sooo… If you want to use sRGB, you need to build your assets around it. I.e. set sRGB in UI texture resource so UI changes are compensated. And in all other color textures as well.</p>
<div class="spoiler">
<p>Incorrect behaviour of sRGB and gamma correction literally triggered me to reimplement Urho renderer from scratch, so it’s kind of sore point for me.</p>
</div>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3482_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">kidinashell</div>
          <div class="post_content">
<p>Ah ok, thank you very much for clarifying that <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/><br/>
So I’ll just work with the setting turned off then. Is it possible to keep the setting true or false without it checking or unchecking it automatically on each exit of the editor?</p>
<p>Edit: For now I’ll just hardcode <strong><code>graphics.sRGB</code></strong> to <strong><code>false</code></strong> in <strong><code>Editor.as</code></strong>, I was just wondering if the saving of the setting is somewhat hinky.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>