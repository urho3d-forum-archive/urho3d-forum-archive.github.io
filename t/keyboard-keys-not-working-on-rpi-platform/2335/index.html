<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Keyboard keys not working on RPI platform</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Keyboard keys not working on RPI platform</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">OMID-313</div>
          <div class="post_content">
<p>Hi all,</p>
<p>I just recently installed Urho3D on Raspberry Pi 3.<br/>
But the problem is that when I run each of the example games (./05_AnimatingScene for example), the games opens and I see the scene, but the keyboard keys don’t work, and I’m not able to move or do anything.<br/>
All I can do is Ctrl+C to quit, which sometimes doesn’t work either!!</p>
<p>How can I solve this !!?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">OMID-313</div>
          <div class="post_content">
<p>Any suggestions !!?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>Ctrl+C is a terminal command. If it sometimes does not work then likely something is wrong with your system. You should test on a fresh install and provide us information on build you are using. What flags you used to build it or if it was build from website, and what distribution is installed on PI. Maybe then someone with right combination can test this and verify if it is broken or not.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I have seen a few users reporting input problem in Urho3D 1.6. I am partly to blame for this. Ever since the SDL 2.0.4 update, I have not actually tested the build on an actual RPI board. My old RPI is now being used as a mini server and I didn’t want to mess with it at the time. Bought myself a brand new RPI 3 last month but I haven’t spent quality time with it yet.  <img alt=":laughing:" class="emoji" src="../../../images2/f1b3f4dd9f845d1069864c322071dffe.png" title=":laughing:"/></p>
<p>I think this is what happened. In the past before SDL 2.0.4 our RPI port still relied on the X11 for the input. After SDL 2.0.4 update, our RPI port does not use xinput anymore, if I recall correctly. It is a side effect from using SDL’s own CMakeLists.txt which auto-configures its configuration file. At that time I thought it is as intended and didn’t investigate it further.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Victor</div>
          <div class="post_content">
<p>Not sure if this is related, however I’ve been experiencing some issues with the EventSystem on Mac specifically where the events do not work… sometimes. UI elements, and everything else will load up at the start of the program, however no events will fire. This is currently a hard issue for me to duplicate since I’ve only seen it happen on OSX, and it doesn’t happen all of the time, just sometimes. Almost like a thread is running in the background and hasn’t fully completed.</p>
<p>Edit: Most of my development is done on a Windows machine which doesn’t seem to have the issue.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">OMID-313</div>
          <div class="post_content">
<p>So, after all these, what can I do !?<br/>
Somebody suggested to check the /dev/input in the logs.<br/>
How can I see the logs of Urho3D !?</p>
<p>Any other suggestions !?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I think I have already given enough pointer on how to troubleshoot the problem. If you still do not understand how to do it then may be you can try the older 1.5 release instead while waiting the devs to fix this issue.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">OMID-313</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5dc21abd616a69d8b82c2d56dfa657a5.png" width="20"/> weitjong:</div>
<blockquote>
<p>I think I have already given enough pointer on how to troubleshoot the problem. If you still do not understand how to do it then may be you can try the older 1.5 release instead while waiting the devs to fix this issue.</p>
</blockquote>
</aside>
<p>Ok. I’ll try version 1.5.</p>
<p>Just a question:<br/>
Which command must be executed instead of the following in the installation?</p>
<pre><code class="lang-auto"></code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">OMID-313</div>
          <div class="post_content">
<p>Ok.<br/>
I installed the version 1.5.<br/>
But now it gives another error :</p>
<pre><code class="lang-auto"></code></pre>
<p>Now what should I do !!?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I just want to add what I have read from SDL readme file for RPI platform.</p>
<h1>[quote]================================================================================<br/>
Features</h1>
<ul>
<li>Works without X11</li>
<li>Hardware accelerated OpenGL ES 2.x</li>
<li>Sound via ALSA</li>
<li>Input (mouse/keyboard/joystick) via EVDEV</li>
<li>Hotplugging of input devices via UDEV</li>
</ul>
<p>[/quote]<br/>
It seems the EVDEV does not pipe those input events correctly into our engine yet. Anyway, SDL 2.0.5 is just out now. Whoever does the SDL version upgrade later can double check this.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Victor</div>
          <div class="post_content">
<p>Ok, so for Mac I discovered something interesting. When the keys aren’t immediately working I noticed that if I wait 10-30 sec the UI and keys will start being responsive. Not sure if this helps, and again, I’ve only seen this so far on Mac, not Windows.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/56d7526156403ea04e6f95c8231fbe4f.png" width="20"/> Victor:</div>
<blockquote>
<p>Ok, so for Mac I discovered something interesting. When the keys aren’t immediately working I noticed that if I wait 10-30 sec the UI and keys will start being responsive. Not sure if this helps, and again, I’ve only seen this so far on Mac, not Windows.</p>
</blockquote>
</aside>
<p>Whatever it is that causing your issue on Mac is off-topic in this thread. I have updated the thread’s subject to make this point clear.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>Did this issue ever get resolved? I’m having trouble - the SDL text input event doesn’t seem to be triggering. (at least OnTextInput isn’t being called in UIElement subclasses)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Nothing has changed since then. I can confirm the issue exists though at the very least, however, I have limited free time now to investigate further and fix it. You are all welcome to give it a try.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>Any suggestions for where/how to start fixing this/ narrowing down the problem?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I have mentioned this before.</p>
<aside class="quote" data-post="10" data-topic="2335">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5dc21abd616a69d8b82c2d56dfa657a5.png" width="20"/> weitjong:</div>
<blockquote>
<p>It seems the EVDEV does not pipe those input events correctly into our engine yet.</p>
</blockquote>
</aside>
<p>The uglier solution is to add back X11 stack just in order to get the keyboard input. Note that this was what we have done in the past version. But I consider that to be a mistake. We should not depend on X11 if I understood the Release Notes from SDL correctly. Perhaps I have a wrong understanding though. The latter can be done by simply flipping a switch in the generated SDL_config.h (I think).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>OK, so I solved the problem! Did some digging around, found this - <a href="https://bugzilla.libsdl.org/show_bug.cgi?id=3469" rel="nofollow noopener">https://bugzilla.libsdl.org/show_bug.cgi?id=3469</a> so I swapped the SDL/src/core/linux folder with the one mercurial are using and rebuilt everything.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Good to know that. Thanks.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>I am having a strange problem with this now. The text input works until either CTRL or ALT are pressed. Once either of these keys has been pressed text input no longer works and the game needs to be closed and opened again to regain text input. Any ideas what could be causing this? Not sure where to look</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>This issue is now fixed in the master branch.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<aside class="quote" data-full="true" data-post="20" data-topic="2335">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5dc21abd616a69d8b82c2d56dfa657a5.png" width="20"/> weitjong:</div>
<blockquote>
<p>This issue is now fixed in the master branch.</p>
</blockquote>
</aside>
<p>I just built from master branch and not sure if keyboard is working (doesn’t seem to be) but mouse definitely isn’t…</p>
<p>Did you test it on a Pi?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Yes, I did test on a RPI 3 this time. Only the keyboard though.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Just tested with the mouse attached. It is not only working on my side but it is hot-pluggable too.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>Do I maybe need to install some evdev or udev libraries on the pi for it to work? I’m still getting neither working</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>Also, what operating system are you running on your Pi?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I am using Raspbian Jessie Lite. The prerequisite software packages are listed in <a href="https://urho3d.github.io/documentation/1.6/_building.html#Building_Prerequisites">https://urho3d.github.io/documentation/1.6/_building.html#Building_Prerequisites</a>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>I never managed to get it working on 1.6 (tried doing everything ‘by the book’ following all instructions on build page), gave up and went back to 1.5 as still the input didn’t work. Since 1.7 came out with a bit in the changelog saying rpi stuff was fixed I thought I would give it a go again. With Raspbian Jesse I had the same problem - input didn’t work in the samples. With Raspbian Stretch (new) there is a more worrying problem. The GLES so on the pi files have been renamed (and changed i presume) to have ‘brcm’ in the name, i.e <a href="http://libbrcmGLES.so" rel="nofollow noopener">libbrcmGLES.so</a> so I get ‘/usr/bin/ld: cannot find -lGLESv2’ type errors when trying to build urho. So optimistically I tried changing <span class="hashtag">#define</span> DEFAULT_EGL and following lines in Source/ThirdParty/SDL/src/video/SDL_egl.c to look for the brcm named files - it had no effect. Not really sure what to try next, would love to get 1.7 going!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Sorry to hear that. Maybe you could try to build a simple SDL app from elsewhere to see or to learn how to get it to work. Urho relies on SDL for its input subsystem.</p>
<p>I haven’t heard of the new Raspbian before. Wonder why they do that.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>I found this as to why it might be:</p>
<p>"As the mesa arm side GL driver is going to become the standard in the future, we’d like to avoid confusion when linking with either the arm side driver (/usr/lib/arm-linux-gnueabihf) or the gpu driver (/opt/vc/lib).</p>
<p>As such applications built to use the gpu driver should now link with <a href="http://libbrcmEGL.so/libbrcmGLESv2.so" rel="nofollow noopener">libbrcmEGL.so/libbrcmGLESv2.so</a> rather than the ambiguous <a href="http://libEGL.so/libGLESv2.so" rel="nofollow noopener">libEGL.so/libGLESv2.so</a> libs." - <a href="https://www.raspberrypi.org/blog/raspbian-stretch/" rel="nofollow noopener">https://www.raspberrypi.org/blog/raspbian-stretch/</a></p>
<p>Also, finally got it building (running rpi-update on Stretch pulled in old name GLES libs which fixed GL build/linking errors) and input working - it turns out all I needed was to add libibus-1.0-dev (labelled as optional in build instructions but I found it not to be optional for RPi with versions of urho3d 1.6+)</p>
<p>While most samples worked fine, 19_VehicleDemo caused a flashing screen (and nothing else) and the ragdoll sample had strangely all the left legs of the dummies stretching out to a point in the sky.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Thanks for the info. Will have a closer look on the Raspbian Stretch when I have extra time. I could be wrong but don’t think ibus package solved your keyboard issue. Probably it is what got installed together as part of the ibus package.</p>
<p>The GPU on the RPI is not as powerful as we want. The artifact you observed is a known limitation.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>We have a new dev branch “upgrade-sdl-2.0.7” which has the attempted fix to get Urho3D/RPI port working for Raspbian Stretch. Can you give the branch a try and report back any issue. Thanks.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>I have just come back to this. I can’t see that dev branch but I assume it was merged into master? I have found that with Urho3D 1.7 and Raspbian Jessie, key down works as it should but the text input stops working after modifiers are pressed (CTRL ALT SHIFT) and only way to get text input after that is to close and open the game. Any ideas where this issue might be coming from? Have you come across this?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Yes, it is in the master branch now. No, I haven’t noticed it on Jessie.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>I’ve just built Urho3D from the master branch on a clean Stretch image and the input (mouse and keyboard) is not working</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>The last SDL upgrade for Raspbian Stretch is more about fixing the video support. I have not experienced any keyboard and mouse input problem whatsoever in my last test. I wish there is more I can help but in this case I have running out of idea. For what it’s worth, I usually use the lite version, boot in text mode and without any DE.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>I’ll try a few things and report back</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>Let me tell you everything I ran on a clean, latest image of stretch lite, if you could reply with all your steps that get it working then hopefully we can get somewhere.<br/>
I did this:<br/>
sudo apt-get update<br/>
sudo apt-get install git<br/>
sudo apt-get install cmake<br/>
sudo apt-get install libibus-1.0-dev<br/>
sudo apt-get install libasound2-dev<br/>
git clone <a  rel="nofollow noopener">https://github.com/urho3d/Urho3D.git</a><br/>
cd Urho3D<br/>
./cmake_rpi.sh …/build<br/>
cd …/build<br/>
make -j4</p>
<p>I then launch samples and the input does not work</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Immediately I can tell you one big difference. I cross-compiled to target RPI instead of building it natively on the device itself. I installed all the prerequisite packages as listed in the online documentation. You can get a hint of the list using this line.</p>
<aside class="onebox githubblob">
<header class="source">
<a  rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a  rel="nofollow noopener" target="_blank">urho3d/rpi-sysroot/blob/sysroot-update-trigger/Rakefile#L35</a></h4>
<pre class="onebox"><code class="lang-rb"><ol class="start lines" start="25" style="counter-reset: li-counter 24 ;">
<li># Usage: NOT intended to be used manually</li>
<li>desc 'Update Raspbian sysroot in the master branch'</li>
<li>task :sysroot_update do</li>
<li>system 'sudo apt-get update -q -y &amp;&amp; sudo apt-get install -q -y --no-install-recommends kpartx qemu binfmt-support qemu-user-static' or abort 'Failed to install dependencies'</li>
<li>system 'git clone --depth=1 https://github.com/urho3d/rpi-sysroot.git' or abort 'Failed to clone existing sysroot'</li>
<li>system 'wget https://downloads.raspberrypi.org/raspbian_lite_latest -O raspbian.zip' or abort 'Failed to download latest Raspbian image'</li>
<li>system 'echo Unzipping... &amp;&amp; unzip -qq raspbian.zip &amp;&amp; rm raspbian.zip' or abort 'Failed to unzip Raspbian image'</li>
<li>system 'sudo kpartx -a -v *.img &amp;&amp; sleep 5 &amp;&amp; sudo mount -o loop /dev/mapper/loop0p2 /mnt' or abort 'Failed to create and mount loop device'</li>
<li>system 'echo Syncing... &amp;&amp; sudo rsync -a --delete -q --exclude .git --exclude README.md /mnt/ rpi-sysroot &amp;&amp; sudo chown -R $USER: rpi-sysroot &amp;&amp; cp /usr/bin/qemu-arm-static rpi-sysroot/usr/bin &amp;&amp; ruby -i -pe "gsub(/^/, %q{#})" rpi-sysroot/etc/ld.so.preload' or abort 'Failed to rsync new sysroot'</li>
<li>system "bash -c 'basename {*,}.img' |tr -d '\n' |ruby -i -le 'version = STDIN.read; puts ARGF.read.gsub(/\\(.*?\\)/m, %Q{(\#{version})})' rpi-sysroot/README.md" or abort 'Failed to update image version'</li>
<li class="selected">system 'echo Installing... &amp;&amp; for f in dev dev/pts dev/shm proc run sys; do sudo mount --bind /$f rpi-sysroot/$f; done &amp;&amp; sudo chroot rpi-sysroot /bin/bash -c \'apt-get update &amp;&amp; apt-get -q -y upgrade &amp;&amp; apt-get -q -y install libx11-dev libasound2-dev libpulse-dev libdbus-1-dev libreadline6-dev libudev-dev libevdev2\' &amp;&amp; for f in dev/pts dev/shm dev proc run sys; do sudo umount rpi-sysroot/$f; done' or abort 'Failed to install prerequisite software packages in new sysroot'</li>
<li>system 'sudo umount /mnt &amp;&amp; sleep 5 &amp;&amp; sudo kpartx -d *.img &amp;&amp; rm *.img' or abort 'Failed to unmount loop device'</li>
<li>system 'sudo chown -R $USER: rpi-sysroot' or abort 'Failed to change file ownership'</li>
<li>`find rpi-sysroot/usr/lib/arm-linux-gnueabihf -type l |xargs ls -l |grep ' /'`.split("\n").each { |l| link = / ([^ ]+) -&gt; ([^ ]+)/.match l; system "ln -sf #{link[2].sub '/', '../../../'} #{link[1]}" } and system 'ln -sf ld-linux-armhf.so.3 rpi-sysroot/lib/ld-linux.so.3' or abort 'Failed to fix symbolic links'</li>
<li>system "echo Committing... &amp;&amp; cd rpi-sysroot &amp;&amp; git config user.name '#{ENV['GIT_NAME']}' &amp;&amp; git config user.email '#{ENV['GIT_EMAIL']}' &amp;&amp; git remote set-url --push origin https://#{ENV['GH_TOKEN']}@github.com/urho3d/rpi-sysroot.git &amp;&amp; git add -Af . &amp;&amp; rm -rf * &amp;&amp; git checkout -- README.md opt/vc usr/include usr/lib lib &amp;&amp; git add -A . &amp;&amp; ( git commit -q -m \"Travis CI: Raspberry Pi sysroot update at #{Time.now.utc}.\" || true) &amp;&amp; git push -q &gt;/dev/null 2&gt;&amp;1" or abort 'Failed to push new sysroot'</li>
<li>end</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>Having said that, building natively on a device should work too provided all the prerequisite packages are installed. And probably I don’t have the time to repeat again all the steps that I have taken. Perhaps it is just me but I don’t think there is anything special about those steps. It is almost like how I set up another Linux VM from scratch.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">miz</div>
          <div class="post_content">
<p>Once I install those additional libs things work! It’s a case of some ‘optional’ libraries (as listed on the building urho3d page) aren’t so optional I suppose.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Glad to hear that. If you can pinpoint exactly what is/are the non optional then we can update the doc accordingly.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>