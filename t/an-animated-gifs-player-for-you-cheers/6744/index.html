<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>An Animated Gifs Player for You, Cheers!</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">An Animated Gifs Player for You, Cheers!</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1573_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">DinS</div>
          <div class="post_content">
<p>While I am working on a project with Urho3D, I have found there’s no built-in way to play animated gifs, so I write my own. Since this is a general problem, I’d like to share my work with the community.</p>
<ol>
<li>
<p>Overview<br/>
In the zip file, which can be found at the end of this post, there’re 5 files.<br/>
The AnimatedGif.h/cpp defines a new type of Resource. It uses <a href="https://github.com/hidefromkgb/gif_load" rel="noopener nofollow ugc">hidefromkgb’s gif_load.h</a> (public domain C library) to decode the gif.<br/>
The FrameAnimation.h/cpp defines a new type of component. It uses AnimatedGif to play the animation.</p>
</li>
<li>
<p>Usage<br/>
(1) copy the files under the same folder and add to your project. If you want to place them separately, change the <span class="hashtag">#include</span> accordingly.<br/>
(2) register the types before use, for example in the constructor of your application, write<br/>
AnimatedGif::RegisterObject(context);<br/>
FrameAnimation::RegisterObject(context);<br/>
(3) code as if they are Urho3D built-in types. For example:<br/>
//Setup 2D Scene…<br/>
auto pPic = _gameScene-&gt;CreateChild(“test_gif”);<br/>
pPic-&gt;SetPosition2D(0, 0);<br/>
auto pFrAni = pPic-&gt;CreateComponent&lt; FrameAnimation &gt;();<br/>
auto pGif = GetSubsystem&lt; ResourceCache &gt;()-&gt;GetResource&lt; AnimatedGif &gt;(“Data/Urho2D/test.gif”);<br/>
pFrAni-&gt;SetGif(pGif);</p>
</li>
</ol>
<p>Check this gif for result. Each time I click the button, a new gif will be created.<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="DemonGif"><img alt="DemonGif" data-base62-sha1="azei6n7EWzqX1m8WF436vQzIDli"  height="406" src="../../../images2/8f81e7075012a08ca21ee0c737f792f8.gif" width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">DemonGif</span><span class="informations">1938×1142 2.38 MB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br/>
(browser may show the gif slower than normal)</p>
<ol start="3">
<li>
<p>Notice<br/>
(1) if the gif is large, consider doing a backgroundloading with resource cache first.<br/>
(2) MSVC user: since it uses a C library, you may need to change IDE grammar check from C++ to C.<br/>
(3) MSVC user: there’re a lot of comments in CHINESE, which is my mother tongue. They are mostly about background knowledge on the media format, rationale and C library usage. If you just want to play a gif, don’t bother. But you need to change the encoding from UTF-8 to UTF-8 BOM, or else MSVC will output strange errors. Personally I think it’s a flaw in the compiler. Apple Clang and g++ don’t have this issue. Another way is to just remove all comments.</p>
</li>
<li>
<p>Download<br/>
The forum doesn’t allow zip file uploading, so I have put the file on my website for your access.<br/>
<a href="https://dins.site/wp-content/uploads/2021/03/gif-addon.zip" rel="noopener nofollow ugc">https://dins.site/wp-content/uploads/2021/03/gif-addon.zip</a></p>
</li>
</ol>
<p>The codes are released under MIT license.<br/>
Hope this can help some people in the future.<br/>
Cheers! <img alt=":grinning:" class="emoji" src="../../../images2/8255629c43f2fe9fa2eb9638b63603d8.png" title=":grinning:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>If I remember correctly, there was a gif texture mapping written by some one…  Maybe see Lumak examples. It might have that.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>