<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Embedding Urho3D</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Embedding Urho3D</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<p>Hello,</p>
<p>Thinking how could I help this community with my current knowledge. I came to apply <a href="https://www.yoctoproject.org" rel="nofollow noopener">yocto</a>.</p>
<p>It could not sound familiar to people who is not into embedded linux. Summarizing a lot, this is a way to transparently crosscompile your project to any Linux embedded platform regardless of the compiler/architecture/soc. Somehow if there is a Linux kernel that runs the <a href="https://www.yoctoproject.org/software-overview/downloads" rel="nofollow noopener">platform</a> you can easily port your project into.</p>
<p>So I started playing, without major patching I could create a recipe(which is more merit of urho3d build system) which builds the whole Urho3D engine and embeds into a Linux Image. So ideally Urho3d engine could be run in any platform that there exists a yocto bsp layer for it.</p>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/298b47bcb25b5f93b2f65fdd18e4cc1a.ico" width="32"/>
<a href="https://github.com/urnenfeld/meta-urho3D" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="420" src="../../../images2/8f7081dae7cf4da4d3a964a426c02547.png" width="420"/>
<h3><a href="https://github.com/urnenfeld/meta-urho3D" rel="nofollow noopener" target="_blank">urnenfeld/meta-urho3D</a></h3>
<p>Yocto layer for Urho3D game engine based recipes. Urho3D is a free lightweight, cross-platform 2D and 3D game engine implemented in C++ and released under the MIT license. - urnenfeld/meta-urho3D</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>The typical development goes first in a qemux86 virtual machine, and then you move to real HW. On this virtual environment unfortunately, the sample binaries does not run(Illegal Instruction). I kow the reasons, I need a bit of digging the urho3d build system, and later on will get more complicated when we get closer to the metal. But this is not the main intention of this post.</p>
<p>Eventually if this exercise succeeds I was thinking on a kind of Linux Distro targeted/optimized to Urho3D and Urho3D based games… A splash screen at boot up and ASAP going to some game selector/installer… “The UrhoBox” !?.. ok, some things might be utopic here…</p>
<p>The unique question would be, Is this something that catches the attention of the community?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>It sounds interesting to me, although I have never heard the Yocto project before. Currently Urho3D can already cross-compile to RPI and any generic ARM platforms, so I don’t think it will be a herculean task to make it cross-compile for other target triplet. I would like to contribute (on my spare time), if you need help.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<p><span class="mention">@weitjong</span> With yocto this “ARM” support could be more <em>specific or Normalized</em>. I mean, urho3d may run in a rPI but maybe not in a NxP i.MX8 Sabre Board. Despite both being ARM.</p>
<p>In my development I am using a virutal target (a modified qemux86, which emulates a intel… erm… Pentium III). Binaries are deployed, but Urho3d tends to generate SSE2 code, which creates illegal instructions on the virtual target. So some help on what makes the build system decide to use SSE2 or not would be useful.</p>
<p>As well this might not be the place to track this… I could create tickets in the github then people could comment on them.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Earlier I mentioned that currently Urho3D build system can already cross-compile to generic ARM platforms, although it is only been tested on ODROID-C2 (ARM64) board and ODROID-X2 board by one or two users in the past. I believe our build system is capable of targeting any triplets like I said earlier. One just needs to provide the right mix of build options with the right cross-compiling toolchain. As long the boards run with Linux on ARM processor then it should be good to go.</p>
<p>As for the SSE SIMD instruction support, without looking at the build script now I think it should be auto-detected and configured accordingly. If the detection is wrong then you should be able to override it by using the <code>URHO3D_SSE</code> option. However, on 64-bit Intel platform this option cannot be turned off. Perhaps, what you need to tune is the compiler flags to target a specific “-march”. See <code>URHO3D_DEPLOYMENT_TARGET</code> build option for more detail.</p>
<p>HTH.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="4" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8c3888d68a9e52e853f0724aae6cefb6.png" width="20"/> weitjong:</div>
<blockquote>
<p>although it is only been tested on ODROID-C2 (ARM64) board and ODROID-X2 board</p>
</blockquote>
</aside>
<p>This is already great, a good point and reference. After the qemux86 my plan was going for the rPi, the odroids should be next then.</p>
<aside class="quote no-group" data-post="4" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8c3888d68a9e52e853f0724aae6cefb6.png" width="20"/> weitjong:</div>
<blockquote>
<p>I believe our build system is capable of targeting any triplets like I said earlier. One just needs to provide <strong>the right mix of build options</strong> with the right cross-compiling toolchain.</p>
</blockquote>
</aside>
<p>This is where yocto could help. Currently the <a href="https://github.com/urnenfeld/meta-urho3D/blob/master/recipes-games/urho3D/urho3d_git.bb" rel="nofollow noopener">recipe</a> is very basic, just builds Urho3D. When it is mature enough, there would be different customization for each board(MACHINE) supported. So these <em>right mix of build options</em> for each board would be clearly listed and automatized in the yocto recipe, and could be included in a Linux Embedded image.</p>
<p>Let me clarify this is not impacting Urho3D build system at all. It is an external process/tool that lets you fetch/configure/builds the code, letting you tweak every step…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="4" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8c3888d68a9e52e853f0724aae6cefb6.png" width="20"/> weitjong:</div>
<blockquote>
<p>you should be able to override it by using the <code>URHO3D_SSE</code> option</p>
</blockquote>
</aside>
<p>Yep that was it, at least for <a href="https://github.com/urnenfeld/meta-urho3D/commit/3c1c87ba0ebac7a451a8bd60e4383bf84a60c8a1#diff-35ab523fcbdee8ec0c748e3923902ba0R23" rel="nofollow noopener">this target platform</a>:</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot_20190708_223701.png"><img alt="Screenshot_20190708_223701" data-base62-sha1="bLkfdvjxe76QEcubHsJDp7hFbQE"  height="500" src="../../../images2/6412f9be4c05e4ec12787521c6b1e1cf.png"  width="644"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot_20190708_223701.png</span><span class="informations">1028×797 138 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="1" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>I was thinking on a kind of Linux Distro targeted/optimized to Urho3D and Urho3D based games… A splash screen at boot up and ASAP going to some game selector/installer… “The UrhoBox” !?</p>
</blockquote>
</aside>
<p>Sounds like a cool project. How about calling it <a href="http://www.mikseri.net/artists/urho/evil-shark/362081/" rel="nofollow noopener"><strong>The Fishmaster</strong></a>? <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Or simply <a href="https://en.wiktionary.org/wiki/fin" rel="nofollow noopener">the <em>Fin</em></a>?<br/>
It could have 3D-printed standing case inspired in shape by Urho’s back fin, like an organic Wii. The name would also be referencing <span class="mention">@cadaver</span>’s nationality (in <a href="https://en.wiktionary.org/wiki/Fin" rel="nofollow noopener">several</a> non-English languages) <em>and</em> French people would be confused as it boots. Several other meanings of the word:</p>
<ul>
<li>black</li>
<li>classy</li>
<li>purpose</li>
</ul>
<p><span class="mention">@urnenfeld</span> You may be interesting in this <a href="https://gitlab.com/luckeyproductions" rel="nofollow noopener">trove of bugs</a> for testing purposes.  <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="8" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/cc02e9a74eb373846c1bf6c3d6390d75.png" width="20"/> Modanung:</div>
<blockquote>
<p>You may be interesting in this <a href="https://gitlab.com/luckeyproductions" rel="nofollow noopener">trove of bugs</a> for testing purposes</p>
</blockquote>
</aside>
<p>These are your games aren’t they??</p>
<p>My roadmap is as follows:</p>
<ol>
<li>Deploy on Real HW (rPI)</li>
<li>Define a format to Define &amp; Describe a Game</li>
<li>Develop some kind of game Selector/Launcher (Previous point would be its input)</li>
<li>Splash screen (with name and art)</li>
</ol>
<p>Feedback is really welcome for second and third point.</p>
<aside class="quote no-group" data-post="8" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/cc02e9a74eb373846c1bf6c3d6390d75.png" width="20"/> Modanung:</div>
<blockquote>
<p><em>and</em> French people would be confused as it boots</p>
</blockquote>
</aside>
<p>And mines (spanish) <img alt=":smile:" class="emoji" src="../../../images2/6c96d67462c17dd73ef2e4b512b2dc07.png" title=":smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Here’s a quick conceptual render to get a impression of what the Fin could look like:</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="fin.png"><img alt="fin" data-base62-sha1="nwFxYjCX5mF30UcgY8i8VMIHrHG"  height="239" src="../../../images2/a3012558f969c84b90659280f7fff54b.png"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">fin.png</span><span class="informations">960×333 320 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<aside class="quote no-group" data-post="9" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>These are your games aren’t they??</p>
</blockquote>
</aside>
<p>There has been some collaboration, but it’s mostly an accumulation of my doing, yes. All code is licensed under GPL, assets are CC-BY-SA.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>I like the design, but I think I’d go with rotating the board inside so that the whole thing is only as wide as the Fin (though the ports might ruin the appearance, I’m not sure).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<ol>
<li>Deploy on really bad hardware (it helps show up performance bottlenecks)</li>
<li>Have some “ideas guy” describe a game, in great detail, and capture its requirements</li>
<li>Define your coding standards and extract architectural requirements from the game design requirements</li>
<li>Design your code architecture before you write a single line of code.</li>
<li>Implement your architecture using placeholder/imposter methods.</li>
<li>Complete your implementation iteratively, replacing placeholders with working code, while testing periodically</li>
<li>Did I mention version control / making backups?</li>
<li>Get some peer feedback along the way, it can help correct your course and save time and money.</li>
</ol>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="12" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/156e8a31e616365455553a2d96d6710d.png" width="20"/> Leith:</div>
<blockquote>
<ul>
<li>Deploy on really bad hardware (it helps show up performance bottlenecks)</li>
</ul>
</blockquote>
</aside>
<p>As bad as even I am not sure if will ever support it … (RaspPi Zero W)</p>
<aside class="quote no-group quote-modified" data-post="12" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/156e8a31e616365455553a2d96d6710d.png" width="20"/> Leith:</div>
<blockquote>
<ul>
<li>Have some “ideas guy” describe a game, in great detail, and capture its requirements<br/>
[…]</li>
<li>Get some peer feedback along the way, it can help correct your course and save time and money.</li>
</ul>
</blockquote>
</aside>
<p>I encourage anyone to filll PRs or Issues in the <a href="https://github.com/urnenfeld/meta-urho3D" rel="nofollow noopener">meta-urho3d</a> for such feedback</p>
<aside class="quote no-group" data-post="12" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/156e8a31e616365455553a2d96d6710d.png" width="20"/> Leith:</div>
<blockquote>
<ul>
<li>Define your coding standards and extract architectural requirements from the game design requirements</li>
<li>Design your code architecture before you write a single line of code.</li>
<li>Implement your architecture using placeholder/imposter methods.</li>
<li>Complete your implementation iteratively, replacing placeholders with working code, while testing periodically</li>
<li>Did I mention version control / making backups?</li>
</ul>
</blockquote>
</aside>
<p>Well, that applies for any Software Development <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
<hr/>
<p>For the ones following I moved to a branch called <a href="https://github.com/urnenfeld/meta-urho3D/tree/pyro" rel="nofollow noopener">pyro</a> (yocto convention) for the rpi0 development. Despite it is trying to compile and passed through the configuration stage, I have my doubts as urho3d buildsystem is trying to crosscompile while yocto already takes care of this.</p>
<p>For example, yocto interprets that everyting behind that cmake is meant to be crosscompiled, but there are things inside the project which looks to be meant to be build natively(LUA, Angelscript?). <strong>It would be useful to know if these 2 parts can be somehow separated or launched separatedly.</strong></p>
<p>As for name the of all this <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/> <em>if it ever reaches something</em>…</p>
<p>One of main reasons of the exercise, was to <strong>promote</strong> the engine. Therefore I would have a strong position to keep the word <em>urho</em> inside the name of the project.<br/>
As there would be other elements &amp; entities around this (game selector, some kind of lifecycle), all the good ideas risen here could have its place, even for codenames or versioning… at a last step it could be as well voted <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<p>I think my Raspberry PI B+ is dead. Anyway as I said, I started with:</p>
<aside class="quote no-group" data-post="13" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>As bad as even I am not sure if will ever support it … (RaspPi Zero W)</p>
</blockquote>
</aside>
<p>But I bought rasp0 in the past with domotics intentions, therefore I had not covered the mini-HDMI adapter required.</p>
<p>I mention because I could generate an <strong>image with the engine library and some examples</strong>, which was kind of the first milestone to evaluate if all this was feasible or not… but hey I cannot test it.</p>
<p>So while the adapter arrives, if someone owns rasp 0w and wants to test, I can upload the image somewhere. (I would do it anyways but villages here just get ADSL with 0.6MB/s upload…)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<p>I don’t have a rpi0 but I have several other of those Singleboard-Computers (rpi 3b+,odroid-c2 and a couple of different orange pis). So if i can help with those devices maybe at a later stage, I would be happy to do so.</p>
<p>EDIT: Actually I compiled urho3d on odroid-c2 and orange pi pc2 a couple of days ago which worked out of the box (without anglescript and another cmake-switch) and I got 8fps on both (both were not accelerated…)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="15" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/4066e49439adaebc8e20a6a1b2981136.png" width="20"/> dertom:</div>
<blockquote>
<p>Actually I compiled urho3d on odroid-c2 and orange pi pc2 a couple of days ago which worked out of the box (without anglescript and another cmake-switch) and I got 8fps on both (both were not accelerated…)</p>
</blockquote>
</aside>
<p>Can you share the actual switches?</p>
<aside class="quote no-group" data-post="15" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/4066e49439adaebc8e20a6a1b2981136.png" width="20"/> dertom:</div>
<blockquote>
<p>I got 8fps on both (both were not accelerated…)</p>
</blockquote>
</aside>
<p>Do you remember what got these 8fps? a sample? a particular game?<br/>
This is another feasibility fact…</p>
<p>I believe my work is linking to the proper broadcom accelerated libs…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<aside class="quote no-group" data-post="16" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>Can you share the actual switches?</p>
</blockquote>
</aside>
<p>cmake -DURHO3D_ANGELSCRIPT=0 -DURHO3D_TOOLS=0 [PATH_TO_URHO3D_SRC]</p>
<p>(You can take out more…you know the docs with <a href="https://urho3d.github.io/documentation/1.7/_building.html" rel="nofollow noopener">all cmake-switches</a>,right?)</p>
<aside class="quote no-group" data-post="16" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>Do you remember what got these 8fps? a sample? a particular game?</p>
</blockquote>
</aside>
<p>It was the sprite demo, as well as the physics-demo. I actually didn’t test too much. I was mostly interested if it works and I’m more interested to test it in headless-mode as server…(someday <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/> )</p>
<p>About the acceleration: I’m using armbian-imgs as OS and those did not had the mali-graphics-drivers included. The official odroid-c2 ubuntu have those but I didn’t had time to test those…maybe I will give it a try this weekend…<br/>
(EDIT: forget it. I just saw that I installed armbian again…this is because I’m experimenting kubernets to cluster my mini-computers and I want to have the same OS-Distri on each…nonetheless once there is something to test…tell me. I got lots of SD-Cards <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/> )</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="17" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/4066e49439adaebc8e20a6a1b2981136.png" width="20"/> dertom:</div>
<blockquote>
<p>you know the docs with <a href="https://urho3d.github.io/documentation/1.7/_building.html" rel="nofollow noopener">all cmake-switches</a>,right?</p>
</blockquote>
</aside>
<p>Yeah, I actually expected more of -DARM … are you compiling in target then?</p>
<aside class="quote no-group" data-post="17" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/4066e49439adaebc8e20a6a1b2981136.png" width="20"/> dertom:</div>
<blockquote>
<p>It was the sprite demo, as well as the physics-demo</p>
</blockquote>
</aside>
<p>So I’ll set them for benchmarking <a href="https://github.com/urnenfeld/meta-urho3D/commit/e3a2335d6d668b47fed9ee8fc099367ab67361a1" rel="nofollow noopener">from now on</a> <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>I have a Raspberry Pi 0w. If I can find a spare micro SD card I’ll test it for you if you upload the image.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<aside class="quote no-group" data-post="18" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>Yeah, I actually expected more of -DARM … are you compiling in target then?</p>
</blockquote>
</aside>
<p>Yes, I compile on the device…I tried to cross-compile once (some time ago) but did not succeed,…the only problem with compiling on the device was assimp that seems to be too much for my little device <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/>  Therefore I disabled the tools. Anglescript had millions of strange errors…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="19" data-topic="5222" data-username="SirNate0">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/fb52f23a6782e890737d90432eac55f2.png" width="20"/> SirNate0:</div>
<blockquote>
<p>I have a Raspberry Pi 0w. If I can find a spare micro SD card I’ll test it for you if you upload the image.</p>
</blockquote>
</aside>
<p>That’s great!</p>
<blockquote>
<p>6388d8af60482d2205642a78fbff5f39  core-image-urho3d-raspberrypi0-wifi-20190724161747.7z</p>
</blockquote>
<p><a href="http://depositfiles.com/files/404b6knyl" rel="noopener nofollow ugc">Get it here</a>, <strong>please check the md5</strong>, is the first time I use that service…</p>
<p>It should load weston with a small terminal, there you should be able to load one of the examples. Note only  00, 01, 04 are currently in the image. There should be no root password.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>You could try building with AS_MAX_PORTABILITY defined (not a CMake switch but a preprocessor define) to see if that resolves the millions of strange errors building Angel Script.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<p><span class="mention">@urnenfeld</span><br/>
I finally got urho3d-samples to run using the gpu (mali450). Here are some benchmarks, just in case you are interested:</p>
<ul>
<li>03 - Sprites 35fps</li>
<li>11 - Phyiscs (before shooting blocks:42 afterwards a steady 27 no matter how much I push the system)</li>
<li>13 - Ragdoll 43</li>
<li>18 - Character 42</li>
<li>19 - Vehicle 25</li>
<li>25 - Particles 60</li>
</ul>
<p><span class="mention">@SirNate0</span> Setting AS_MAX_PORTABILITY preprocessor-definition doesn’t change a thing. Here the error-log with ‘VERBOSE=1 make’. Maybe you can see something out of it.</p>
<pre><code class="lang-auto">[ 63%] Building CXX object Source/Urho3D/CMakeFiles/Urho3D.dir/AngelScript/AudioAPI.cpp.o
cd /home/odroid/_dev/extprojects/_build/Urho3D/Source/Urho3D &amp;&amp; /usr/bin/c++  -DGENERIC_ARM -DHAVE_SINCOSF -DHAVE_STDINT_H -DSTBI_NEON -DTOLUA_RELEASE -DURHO3D_ANGELSCRIPT -DURHO3D_FILEWATCHER -DURHO3D_IK -DURHO3D_IS_BUILDING -DURHO3D_LOGGING -DURHO3D_LUA -DURHO3D_NAVIGATION -DURHO3D_NETWORK -DURHO3D_PHYSICS -DURHO3D_PROFILING -DURHO3D_STATIC_DEFINE -DURHO3D_THREADING -DURHO3D_URHO2D -DURHO3D_WEBP -I/home/odroid/_dev/extprojects/_build/Urho3D/Source/Urho3D -I/home/odroid/_dev/extprojects/Urho3D/Source/Urho3D -I/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty -I/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/Bullet -I/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/Detour -I/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/Lua  -DAS_MAX_PORTABILITY=1 -std=gnu++11 -Wno-invalid-offsetof  -fsigned-char -pipe -march=armv8-a -pthread -fdiagnostics-color=auto -include "/home/odroid/_dev/extprojects/_build/Urho3D/Source/Urho3D/Precompiled.h" -O3 -DNDEBUG   -o CMakeFiles/Urho3D.dir/AngelScript/AudioAPI.cpp.o -c /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/AudioAPI.cpp
In file included from /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/../AngelScript/../AngelScript/Addons.h:35:0,
                 from /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/../AngelScript/APITemplates.h:25,
                 from /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/AudioAPI.cpp:25:
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/angelscript.h:45:0: warning: "AS_MAX_PORTABILITY" redefined
 #define AS_MAX_PORTABILITY

&lt;command-line&gt;:0:0: note: this is the location of the previous definition
In file included from /home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:31:0,
                 from /home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/angelscript.h:1967,
                 from /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/../AngelScript/../AngelScript/Addons.h:35,
                 from /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/../AngelScript/APITemplates.h:25,
                 from /home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/AudioAPI.cpp:25:
/home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/../AngelScript/APITemplates.h: In function ‘void Urho3D::RegisterSubclass(asIScriptEngine*, const char*, const char*)’:
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrap16.h:2916:67: error: expected primary-expression before ‘)’ token
 #define WRAP_OBJ_LAST(name)       (::gw::id(name).TMPL ol&lt; name &gt;())
                                                                   ^
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:74:102: note: in expansion of macro ‘WRAP_OBJ_LAST’
 #define RegisterObjectMethodFasCALL_CDECL_OBJLAST(clsdcl,decl,fun) RegisterObjectMethod(clsdcl,decl, WRAP_OBJ_LAST(fun), asCALL_GENERIC); //assert(r &gt;= 0);
                                                                                                      ^~~~~~~~~~~~~
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:70:64: note: in expansion of macro ‘RegisterObjectMethodFasCALL_CDECL_OBJLAST’
 #define RegObjectMethodIndirect(clsdcl,decl, F, clsfunc, kind) RegisterObjectMethod##F##kind (clsdcl,decl,clsfunc) // ... = decl or it = decl, cls for asCall_ThisCall
                                                                ^~~~~~~~~~~~~~~~~~~~
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:68:35: note: in expansion of macro ‘RegObjectMethodIndirect’
 #define RegisterObjectMethod(...) RegObjectMethodIndirect(__VA_ARGS__)
                                   ^~~~~~~~~~~~~~~~~~~~~~~
/home/odroid/_dev/extprojects/Urho3D/Source/Urho3D/AngelScript/../AngelScript/APITemplates.h:224:13: note: in expansion of macro ‘RegisterObjectMethod’
     engine-&gt;RegisterObjectMethod(classNameT, declReturnU.CString(), asFUNCTION((RefCast&lt;T, U&gt;)), asCALL_CDECL_OBJLAST);^M
             ^~~~~~~~~~~~~~~~~~~~
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrap16.h:2916:67: error: expected primary-expression before ‘)’ token
 #define WRAP_OBJ_LAST(name)       (::gw::id(name).TMPL ol&lt; name &gt;())
                                                                   ^
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:74:102: note: in expansion of macro ‘WRAP_OBJ_LAST’
 #define RegisterObjectMethodFasCALL_CDECL_OBJLAST(clsdcl,decl,fun) RegisterObjectMethod(clsdcl,decl, WRAP_OBJ_LAST(fun), asCALL_GENERIC); //assert(r &gt;= 0);
                                                                                                      ^~~~~~~~~~~~~
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:70:64: note: in expansion of macro ‘RegisterObjectMethodFasCALL_CDECL_OBJLAST’
 #define RegObjectMethodIndirect(clsdcl,decl, F, clsfunc, kind) RegisterObjectMethod##F##kind (clsdcl,decl,clsfunc) // ... = decl or it = decl, cls for asCall_ThisCall
                                                                ^~~~~~~~~~~~~~~~~~~~
/home/odroid/_dev/extprojects/_build/Urho3D/include/Urho3D/ThirdParty/AngelScript/wrapmacros.h:68:35: note: in expansion of macro ‘RegObjectMethodIndirect’
 #define RegisterObjectMethod(...) RegObjectMethodIndirect(__VA_ARGS__)
                                   ^~~~~~~~~~~~~~~~~~~~~~~

</code></pre>
<p>Maybe you know what’s going on there</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="23" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/4066e49439adaebc8e20a6a1b2981136.png" width="20"/> dertom:</div>
<blockquote>
<p>Maybe you know what’s going on there</p>
</blockquote>
</aside>
<p>I am not sure the cause, but I am sure I faced this error. It got solved when I dealt with another issue regarding <a href="https://github.com/urnenfeld/meta-urho3D/blob/e3a2335d6d668b47fed9ee8fc099367ab67361a1/recipes-games/urho3D/urho3d_git.bb#L13-L29" rel="nofollow noopener">system headers inclusion</a>…</p>
<p>Out of curiosity which gcc version is that <em>/usr/bin/c++</em>?</p>
<div class="spoiler">
<p>…hinting that maybe the crosscompiled compiler version is too low to handle such c++ templating…</p>
</div>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<aside class="quote no-group" data-post="24" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/d36963c2a9b4f8f359a407e59eafd546.png" width="20"/> urnenfeld:</div>
<blockquote>
<p>Out of curiosity which gcc version is that <em>/usr/bin/c++</em> ?</p>
</blockquote>
</aside>
<p>c++ (Ubuntu/Linaro 7.4.0-1ubuntu1~18.04.1) 7.4.0</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>One thing you could try is editing <code>ThirdParty/AngelScript/include/wrap16.h</code> at the bottom to force <code>TMPL</code> to be defined as <code>template</code> (remove the <span class="hashtag">#if</span> condition around line 2908. Based on <a href="https://stackoverflow.com/questions/3505713/c-template-compilation-error-expected-primary-expression-before-token" rel="nofollow noopener">this Stack Overflow question</a>, it seems that the error message generated can be caused by not including that keyword in some situations.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<p><span class="mention">@SirNate0</span>: This did the job <img alt=":+1:" class="emoji" src="../../../images2/44789f9390639d4847fd0de0a6ae5879.png" title=":+1:"/><br/>
EDIT: The compilation stalled compiling the NavigationAPI…this seems similiar to compiling assimp on the device itself. That also stalled…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>Excellent! Could you make an issue an GitHub describing the issue and solution so others will know about it until the issue can be fixed in master (if I had to guess, the <span class="hashtag">#if</span> is actually backwards, and the <code>#define TMPL template</code> should be there generally correct one, but it would require testing on more compilers to be sure).</p>
<p>And <span class="mention">@urnenfeld</span> regarding testing the image, after the color gradient and yocto boot images I just end up with “INIT: Id “s0” respawning too fast: disabled for 5 minutes” displayed on the console.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="28" data-topic="5222" data-username="SirNate0">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/fb52f23a6782e890737d90432eac55f2.png" width="20"/> SirNate0:</div>
<blockquote>
<p>I just end up with “INIT: Id “s0” respawning too fast: disabled for 5 minutes” displayed on the console.</p>
</blockquote>
</aside>
<p>Hi, I got the adapter &amp; got to the same point. You should be able to hit ATL+F1 and make a login. But anyways I need to dig more as weston is not launching in tty2…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2552_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">glitch-method</div>
          <div class="post_content">
<p>this is a fantastic idea, I have recently also considered building a distro to explore using kernel modules to drive a game. I’ll be following this project closely!</p>
<p>I haven’t used yocto, but in this case (arm boards) it’s probably the best method.</p>
<p>I’ll also test as i’m able…I have a rpi2b and a rpi3b. the rpi0 will definitely be the real test though.<br/>
also, I thought broadcom was still sitting on the rpi gpu libs?</p>
<p>as a baseline, armbian is a good choice, I expect ubuntu will run slightly slower. if you want to see how fast it /can/ run, give void linux (cough musl cough) a try.</p>
<p>regarding compiling on silly targets like rpi0, and the ld: s0 issue, trying to compile statically (cough musl cough) may indicate more (assuming your linker will complain…)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="30" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/c41ee70f636e2e0776f60ded73b0bae1.png" width="20"/> glitch-method:</div>
<blockquote>
<p>regarding compiling on silly targets like rpi0</p>
</blockquote>
</aside>
<p>Remember the <em>promotion</em> background intention. On that type of HW we can really show what the engine is capable of.</p>
<p>Given the yocto ecosystem, building to another target of the same family will be almost straight forward. Don’t worry about this part, if this succeeds there will be builds for the rpi2 pi3 and rpi4 <img alt=":smile:" class="emoji" src="../../../images2/6c96d67462c17dd73ef2e4b512b2dc07.png" title=":smile:"/> (my only hurdle is that they take hours to finish, and ~50GB of disk each)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2552_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">glitch-method</div>
          <div class="post_content">
<p>oh definitely. I was calling the rpi0 itself silly, not building for it. <img alt=":stuck_out_tongue_winking_eye:" class="emoji" src="../../../images2/1d9aa67a4c1c349707713bc80f26a432.png" title=":stuck_out_tongue_winking_eye:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<aside class="quote no-group" data-post="32" data-topic="5222">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/c41ee70f636e2e0776f60ded73b0bae1.png" width="20"/> glitch-method:</div>
<blockquote>
<p>I was calling the rpi0 itself silly,</p>
</blockquote>
</aside>
<p>Oh sure, I understood so at the first moment. It is if fact so, I just expect the simpliest games to run, and even has no audio… but honestly speaking, it is as well the only rpi I own at the moment <img alt=":blush:" class="emoji" src="../../../images2/4aa2fc1b9179a94cbcf3e2e00e0d95ba.png" title=":blush:"/></p>
<p>Small update: The latest images are jumping already to a graphical interface, but somehow the SDL part of the engine is not properly built as it cannot find a video device.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2552_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">glitch-method</div>
          <div class="post_content">
<p>how are you accessing the tty? perhaps force video in boot/config.txt? idk how the 0 differs there, but I encountered a similar issue starting a vnc server on a headless rpi2.</p>
<p>edit: the config.txt line I used was <code>hdmi_force_hotplug=1</code></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<p>Yes the graphpics are in the tty2. What I mean are the errors shown at the very end:</p>
<div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="q2TBdIebnQo" data-youtube-title="Urho3D Embedded on RaspberryPi [WIP0]"></div>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1956_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">urnenfeld</div>
          <div class="post_content">
<p>Solved! I am surprised how the 04th sample goes in a RPI 0, at the end should be fine for low specs games…</p>
<div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="eY2ETbWrOqA" data-youtube-title="Urho3D Embedded on RaspberryPi [WIP1]"></div>
<p>I’ll be pushing the latest changes tomorrow, and split the post to comment on the next steps.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>