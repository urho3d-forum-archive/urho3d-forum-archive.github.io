<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>New blank project in VS2017 set up for Urho3D</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">New blank project in VS2017 set up for Urho3D</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hvince95</div>
          <div class="post_content">
<p>Hi, I’m new to the forums and Urho3D and am posting this as I am struggling to get Urho3D working with a new project.</p>
<p>I have never used CMake but have managed to get the samples to build and have been through and had a quick look at them all.</p>
<p>I want to start a new project with so that I can get up and running with Urho3D and start developing right away! I have tried building Urho3D through CMake without the samples but when I open the Urho3D solution in visual studio I am faced with about 25 different projects, sdl and bullet etc etc…!! should these be here?</p>
<p>I have tried to use Urho3D as an external library, but get all sorts of errors (PATH variables have been set correctly, i believe)</p>
<p>I have also tried following this tutorial to the t: <a href="https://urho3d.github.io/documentation/1.7/_using_library.html" rel="nofollow noopener">https://urho3d.github.io/documentation/1.7/_using_library.html</a><br/>
but am unsure how to get this integrated with a visual studio project/solution.</p>
<p>Is there a very simple template that has either all the cmake requirements done? or a template that i can download with the external library set up already?</p>
<p>Thankyou.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>There’s this wizard I made for QtCreator:</p><aside class="quote quote-modified" data-post="1" data-topic="2076">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/1452724d26bb99fb2e8f87d8c705c1c9.png" width="20"/>
<a href="https://discourse.urho3d.io/t/wrench-class-and-project-wizards-for-qtcreator/2076"><img alt="mage" class="emoji" height="20" src="../../../images2/ec9fb74402c0c8d42f09b090632859f9.png" title="mage" width="20"/> QtCreator Class and Project Wizards</a> <a class="badge-wrapper bullet" href="/c/showcase/code-exchange/13"><span class="badge-category-parent-bg" style="background-color: #F1592A;"></span><span class="badge-category-bg" style="background-color: #231F20;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Share your helpful Urho3D code snippets, samples and tutorials here.">Code Exchange</span></a>
</div>
<blockquote>
    Placing, or linking to (ln -s), the templates folder inside the ~/.config/QtProject/qtcreator/ folder (in Linux) will add both an Urho3D Project and an Urho3D C++ Class to the New File or Project dialog in QtCreator. 
Feel free to fork and modify these wizards to your own liking. Pull requests are also welcome. 
Class wizard
In case of the class wizard this will open a dialog allowing you to name your new class and specify its base class. Instead of typing the name of the base class there’s al…
  </blockquote>
</aside>
<p>And welcome to the forums! <img alt=":confetti_ball:" class="emoji" src="../../../images2/493e34d79be55d27b0c2a9cf4449024c.png" title=":confetti_ball:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Sinoid</div>
          <div class="post_content">
<blockquote>
<p>I have tried to use Urho3D as an external library, but get all sorts of errors (PATH variables have been set correctly, i believe)</p>
</blockquote>
<p>Show us the error messages please.</p>
<hr/>
<p>I just do it the explicit way and set it all up through visual studio manually after I’ve built the Urho3D project externally.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hvince95</div>
          <div class="post_content">
<p>Thankyou Modanung and JSandusky.<br/>
I found this video which describes the process I have gone through exactly (but with master Urho and updated CMakeLists file):<br/>
</p><div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="yImFcDZ61Lk" data-youtube-title="Urho3D how to start own project"></div><br/>
Everything goes fine until the build of the project. This is the first few lines of the output:
<ul>
<li>
<pre><code>1&gt;------ Build started: Project: MyExecutableName, Configuration: Debug x64 ------
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(Allocator.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(Allocator.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(HashBase.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(HashBase.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(RefCounted.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(RefCounted.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(StringHash.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in Main.obj
</code></pre>
</li>
<li>
<pre><code>1&gt;Urho3D.lib(StringHash.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in Main.obj
</code></pre>
</li>
</ul>
<ul>
<li>All error code LNK2038.<br/>
I feel like I’m so close!</li>
</ul>
<p>Is this the explicit way that you go about it JSandusky?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Sinoid</div>
          <div class="post_content">
<blockquote>
<p>Is this the explicit way that you go about it JSandusky?</p>
</blockquote>
<p>Nope. I start a command line project and manually (not really, I use tools) add the Urho3D.lib, include and library directories to it. It’s not ideal but I have my specific reasons for it.</p>
<hr/>
<p>You have an iterator mismatch. Two major causes of that are:</p>
<ul>
<li>Genuinely different settings between linked projects
<ul>
<li>Check in <code>Configuration Settings -&gt; C/C++ -&gt; Preprocessor -&gt; Preprocessor Definitions</code>
</li>
</ul>
</li>
<li>Mismatched debug/release builds (release referencing debug, or vice-versa)
<ul>
<li>Looks pretty suspect based on the other errors … no idea how you would have accomplished that, avoiding those sorts of things is one of the major boons to CMake</li>
</ul>
</li>
</ul>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Have you considered to install the Ruby/Rake in your Windows host system? If you have that prerequisite also installed then you can build the Urho3D library as so, without even launching VS (of course you can also do that by opening the generated solution file).</p>
<pre><code class="lang-auto">cd /path/to/your/urho3d/source-tree
rake cmake vs2017 URHO3D_64BIT=1 URHO3D_LUAJIT=1 build_tree=/path/to/your/urho3d/build-tree
rake make build_tree=/path/to/your/urho3d/build-tree
</code></pre>
<p>Then to quickly scaffolding a new project.</p>
<pre><code class="lang-auto">rake scaffolding dir=/path/to/your/own/project/source-tree
</code></pre>
<p>Finally to build your own project.</p>
<pre><code class="lang-auto">cd /path/to/your/own/project/source-tree
rake cmake vs2017 URHO3D_64BIT=1 URHO3D_HOME=/path/to/your/urho3d/build-tree build_tree=/path/to/your/project/build-tree
rake make build_tree=/path/to/your/project/build-tree
</code></pre>
<p>You can leave the “build_tree” to the default, which is “…/native-Build” for normal desktop native build configuration, instead of passing it explicitly. Passing URHO3D_HOME though is mandatory but only for the very first time you generate your own build tree.</p>
<p>Notice the similarity in building the Urho3D project and your own project. That’s because the scaffolding rake task reuse the same build fixtures from Urho3D project.</p>
<p>HTH.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hvince95</div>
          <div class="post_content">
<p>Thanks again everyone, Im flat out for the next couple of days so I will let you know how I go when I get the chance. It does look like there was a bit of a mismatch between x86 and x64 versions along the way somewhere. I will definitely give rake a go!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hvince95</div>
          <div class="post_content">
<p>Ok, thanks all for your help, if it weren’t for you all I would never have egged on to get this working. I now have a blank Visual Studio project with the mainloop example compiling and running! (did not want to deal with 64 bit anything so i just disabled all of that for 32 bit).</p>
<p>For anyone else who is interested, but mainly for my own future reference <img alt=":stuck_out_tongue_winking_eye:" class="emoji" src="../../../images2/ff26e1753c51ea19bd4843de00d388f4.png" title=":stuck_out_tongue_winking_eye:"/>, here is the process I used:</p>
<ol>
<li>
<p>download latest Urho3D from github and extract to directory (…\Urho-master)<br/>
download cmake</p>
</li>
<li>
<p>run cmake, source directory = build directory = …\Urho-master<br/>
navigate to that directory in command prompt and run the following command:<br/>
<code>cmake_vs2017.bat D:\Urho3D-master -DURHO3D_64BIT=0 -DURHO3DLUA=0 -DURHO3D_SAMPLES=0</code></p>
</li>
<li>
<p>add (…\Urho-master) directory to environment variable: URHO3D_HOME (I dont know if this is actually needed, but hey)</p>
</li>
<li>
<p>open the Urho3D.sln file in visual studio and ALL_BUILD as both ‘release’ and ‘debug’</p>
</li>
<li>
<p>Set up personal project directory as follows:</p>
<ul>
<li>bin folder and subfolders are empty</li>
<li>copy and paste CMake folder from (…\Urho-master) with modules and toolchains and their contents</li>
<li>CMakeLists.txt from urho documentation (_using_library). set project name and executable name.</li>
</ul>
<p>&lt;PROJECT_ROOT&gt;/<br/>
├ bin/<br/>
│  ├ Data/<br/>
│  └ CoreData/<br/>
├ CMake/<br/>
│  ├ Modules/<br/>
│  └ Toolchains/<br/>
├ CMakeLists.txt<br/>
├ *.cpp and *.h<br/>
└ *.bat or *.sh</p>
</li>
<li>
<p>add a .cpp file (Main.cpp) with code from ‘Engine initialisation and main loop’ documentation page</p>
</li>
<li>
<p>Open CMake gui. Source directory = build directory = &lt;PROJECT_ROOT&gt;/</p>
</li>
<li>
<p>Click configure</p>
</li>
<li>
<p>Make sure URHO3D_HOME is the correct directory (…\Urho-master), and select any functions that you want/need<br/>
Make sure Urho3D_DIR is the correct directory (…\Urho-master) (maybe, i dunno, but it works!)</p>
</li>
<li>
<p>Click generate</p>
</li>
<li>
<p>Go to &lt;PROJECT_ROOT&gt;/ and open projectname.sln</p>
</li>
<li>
<p>You can now build and run your project in debug/release mode!!!</p>
</li>
</ol>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hvince95</div>
          <div class="post_content">
<p>I just have a couple questions to ask:</p>
<ul>
<li>
<p>I get a heap of output in the following format:<br/>
<code>'Project_Ares_Executable_d.exe' (Win32): Loaded 'C:\Windows\SysWOW64\user32.dll'. Cannot find or open the PDB file.</code><br/>
and<br/>
’Project_Ares_Executable_d.exe’ (Win32): Loaded ‘C:\Windows\System32\DriverStore\FileRepository\c0318486.inf_amd64_11ba0b4b7cc81d52\aticfx32.dll’. Cannot find or open the PDB file.</p>
<p>Is this a concern?</p>
</li>
<li>
<p>I have my Visual Studio Solution, I have MyProject as well as 3 others, ALL_BUILD, INSTALL, and ZERO_CHECK</p>
<ul>
<li>ALL_BUILD is self explanatory</li>
<li>INSTALL does this produce an installer for MyProject?</li>
<li>ZERO_CHECK i simply have no idea!</li>
</ul>
</li>
</ul>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>