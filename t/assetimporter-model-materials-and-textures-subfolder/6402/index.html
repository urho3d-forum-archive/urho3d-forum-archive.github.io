<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>AssetImporter Model Materials and Textures subfolder</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">AssetImporter Model Materials and Textures subfolder</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>I’m new to Urho3D.  I am trying to grab some sample models from the internet, and then using AssetImporter to bring them into the Sample project for rendering.</p>
<p>My stopper is this – the materials that reference a texture are referencing them in the base “Textures/” folder.   This is messy.  Just as “NinjaSnowWar” sample model has it’s textures and materials all stored in  like-named subfolder, that’s how I want my Imports to be created.</p>
<p>For example, I have imported a “Falcon.mdl”, which has a dozen Materials and Textures.  I want the materials to be located under “Materials/Falcon/{materialname}.xml”  and Textures to be located under “Textures/Falcon/{texturename}.jpg”</p>
<p>I do not see any options for AssetImporter which permit me to force this type of folder structure.  What to do?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>1: You put it ina…</p>
<p><a href="https://www.blender.org/"><img alt="" height="100" src="../../../images2/9f182ffed50b3cd46a3e317be1e71d08.svg" width="100"/></a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>Thanks for the response Modanung.  Thanks for the clue; I see we have an Urho3D exporter for Blender, which I assume eliminates our need to use AssetImporter.</p>
<aside class="onebox allowlistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/0973ea8ce7121c320f68413e2a2f23ab.svg" width="32"/>
<a href="https://github.com/reattiva/Urho3D-Blender/tree/2_80" rel="noopener nofollow ugc" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="420" src="https://avatars0.githubusercontent.com/u/5704756?s=400&amp;v=4" width="420"/>
<h3><a href="https://github.com/reattiva/Urho3D-Blender/tree/2_80" rel="noopener nofollow ugc" target="_blank">reattiva/Urho3D-Blender</a></h3>
<p>Blender to Urho3D mesh exporter. Contribute to reattiva/Urho3D-Blender development by creating an account on GitHub.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>So the recommended model workflow is this: (???)</p>
<ol>
<li>Import model into Blender.</li>
<li>Export from Blender using the latest Urho exporter, direct to MDL format.</li>
</ol>
<p>And does this method permit you to put put the MDL’s Material references into subfolders?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>Moving forward, I’ve downloaded Blender 2.9 just now, and installed the Blender-Urho plugin, and enabled it.   So far, so good.</p>
<p>But now I can’t see how to actually use it.  I’ve read the tutorial, which is for Blender 2.7.  I can’t find the ‘Free Style’ area as mentioned in this tutorial.  I’ve spent 15 minutes looking for “the render tab in the Free Style area”, with no luck.   If I try “File =&gt; Export”, Urho is not listed as an option.</p>
<p> <a class="onebox" href="https://urho3d.fandom.com/wiki/Blender_to_Urho3D_Guide?file=Blender_model_in_urho3d-0.jpg" rel="noopener nofollow ugc" target="_blank">
<img height="15" src="../../../images2/f062e972e8c7b295b60c194dcc4829b3.jpg" width="15"/>
</a>
</p>
<p>I do see how the Urho Exporter permits you to set the “Default Materials subpath” which defaults to “Materials”.   So I assume (once I get this working) that for each model I want to export, I’ll need to modify these default subpaths to be “Materials/{ModelName}”… and do the same for Textures as well.</p>
<p>But I can’t do anything yet, because I can’t find the method for doing the “Export”.  Got hints?</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="amyXWx6qMxZHkYmwGRbhgtjyuQc"  height="396" src="../../../images2/4d05c100e2823bfebf1a94f7a6971427.png"  width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1063×611 75.2 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>So I downloaded Blender 2.79b, instead.  And here I installed the Urho Exporter, and it reports a syntax error (shown below).  So I’m stuck here again.</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="99WVXSUzbdnCv0JAzwxq7erGmkz"  height="321" src="../../../images2/78766205d661456e6aa2eca21fd5ca0a.png"  width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1542×719 60.6 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>The Blender site gives you a choice between 2.79 or 2.90.   Version 2.80 is not an option for download.</p>
<p>I’m stuck.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>There are other download options, I think, they’re just a bit harder to get to. For example: <a href="https://www.blender.org/download/releases/2-83/" rel="noopener nofollow ugc">https://www.blender.org/download/releases/2-83/</a><br/>
Or this link, which is actually to download that version) <a href="https://www.blender.org/download/lts/" rel="noopener nofollow ugc">https://www.blender.org/download/lts/</a></p>
<p>In regards to Blender 2.90, it’s possible the 2.8 version of the exporter would work with it, though I’ve certainly not tried it so I couldn’t really say. I also can’t guarantee that the exporter works with the 2.83-lts version, as I don’t think I have that one installed. Perhaps someone else can say more definitively.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>SirNate - thank you.  OK done.  I now have 2.83.6 installed, and the Urho Exporter installed just fine (same as it did for 2.90).  The problem now is that I cannot locate the UI option for Exporting a model.</p>
<p>How do I find that option in Blender?   Here’s my screenshot.  Where is this elusive “Export to Urho” option?</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="kklS8eWORBUSZpDJaJYqUgftlG5"  height="500" src="../../../images2/ac40f214c91e269788704e69f41f4f67.jpeg"  width="657"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1249×950 261 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>It should be under the Render tab (which I also find a bit counter-intuitive, though I don’t really have a better suggestion).<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="oQ9nwzoe2MD4vzZ2ueIbngLG1x5"  height="500" src="../../../images2/887ca082807658aea8becb626dfe2a9c.png"  width="437"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">610×697 70.8 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>Perfect!  Thanks for the screenshot, I found it.  Now I can export to Urho format!  Hooray.</p>
<p>New show-stopper now –  AssetImporter created from this ONE MDL file output, with a half-dozen materials.  The issue with AssetImporter, is that it forced all of those materials to be in the “Materials/” subfolder, which is a no-go for us.</p>
<p>And so we turned to Blender to fix that issue.  But when I do the export via Blender, I end up with a half-dozen MDL files and NO Materials!   This is even worse.</p>
<p>Is there some magic statement that I can use to ensure this combination of parts is Exported as a single MDL, with textures?   (same as the AssetImporter did for me)</p>
<p>Note, I used the “Selection Box” technique to select all parts, and then tapped “Export Urho” – which then resulted in 6 MDL files, instead of 1.</p>
<p><img alt="image" data-base62-sha1="lIZE2OYn7SGsCb96T52d3PfArh7" height="187" src="../../../images2/ff05935e1ace459c3174f43be199a879.png" width="644"/></p>
<p>What we want is : One MDL, and Materials/Textures that are in associated Subfolders called “{modelName}/”.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>In regards to the one model, I’m pretty sure you can just join/merge them in blender before exploring (if memory serves it’s some modifier key+J when all of them are selected, though there may have been more steps required). In regards to the materials there are some issues with the 2.8 version of the exporter and materials. I haven’t worked out exactly how to make it work yet (it worked fine for me in 2.7 blender, but I haven’t done enough with 2.8 to worry about it yet), though perhaps some of the others have a way to do it.</p>
<p>Honestly, though, I think it could be simpler for you to just modify the Asset Importer source to have it look in subdirectories created based on some parameter you add. It did sound like file names were the only issue you had. Though I’ve only used the blender exporter, so maybe it’s harder to do that than I’m imagining…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>For now, we’re probably just going to use the AssetImporter, as you suggested, and we’re setting the Materials manually in code, run-time.  It’s awkward, but will get the job done.</p>
<p>I would have expected AssetImporter for models to use the “{modelName}/” subdirectory by default, so that you don’t end up with naming conflicts and a muddled mess of so many files in a single folder.</p>
<p>We’re not at the point of planning to edit the AssetImporter/etc.  We just want to be users of this tool for now.  We are C# programmers, not C++, and are using UrhoSharp for our application.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>