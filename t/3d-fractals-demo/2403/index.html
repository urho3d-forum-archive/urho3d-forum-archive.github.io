<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>3D fractals demo</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">3D fractals demo</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>Lately I was playing with raymarching and 3d-fractals. I came up with the method to optimize raymarching and implemented it in Urho. I also added volumetric light scattering for point and spot lights. Taking from this demo: <a href="http://blog.mmacklin.com/2010/05/29/in-scattering-demo/" rel="nofollow noopener">blog.mmacklin.com/2010/05/29/in-scattering-demo/</a> and using some ugly hackery to make it work with finite attenuation lights (it uses inverse square fore light attenuation ).</p>
<p>Requires modern GPU.</p>
<p><span class="bbcode-b">Screenshots and download:</span><br/>
<a href="https://bananaft.itch.io/yedomaglobula" rel="nofollow noopener">bananaft.itch.io/yedomaglobula</a></p>
<p>Follow me: <a href="https://twitter.com/Bananaft" rel="nofollow noopener">https://twitter.com/Bananaft</a><br/>
<div class="lightbox-wrapper"><a class="lightbox" href="https://pbs.twimg.com/media/CxGTKmZXAAArA7w.jpg" rel="nofollow noopener" title="CxGTKmZXAAArA7w.jpg"><img height="365" src="../../../images2/25fe83d25f2707333b76b0221bb84ee4.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">CxGTKmZXAAArA7w.jpg</span><span class="informations">1200×636</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div><br/>
<div class="lightbox-wrapper"><a class="lightbox" href="https://pbs.twimg.com/media/C5iHAUnWAAAY5AC.jpg" rel="nofollow noopener" title="C5iHAUnWAAAY5AC.jpg"><img height="365" src="../../../images2/8d3a0e666ccc53831b191f1f616b26a6.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">C5iHAUnWAAAY5AC.jpg</span><span class="informations">1200×636</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">theak472009</div>
          <div class="post_content">
<p>Looks freaking amazing man. Reminds me of those ShaderToy fractal demos.<br/>
Any chance to get the C++ source code or is it all done in shader code?<br/>
Edit: Found the code in Angelscript.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/69_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">ghidra</div>
          <div class="post_content">
<p>super cool.<br/>
The lights look great. Are you also building collision objects for that character to stand on?</p>
<p>I did some similar work a while ago… but I never took it as far as you have:<br/>
<a href="http://discourse.urho3d.io/t/fractal-shader/1619/1">topic1682.html</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dakilla</div>
          <div class="post_content">
<p>nice, I love fractals</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I like the lighting effect.  Awesome demo.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>Thank you all for feedback. So it actually works <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/>. Forgot to ask, I really want to know what hardware you have and what performance you are getting?</p>
<aside class="quote no-group" data-username="theak472009">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/793e7255041ce2d6283799b98a189b08.png" width="20"/> theak472009:</div>
<blockquote>
<p> Reminds me of those ShaderToy fractal demos.</p>
</blockquote>
</aside>
<p>My go to source.</p>
<aside class="quote no-group" data-username="theak472009">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/793e7255041ce2d6283799b98a189b08.png" width="20"/> theak472009:</div>
<blockquote>
<p>Any chance to get the C++ source code or is it all done in shader code?</p>
</blockquote>
</aside>
<p>With this project I’ve made my first baby steps in C++. Whole raymarching thing is purely glsl and renderpath.xml. But I had to disable Z-culling for light volumes, to make them work with raymarching result. Also I passed couple additional  shader parameters for light scattering of spotlights. That’s like 5-6 lines changed.</p>
<aside class="quote no-group" data-username="ghidra">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5cd5016ca0f9e749a2a834ee22877f36.png" width="20"/> ghidra:</div>
<blockquote>
<p>Are you also building collision objects for that character to stand on?</p>
</blockquote>
</aside>
<p>No, I just placed him there <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/>. I haven’t tried collisions yet, but I will. Mesh is not an option, I have to calculate SDF for collisions either on GPU or CPU, both ways seems terrible. CPU will require to write code twice, keep it same, and may still give different results (in theory). GPU has problems with bringing information back to CPU to update objects.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/942_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">vivienneanthony</div>
          <div class="post_content">
<p>I wonder if a Linux version can be built. :-/</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dakilla</div>
          <div class="post_content">
<p>just put the linux binary player in the folder and run it.<br/>
it works partially, I experimented somes bugs…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p><a data-bbcode="true"  rel="nofollow noopener">Here is my fork and all the changes.</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">franck22000</div>
          <div class="post_content">
<p>Very nice demo !</p>
<p>Do you think you could make a pull request in Urho3D master branch for adding this volumetric effect support to point and spot lights ? That would be awesome.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>Hi, sorry for long reply.</p>
<p>I never did a pull requests, might use an assistance, and my coding style is a bit savage.</p>
<p>Also, it works easily only with deferred lighting, other modes will need an additional light volumes pass, witch is not cool.<br/>
Plus, this light scattering should somehow interact with fog, and trying to resolve this will rise many complicated questions.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>The new version features four different fractals, smoother lights scattering, cubemap sky and colored ambient occlusion, and some more minor tweaks.</p>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/e0032b1d14a37e8b653a90e39e049295.png" width="32"/>
<a href="https://bananaft.itch.io/yedomaglobula" rel="nofollow noopener" target="_blank">itch.io</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:630/500;"><img class="thumbnail" height="500" src="../../../images2/a86a681f01c4c8cdd7a203bf6da873c9.png" width="630"/></div>
<h3><a href="https://bananaft.itch.io/yedomaglobula" rel="nofollow noopener" target="_blank">Yedoma Globula by Bananaft</a></h3>
<p>3D fractals exploration game</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>So cool…<br/>
Unfortunately the misspelling of a certain resource prevents me from pouring the submarine some <em>tea</em>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>What do you mean? Is there an error, it won’t load or something?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Yea, it’s looking for a Teapot where there only is a TeaPot.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>So you’ve built Linux binary from my brunch? How does it work? What GPU do you have?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I ran the <a href="http://game.as">game.as</a> with a natively built Urho3D player. It’s a simple naming issue fixed by changing line 234 of <a href="http://game.as">game.as</a> from:</p>
<pre><code class="lang-auto">tpObject.model = cache.GetResource("Model","Models/Teapot.mdl");
</code></pre>
<p>to:</p>
<pre><code class="lang-auto">tpObject.model = cache.GetResource("Model", "Models/TeaPot.mdl");
</code></pre>
<p>…damned alternative spellings. <img alt=":stuck_out_tongue_winking_eye:" class="emoji" src="../../../images2/ff26e1753c51ea19bd4843de00d388f4.png" title=":stuck_out_tongue_winking_eye:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>New video.<br/>
</p><div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="FU-8j4sr3LY" data-youtube-title="Yedoma Globula pre-alpha trailer"></div>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Fractals are goddamn amazing. How the physics is implemented?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>Everything has to be sphere approximated. Character controller uses 2 spheres. Submarine uses 3. It’s calculated with pixel shader. I use small 16bit textures to pass data to and from GPU. Position and radius is sent to GPU, distance and normal(estimated with given radius) are sent back. It is not very accurate, but with signed distance you can do soft collisions</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Nice. What kind of monsters are going to put in there?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>don’t know yet. Will see. It won’t be a shooting gallery though.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>What about <em>the dreaded <a href="https://en.wikipedia.org/wiki/L-system" rel="nofollow noopener">l-system</a> monster</em>?</p>
<p><img alt="06" height="500" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/9/94998a21707aed44c58e5e979612fe019bedfbe8.jpg" width="583"/><br/>
<em>(the monster in a rare shot)</em></p>
<p>The foul creature is renowned to live in such abysses like the ones you depicted. It feeds on unfortunate travelers looking for uncommon sources.<br/>
It is made of crystal/rocky (ehr, boxes is this shot) formations which can take the shape of many things like, obviously, different fractals kind.<br/>
You only need a formula, a fractal shape (which you substitute for the boxes), a auto-generated skeleton for movement, placement in sentive context.</p>
<p><img alt="27" height="500" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/9/9dd9f7c5536c979488a5163d3931afd5a5314300.png" width="489"/><br/>
(<em>matrices paths for object substitution and skeletonizing</em>)</p>
<p>Easy creation with Sverchok generative design in Blender:<br/>
<img alt="48" height="500" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/0/0cb360eeea2daa33a2e81911edcfefafd6b2b39b.png" width="679"/><br/>
just substitute Box for whatever</p>
<p><a href="https://drive.google.com/open?id=1z2cw7wBgDu-GXQuJ1JvtSccjcPChDECf" rel="nofollow noopener">get the blend</a></p>
<p>A heightened study on the subject: <a href="http://elfnor.com/generative-art-sverchok-node-update.html" rel="nofollow noopener">LTM notes by Elfnor</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>I wrote a devlog-story. It is mostly about graphics features and visuals.<br/>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/ee37c8755e0b285187cc80a1b0140fe5.png" width="32"/>
<a href="https://medium.com/@bananaft/my-journey-into-fractals-d25ebc6c4dc2" rel="nofollow noopener" target="_blank" title="09:16PM - 01 October 2018">Medium – 1 Oct 18</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:690/365;"><img class="thumbnail" src="../../../images2/d1b8157fd55346805a0c0127ed80e3be.png"/></div>
<h3><a href="https://medium.com/@bananaft/my-journey-into-fractals-d25ebc6c4dc2" rel="nofollow noopener" target="_blank">My journey into fractals – Gregory Ivanov – Medium</a></h3>
<p>Hi, I’m Greg, and for the last two years, I’ve been developing a 3d fractal exploration game, which started as just a “what if” experiment.</p>
<p><span class="label1">Reading time: 13 min read</span>
</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>Thank you. My plan is to first try it at small platform like itch or humblewidget and then move to big ones.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>New build is available.<br/>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="16" src="../../../images2/e0032b1d14a37e8b653a90e39e049295.png" width="16"/>
<a href="https://bananaft.itch.io/yedomaglobula" rel="nofollow noopener" target="_blank">itch.io</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:128/102;"><img class="thumbnail" src="../../../images2/a86a681f01c4c8cdd7a203bf6da873c9.png"/></div>
<h3><a href="https://bananaft.itch.io/yedomaglobula" rel="nofollow noopener" target="_blank">Yedoma Globula by Bananaft</a></h3>
<p>3D fractals exploration game</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>