<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Emergent Impostors</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Emergent Impostors</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Octahedral impostors. I want them. Whatever the cost.<br/>
Don’t even know what they are. Doesn’t matter.<br/>
Please move them top of the list.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="36" data-topic="5453">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b172fc48f4b6208a4519e86c27afb791.png" width="20"/> johnnycable:</div>
<blockquote>
<p>Whatever the cost.</p>
</blockquote>
</aside>
<p>Is that a self-assignment? <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>I like impostors. People who cheat other people. Ah-a. Like in politics.<br/>
Thou I must admit I can’t figure how octahedral ones might be… <img alt=":alien:" class="emoji" src="../../../images2/7bf74c42c1b07bfd4d4d2f38d981ff2d.png" title=":alien:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I imagine they would have eight faces.</p>
<p><img alt=":socks:" class="emoji" src="../../../images2/9988a23e292b0b5244a75ceeac387bda.png" title=":socks:"/><img alt=":socks:" class="emoji" src="../../../images2/9988a23e292b0b5244a75ceeac387bda.png" title=":socks:"/><img alt=":socks:" class="emoji" src="../../../images2/9988a23e292b0b5244a75ceeac387bda.png" title=":socks:"/><img alt=":socks:" class="emoji" src="../../../images2/9988a23e292b0b5244a75ceeac387bda.png" title=":socks:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Ah. I’ve got it. They can cheat 8x the people that a normal guy can cheat… powerful…</p>
<p>EDIT: Looks like some are detained <a href="https://shaderbits.com/blog/octahedral-impostors/" rel="nofollow noopener">here</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p><aside class="onebox gitlabblob">
<header class="source">
<a href="https://gitlab.com/fiasco/urhoworlds/blob/master/src/Impostor.cpp" rel="nofollow noopener" target="_blank">gitlab.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://gitlab.com/fiasco/urhoworlds/blob/master/src/Impostor.cpp" rel="nofollow noopener" target="_blank">fiasco/urhoworlds/blob/master/src/Impostor.cpp</a></h4>
<pre><code class="lang-cpp">#include &lt;Impostor.hpp&gt;

#include &lt;Urho3D/Core/Context.h&gt;
#include &lt;Urho3D/Scene/Scene.h&gt;
#include &lt;Urho3D/Graphics/Octree.h&gt;
#include &lt;Urho3D/Graphics/StaticModel.h&gt;
#include &lt;Urho3D/Resource/ResourceCache.h&gt;
#include &lt;Urho3D/Graphics/Material.h&gt;
#include &lt;Urho3D/Graphics/Viewport.h&gt;
#include &lt;Urho3D/Graphics/Camera.h&gt;
#include &lt;Urho3D/Graphics/Texture2D.h&gt;
#include &lt;Urho3D/Graphics/Graphics.h&gt;
#include &lt;Urho3D/Graphics/Technique.h&gt;
#include &lt;Urho3D/Graphics/Octree.h&gt;
#include &lt;Urho3D/Graphics/RenderPath.h&gt;
#include &lt;Urho3D/Graphics/Model.h&gt;
#include &lt;Urho3D/UI/UI.h&gt; // for XMLFile hmm?
#include &lt;Urho3D/IO/Log.h&gt;

#include &lt;algorithm&gt;
</code></pre>


  This file has been truncated. <a href="https://gitlab.com/fiasco/urhoworlds/blob/master/src/Impostor.cpp" rel="nofollow noopener" target="_blank">show original</a>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<br/>
<aside class="onebox gitlabblob">
<header class="source">
<a href="https://gitlab.com/fiasco/urhoworlds/blob/master/bin/CoreData/RenderPaths/Impostor.xml" rel="nofollow noopener" target="_blank">gitlab.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://gitlab.com/fiasco/urhoworlds/blob/master/bin/CoreData/RenderPaths/Impostor.xml" rel="nofollow noopener" target="_blank">fiasco/urhoworlds/blob/master/bin/CoreData/RenderPaths/Impostor.xml</a></h4>
<pre><code class="lang-xml">&lt;renderpath&gt;
    &lt;command type="clear" color="0 0 0 0" depth="1.0" stencil="0" /&gt;
  &lt;command type="scenepass" pass="base" vertexlights="true" metadata="base" /&gt;
  &lt;command type="forwardlights" pass="light" /&gt;
  &lt;command type="scenepass" pass="postopaque" /&gt;
  &lt;command type="scenepass" pass="refract"&gt;
    &lt;texture unit="environment" name="viewport" /&gt;
  &lt;/command&gt;
  &lt;command type="scenepass" pass="alpha" vertexlights="true" sort="backtofront" metadata="alpha" /&gt;
  &lt;command type="scenepass" pass="postalpha" sort="backtofront" /&gt;
&lt;/renderpath&gt;
</code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<br/>
<aside class="onebox gitlabblob">
<header class="source">
<a href="https://gitlab.com/fiasco/urhoworlds/blob/master/bin/Data/Misc/Impostor.xml" rel="nofollow noopener" target="_blank">gitlab.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://gitlab.com/fiasco/urhoworlds/blob/master/bin/Data/Misc/Impostor.xml" rel="nofollow noopener" target="_blank">fiasco/urhoworlds/blob/master/bin/Data/Misc/Impostor.xml</a></h4>
<pre><code class="lang-xml">&lt;material&gt;

  &lt;technique name="Techniques/DiffSpec.xml"&gt;

  &lt;/technique&gt;
  &lt;shader psdefines="ALPHAMASK" /&gt;
  &lt;parameter name="MatSpecColor" value="1 1 1 16"/&gt;
  &lt;parameter name="MatDiffColor" value="1 1 1 1" /&gt;
  &lt;parameter name="MatEmissiveColor" value="0.0 0.0 0.0" /&gt;
  &lt;parameter name="AmbientColor" value="1 1 1 1" /&gt;
  &lt;alphatocoverage enable="true" /&gt;
  &lt;cull value="none" /&gt;
&lt;/material&gt;
</code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>Started working on impostors. Right now it’s only a one sprite impostor.</p>
<p>Looking at <a href="https://gamedev.stackexchange.com/questions/169508/octahedral-impostors-octahedral-mapping" rel="nofollow noopener">https://gamedev.stackexchange.com/questions/169508/octahedral-impostors-octahedral-mapping</a> answer here I hope I can easily make it octahedral impostor. A bit troubling though how bad does it look right now <img alt=":confused:" class="emoji" src="../../../images2/7678bd25c0e19b3a45e5d0b2348a29ef.png" title=":confused:"/><br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="image.jpg"><img alt="image" data-base62-sha1="behfOtKOefUhoiZHYrkzIwDdjj8"  height="500" src="../../../images2/dfa70d1e25230a3fd1b46605e202c0ae.jpeg"  width="667"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image.jpg</span><span class="informations">1026×768 199 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p>Either I didn’t understand it correctly, or math is wrong somehow…</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="image.jpg"><img alt="image" data-base62-sha1="6tHBKvYiXwUUfldWNIcSGb8dwVq"  height="500" src="../../../images2/4fe889b3f15c4a29834884452bd590ec.jpeg"  width="665"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image.jpg</span><span class="informations">1031×775 118 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Trying to make pyramid impostors, not getting expected result (see next pic)<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="image.jpg"><img alt="image" data-base62-sha1="empoTrIgdxmQL8rbAVN4r0uVifn"  height="500" src="../../../images2/7503234448294a7168e332f9d79484ff.jpeg"  width="500"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image.jpg</span><span class="informations">1046×1046 293 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Wish I had any math skills.</p>
<p>Any ideas would be much appreciated (error is in <a href="https://gitlab.com/fiasco/urhoworlds/blob/master/src/Impostor.cpp#L115" rel="nofollow noopener">UVtoPyramid()</a>  as far as I understand)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p>looks like I got it figured out:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="image.jpg"><img alt="image" data-base62-sha1="jp2vyyqj9z627YZmiE2q6f1hB2C"  height="500" src="../../../images2/792fca0122c914bc25a6730433bb7065.jpeg" width="505"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image.jpg</span><span class="informations">682×674 88.6 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br/>
the UVtoPyramyd() was expecting (-0.5, -0.5) … (0.5, 0.5) coordinates, or something like that… now I can proceed <img alt=":crazy_face:" class="emoji" src="../../../images2/ce6ef23c81bc5ca3814bfe88ff5d4655.png" title=":crazy_face:"/></p>
<p>// EDIT: actually, I didn’t figure it out, but just rewrote UVtoPyramid function from scratch, with much simpler approach…</p>
<p>EDIT2: Turned out the stackoverflow solution is not actually working.</p>
<p>Found one that works, but can’t invert the calculation.</p>
<p>Here’s how I do it:</p>
<pre><code>// input coordinates are ranged from -1..1, not 0..1
Vector3 UVtoPyramid(Vector2 uv) {
    float leftright_negation = 1 - std::abs(uv.x_);
    float frontback_negation = 1 - std::abs(uv.y_);
    float up = std::min(leftright_negation, frontback_negation);
    Vector3 position (uv.x_, up, uv.y_);

    return position.Normalized();
}
</code></pre>
<p>But finding inverse of this calculation turns out to be pretty hard for me.</p>
<p>Tried this <a href="https://gist.github.com/pyalot/cc7c3e5f144fb825d626" rel="nofollow noopener">https://gist.github.com/pyalot/cc7c3e5f144fb825d626</a> gist (normalToUvRectOct()), but it didn’t work for me.</p>
<p>If anyone has any other ideas, please help ^^. I’m stuck, and will do a break until something pops…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>I would begin by remapping the Signed NDC input coord (-1 to +1) to the Unsigned NDC coord (0 to 1)<br/>
coord = (coord+1) / 2</p>
<p>using abs loses the sign, its a bad start</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="8" data-topic="5555" data-username="restless">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/c403bd9b5a63be7cb20a0a632ac39966.png" width="20"/> restless:</div>
<blockquote>
<p>Found one that works, but can’t invert the calculation.</p>
</blockquote>
</aside>
<p>Wouldn’t that simply be <code>Vector2(position.x_, position.z_)</code> or something similar?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p><span class="mention">@Leith</span> the code shown works fine, but I need to find the opposite (which would be PyramidToUV), so that I can type it into shader to switch the coordinate depending on the camera position</p>
<p><img alt="image" data-base62-sha1="245HU1w53I6dBFDEDeQreeORoxG" height="500" src="../../../images2/e5bd8d06e99b9048076e0dafb2a264fe.jpeg" width="665"/></p>
<p><span class="mention">@Modanung</span> if we look from above, the capture points look like this:<br/>
<img alt="image" data-base62-sha1="g3C5tQOc415ve4FHGLWz4kePLUY" height="460" src="../../../images2/6b4b3900c9ea96d5be346ed30908edc8.jpeg" width="462"/><br/>
It’s a good start though, so now I just can try to start approximating the value from (.x_, .z_) and some non-linear relation to the .y_ value.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="8" data-topic="5555" data-username="restless">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/c403bd9b5a63be7cb20a0a632ac39966.png" width="20"/> restless:</div>
<blockquote>
<p><code>Vector3 position (uv.x_, up, uv.y_);</code></p>
</blockquote>
</aside>
<p>Maybe I’m misunderstanding something, but why would you need the Y value of this Vector3 to determine the uv.xy that went into it?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<blockquote>
<p>why would you need the Y value of this Vector3 to determine the uv.xy</p>
</blockquote>
<p>I don’t understand the exact question tbh… The coordinates created are simply a pyramid shape, and if you normalize every point, it becomes a sphere.</p>
<p>When later I need to inverse this calculation, I only need to find out which part of the UV grid belongs to each normal. So that when camera faces the object, I find the normal pointing from object to camera and calculate which part of the UV grid to show on the impostor billboard object.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="13" data-topic="5555" data-username="restless">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/c403bd9b5a63be7cb20a0a632ac39966.png" width="20"/> restless:</div>
<blockquote>
<p>and if you normalize every point, it becomes a sphere.</p>
</blockquote>
</aside>
<p>I thought you were making a pyramid. <img alt=":slightly_smiling_face:" class="emoji" src="../../../images2/87e0a7daec339818bcddbf25ee57347b.png" title=":slightly_smiling_face:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<blockquote>
<p>I thought you were making a pyramid.</p>
</blockquote>
<p>Well, I need to normalize it so that I capture the object from equal distances on every angle.</p>
<p>Good news everyone btw! I found acceptable approximation. The math looks to be expensive so I’m open for other options, but for now I can move on to implementing shader and getting actual impostor working  <img alt=":crazy_face:" class="emoji" src="../../../images2/ce6ef23c81bc5ca3814bfe88ff5d4655.png" title=":crazy_face:"/></p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="image.jpg"><img alt="image" data-base62-sha1="qibCikt0Eqbewd5qSb3AI3gzPLn"  height="499" src="../../../images2/41f453c25a7c2927de897e9bc5c17f12.jpeg" width="590"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image.jpg</span><span class="informations">810×686 192 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>It’s kinda embarrasing how they are calculated right now…</p>
<pre><code>float calc_simple_square_stretching(float x, float y) {
    // https://arxiv.org/ftp/arxiv/papers/1509/1509.06344.pdf
    // page 3, Disc to square mapping:
    if (sqr(x) &gt;= sqr(y)) {
        return sign(x) * (std::sqrt(sqr(x) + sqr(y)));
    }
    return  sign(y) * x / y * (std::sqrt(sqr(x) + sqr(y)));
}

// returns -1..1 coordinates
Vector2 PyramidUV(Vector3 direction, float num_tiles) {
    Vector3 dir = direction.Normalized();
    Vector2 uv;

    uv.x_ = calc_simple_square_stretching(dir.x_, dir.z_);
    uv.y_ = calc_simple_square_stretching(dir.z_, dir.x_);

    return uv / (1 +  dir.y_) * num_tiles / (num_tiles + 1.f);
}

// and then after I adjust it from (-1..1) to (0..1) I need even 
// more voodo to make them work :D
float uv_incr = 1.f / ((float)impostorResolution);
Vector2 uv_base =
    PyramidUV(position, impostorResolution) / 2.f
    + Vector2(0.5f - uv_incr / 2.f, 0.5f - uv_incr / 2.f) ;</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p>So, trying to write a shader for impostor, turned out to be harder than I though… Used LitSolid.glsl as a starting point. Not using Billboard technique yet.</p>
<pre><code>+#ifndef COMPILEVS
+varying vec3 cCameraPos; // had to add this myself so that I could use cCameraPos
+#endif

+vec2 getPyramid(vec2 uv, vec3 worldPos)
+{
+    float tile_res = 8.0; // hardcoded atlas resolution
+    
+    // here expecting worldPos to be root position of the object
+    // and cCameraPos to be camera position (both in world transform space)
+    vec3 dir = normalize((worldPos - cCameraPos).xyz);
+
+    // from now on calculations are done line by line for simplier debugging
+    float uv_incr = 1.0 / tile_res;
+
+    vec2 ret = normalize(vec2(dir.x, dir.z));
+    ret = ret / (1.0 + dir.y);
+    ret = ret * tile_res/(tile_res + 1.0);
+
+    float adj = 0.5 - uv_incr / 2.0;
+    ret = ret / 2.0 + vec2(adj, adj);
+
+    return uv / tile_res + ret;
+}
+
void VS()
{
    mat4 modelMatrix = iModelMatrix;
    vec3 worldPos = GetWorldPos(modelMatrix);
    gl_Position = GetClipPos(worldPos);
    vNormal = GetWorldNormal(modelMatrix);
    vWorldPos = vec4(worldPos, GetDepth(gl_Position));

@@ -59,7 +87,8 @@ void VS()
-        vTexCoord = GetTexCoord(iTexCoord);
+       // here assuming that iTexCoord is our per-vertex UV coordinates, like (0, 0) ... (1, 1)
+       vTexCoord = GetTexCoord(getPyramid(iTexCoord, GetWorldPos(cModel)));
</code></pre>
<p>Yet on the output I get some distorted image on the plane, and for some reason texture is not being tiled (which I am assuming is default behavior). All that makes me thing that some part of these calculations is actually done in screen space, not in world space.</p>
<p>If anything of it makes sense to anyone, please let me know where my mistakes are.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>TBH, I’ve got lost some posts ago… so I hope you’re on the right track.<br/>
Hail Impostors! <img alt=":crazy_face:" class="emoji" src="../../../images2/ce6ef23c81bc5ca3814bfe88ff5d4655.png" title=":crazy_face:"/><img alt=":crazy_face:" class="emoji" src="../../../images2/ce6ef23c81bc5ca3814bfe88ff5d4655.png" title=":crazy_face:"/><img alt=":crazy_face:" class="emoji" src="../../../images2/ce6ef23c81bc5ca3814bfe88ff5d4655.png" title=":crazy_face:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p>I am probably lost more than you tbh… <img alt=":smiley:" class="emoji" src="../../../images2/94dd27e9c6c243335d29229e02e34e9d.png" title=":smiley:"/> <span class="mention">@johnnycable</span></p>
<p><a href="https://youtu.be/iDckH-nbq1A" rel="nofollow noopener">https://youtu.be/iDckH-nbq1A</a> Here’s current preview.</p>
<p>At least two significant things (probably more) left to be figured out here:</p>
<ol>
<li>
<p>how to make object origin not to dance around when looking from the top</p>
</li>
<li>
<p>how to make transition smoother</p>
</li>
</ol>
<p>The code is a complete mess right now. It’s hard to underestimate how bad it is. I don’t know whether I should laugh or cry about it…</p>
<p>Most of the stuff happens in C++, and more has to be put into shaders probably.</p>
<p><a href="https://gitlab.com/fiasco/urhoworlds/tree/impostors/src" rel="nofollow noopener">https://gitlab.com/fiasco/urhoworlds/tree/impostors/src</a> (see Impostor.{c,h}pp). Though I don’t think it’s worth anyone’s time right now, unless you’re ready to rewrite it all from scratch.</p>
<p>The only reason to look at my code is to figure out quick how to use Urho3D capabilities to achieve similar things.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2384_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Leith</div>
          <div class="post_content">
<p>You’re not using the billboard technique yet, but GetWorldNormal(modelMatrix) resolves to GetBillboardNormal(matrix) - which requires a shader uniform called cBillboardRot to be set up !! (looking at the hlsl sourcecode, but anyway…)<br/>
There’s a variant you should try: GetBillboardNormal(float4 iPos, float3 iDirection, float4x3 modelMatrix) - this version may suit your current use case better as it does not rely on the aforementioned uniform.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">restless</div>
          <div class="post_content">
<p>Some more progress. Small steps overall, but big pile of knowledge uncovered on Urho3D &lt;3 and 3D graphics on the way…</p>
<div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="1cROTxRlN6s" data-youtube-title="Urho3D octahedral Impostors work in progress stuff"></div>
<p>Right now code and all the service tools like render paths, shaders and materials are not organized well.</p>
<p>After I complete couple more features and fix all the problems, I try to organize it all properly so that it’s atleast ready to be put into Code Exchange section.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2396_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">suppagam</div>
          <div class="post_content">
<p>Wow, that looks good. Could definitely be a PR for the engine!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>WOW!   Great work!</p>
<p>This is exactly what we need to resolve an existing rendering issue (terrible pixel flicker/jitter from far away).</p>
<p>Do you have an ETA for publishing this source code?</p>
<p>Would you like some help?</p>
<p>I checked your September 2019 release here, but it doesn’t seem to have anything you did after that?  Your demo from Jan 2020, looks fantastic.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://gitlab.com/fiasco/urhoworlds/tree/impostors/src">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/e586fea4cd2f684942c4223ae54c2b44.png" width="32"/>
<a href="https://gitlab.com/fiasco/urhoworlds/tree/impostors/src" rel="noopener nofollow ugc" target="_blank">GitLab</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="128" src="../../../images2/e5d88d9aef2678c00b9de5954416a568.png" width="128"/>
<h3><a href="https://gitlab.com/fiasco/urhoworlds/tree/impostors/src" rel="noopener nofollow ugc" target="_blank">src · impostors · Vitalii Minnakhmetov / urhoworlds</a></h3>
<p>GitLab.com</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">najak3d</div>
          <div class="post_content">
<p>Hi <span class="mention">@restless</span> , I see from GitHub that you continued to work on this until around 5/20/2020, which means you might have made more progress beyond your last demo from January 2020.</p>
<p>Are you interested in passing this off now?  We’re planning a Civ-like game, with a large map, aimed to provide both a near ground level immersive view, as well as the zoomed out far-view.   As we zoom-in/out, we’ll need Impostors to work.   The progress you made looks damned good to us, and if there are deficiencies, hopefully are fixable by us.</p>
<p>We may be porting this to C# to work with <span class="mention">@elix22</span> <a href="http://Urho.NET" rel="noopener nofollow ugc">Urho.NET</a>, which is awesome.</p>
<p>Was wondering if you would be available for us to ask questions as we try to get this working for us?</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>