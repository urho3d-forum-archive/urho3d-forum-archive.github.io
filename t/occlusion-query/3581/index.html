<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Occlusion Query</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Occlusion Query</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/870_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">caseymcc</div>
          <div class="post_content">
<p>I want to add hardware occlusion query into Urho3D, not specifically as part of the rendering but mainly to be used to determine when to load chunks of terrain (rather than just render distance). The terrain (voxel chunks) will be added as a very low level representation of the chunk (cube) to see if it gets rendered at all. If it does get rendered then the lod of the voxels (based on distance to camera) is loaded.</p>
<p>I have limited experience with Urho3D so I am hoping to get some feedback from someone with more insight. From my quick look through some of the code for Urho3D I assume I should setup the occlusion queries as a render pass some time after the base pass and before the postalpha pass. I havenâ€™t found where the fog is rendered yet (assuming postalpha). The plan is not to use the query in the current frame only when available (frame or 2 delayed) so there should not be any detriment to the rendering pass. Like noted before I want to set it up to add items to the query and get some delay response on the result. I am not sure the correct notification system to use in Urho3D and was hoping on some insight here is well. Outside of Urho3D I would just set up a thread protected queue to add items to the query pass and a second thread protected queue with the result information, however with Urho3D seems like it would be better to provide this information in the update pass.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>