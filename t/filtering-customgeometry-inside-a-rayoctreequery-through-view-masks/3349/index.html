<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Filtering CustomGeometry inside a RayOctreeQuery through view masks</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Filtering CustomGeometry inside a RayOctreeQuery through view masks</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">greyWiz</div>
          <div class="post_content">
<p>Hi, I have a CustomGeometry mixed with a set of StaticModels in my scene and I want to raycast the StaticModels without taking the CustomGeometry into account. One solution that I was considering would be setting the CustomGeometry to a different view mask than StaticModels, but even by doing it the raycast still would find the CustomGeometry.</p>
<p>Then, I decided to make a different test: I’ve set the camera’s view mask to different values which gave me these results:</p>
<ul>
<li>When I set the camera’s view mask to match the CustomGeometry’s mask, the StaticModels are correctly masked out.</li>
<li>When I set the camera’s view mask to match the StaticModels’ mask, the CustomGeometry is NOT masked out.</li>
<li>When I set the camera’s view mask to any other value, the StaticModels are correctly masked out, but not the CustomGeometry.</li>
</ul>
<p>To sum up the question: should a CustomGeometry model be set up differently so it can be correctly masked out by mask views?</p>
<p>Thanks in advance!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>The camera’s viewmask doesn’t affect raycasts, only the raycast query’s own viewmask does. Did you take this into account? Otherwise it would sound weird that viewmask would behave differently for different geometry classes, since this property is in the Drawable base class.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">greyWiz</div>
          <div class="post_content">
<p>Hi cadaver,</p>
<p>Yes, I took that into account, the camera example was just to show that something weird was going on with my CustomGeometry, since it refused to be masked out by view masks. My reasoning was that, since it was happening, maybe I should first understand the CustomGeometry-and-Camera issue and make sure that I was able to make it work correctly (and make sure that the view masks were, in fact, working in that case) before blaming the raycast operation.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>