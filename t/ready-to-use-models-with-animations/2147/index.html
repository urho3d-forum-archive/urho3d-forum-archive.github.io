<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Ready to use models with animations</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Ready to use models with animations</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Mixamo characters with animations ready for use for Urho3D - <a data-bbcode="true" href="https://github.com/Lumak/Urho3D-Assets/tree/master/Models">https://github.com/Lumak/Urho3D-Assets/tree/master/Models</a><br/>
<strong>How to get mixamo char/anims - page2 of this thread.</strong></p>
<p>notes:</p>
<ul>
<li>the model faces the opposite Z direction, so you’ll need to spin it by 180</li>
<li>avoid adjusting the “Head” node due to the above reason (or just fix it)<br/>
**<a href="http://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/12">How to spin your char by 180</a> - <strong>note: this change, along with the Mutant char, was added to Urho3D/master as of August 16, 2016.</strong>
</li>
</ul>
<p>models:<br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/6lEN7dl.png" title=""><img alt="" height="151" src="../../../images2/399119aceb664f0c2ffb109c69b302ad.png" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1200×264</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p><span class="bbcode-b">AssetImporter:</span><br/>
Modified AssetImporter to suppress “<span class="math">AssimpFbx</span>” nodes that’s generated for Mixamo characters. Of course, this works for all fbx files.<br/>
The option is now enabled by default.   <strong>To disable it</strong>, use:</p>
<pre><code class="lang-auto">AssetImporter model &lt;input file.fbx&gt; &lt;output file&gt; -np
AssetImporter anim &lt;input file.fbx&gt; &lt;output file&gt;  -np
</code></pre>
<p><strong>This was added to Urho3D/master, Aug 22, 2016.</strong></p>
<p>Edit: added info about the assetImporter merge.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<blockquote>
<p>the model faces the opposite Z direction, so you’ll need to spin it by 180</p>
</blockquote>
<p>If u use Blender exporter, you can choose forward direction for result model</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/119_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">codingmonkey</div>
          <div class="post_content">
<p>Thanks for sharing! i guess this useful for prototyping game</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>This is great, but way more useful would be to know method how you did it. There are tons of animations and we would love to be able to do same thing for other animations ourselves. Naive attempt i tried (just converting fbx to mdl/ani) did not produce a working animations.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>[quote=“1vanK”]<br/>
If u use Blender exporter, you can choose forward direction for result model[/quote]<br/>
That’s good to know, but I primarily use Maya LT to retarget animations. I could probably figure out how to do it in Maya, but adding an adjustNode to spin it 180 is simple to do…</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/e5061c7629059aca42f3242b52d42e88.png" width="20"/> codingmonkey:</div>
<blockquote>
<p>Thanks for sharing! i guess this useful for prototyping game</p>
</blockquote>
</aside>
<p>It might become more beneficial than just for prototyping when I provide skeleton.fbx files.</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/c74e1d6abd7187cdd2f8199c8cfb922b.png" width="20"/> rku:</div>
<blockquote>
<p>This is great, but way more useful would be to know method how you did it. There are tons of animations and we would love to be able to do same thing for other animations ourselves. Naive attempt i tried (just converting fbx to mdl/ani) did not produce a working animations.</p>
</blockquote>
</aside>
<p>I discover that most models on the site have pivot rotation which causes “$AssimpFbx$” node insertion. This ends up inflating the skeleton bone count - I had a few models that ended up with 200+ bones! To correct it, you’ll have to zero out the rotation pivot, but take the rotation pivot value and add it to the transform rotation field.  Essentially, you’re elevating the rotation pivot to its parent transform.</p>
<p><strong>note</strong><br/>
Added another model to the repository and run anim for x_bot.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I have completed the Swat standing rifle pack animations.  I know there are at least three ppl making a shooter game in the community, hope these animations help.</p>
<p>Edit: link <a data-bbcode="true" href="https://github.com/Lumak/Urho3D-Assets/tree/master/Models/Swat">https://github.com/Lumak/Urho3D-Assets/tree/master/Models/Swat</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Added Mutant model/anim <a data-bbcode="true" href="https://github.com/Lumak/Urho3D-Assets/tree/master/Models/Mutant">https://github.com/Lumak/Urho3D-Assets/tree/master/Models/Mutant</a>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/88_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jenge</div>
          <div class="post_content">
<p>If possible, including source fbx/blend/collada in repo with import settings documented would be great for being able to import/export to future mdl runtime representations or asset importer improvements.</p>
<p>EDIT: Noting probably not possible due to source of files <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
<p>EDIT2: Looks like <a href="https://github.com/Lumak/Urho3D-Assets/tree/master/Models/Mutant" rel="nofollow noopener">github.com/Lumak/Urho3D-Assets/ … els/Mutant</a> needs a LICENSE.TXT</p>
<p>Thanks!  Great stuff!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>mutant/license.txt added along with a few more anim files.</p>
<p>I’ve added _skeleton.fbx file for each model which can be used to skin your own custom mesh  **(acian uses x_bot) .</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>[quote=“jenge”]If possible, including source fbx/blend/collada in repo <span class="bbcode-b">with import settings documented</span> would be great for being able to import/export to future mdl runtime representations or asset importer improvements.</p>
<p>EDIT: Noting probably not possible due to source of files <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
<p>EDIT2: Looks like <a href="https://github.com/Lumak/Urho3D-Assets/tree/master/Models/Mutant" rel="nofollow noopener">github.com/Lumak/Urho3D-Assets/ … els/Mutant</a> needs a LICENSE.TXT</p>
<p>Thanks!  Great stuff![/quote]</p>
<p>That indeed would be great so we could replicate the process ourselves. Lumak either seems to not be interested in telling us how to do that or we are having some miscommunication here since i already asked for same thing in my previous post.</p>
<p>Btw Lumak arent all mixamo models using same skeleton?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>[quote=“rku”]<br/>
That indeed would be great so we could replicate the process ourselves. Lumak either seems to not be interested in telling us how to do that or we are having some miscommunication here since i already asked for same thing in my previous post.<br/>
Btw Lumak arent all mixamo models using same skeleton?[/quote]</p>
<p>On the contrary, I have shared my process on how I did it and are described in my reply to you in this post and in <a data-bbcode="true" href="http://discourse.urho3d.io/t/mixamo-animations-characters-free/1999/1">http://discourse.urho3d.io/t/mixamo-animations-characters-free/1999/1</a>. I will reiterate it here but in a step-by-step manner for clarity.  But before I do, let me clarify/answer a couple of things:</p>
<ol>
<li>As jenge himself realized, <span class="bbcode-b">mixamo license prohibits distribution of character/animation file in editable format</span>. And this restriction is the only reason I cannot provide model.fbx or animation.fbx files in the repository.</li>
<li>“Do models use same skeleton?” - They are not the same. While the base joint names are the same, i.e. named as “Hip”, “Neck”, etc., some models have different prefix added to the base, e.g. “mixamorig:Head”, “swat:Head”, “Mutant:Head”, etc.</li>
</ol>
<h3>Mixamo character/animation port process using Maya</h3>
<p>As I mentioned numerous times in my posts, I use Maya LT for the porting process. I will describe this process first then will describe what I discovered just using the animation mapping process in <a href="http://mixamo.com">mixamo.com</a>.</p>
<ol start="0">
<li>
<p>prerequisite: have Maya or Maya LT installed</p>
</li>
<li>
<p>goto <a href="http://mixamo.com">mixamo.com</a> and download your model.fbx (t-pose) and animation set (or single animation) in .fbx format.</p>
</li>
<li>
<p>open your model.fbx in maya, open HumanIK editor, choose Create Character Definition, map all joints of your model to the character definition until it becomes “green” lit -&gt; save your model file (maya format) -&gt; export as fbx format with animation box unchecked.<br/>
<em>note1</em> clear any non-zero pivot rotation - the values found “jointOrientation” needs to be elevated to the parent transform, i.e. add it to the transfrom field for the same joing.<br/>
<em>note2</em> even doing note1 sometimes result in wonky animation. If this happens, you’ll need to reskin the model or replace the rig(skeleton) with a known working rig and re-skin.</p>
</li>
<li>
<p>for each animation that you want to port, open the animation.fbx file in maya, goto frame -1 (negative 1) and set it to t-pose (frame -1 because animations typically start at frame 0), key all your joints in frame -1, open HumanIK editor, select Create Character Definition,  map all joints -&gt; save the file (maya format).</p>
</li>
<li>
<p>open your saved maya model file,<br/>
from the file explorer drag in your saved animation file into maya,<br/>
in the HumanIK editor- character control panel, select “Character:” as your model’s character, select “Source:” as the animation’s character<br/>
set the key frame range of the animation<br/>
in HumanIK, choose Bake &gt; Bake To Skeleton<br/>
delete the animation rig<br/>
save the file as model_animation or w/e<br/>
export to .fbx file format, w/ the animation box checked</p>
</li>
<li>
<p>using AssetImporter and arguments:<br/>
for model -  AssetImporter <span class="bbcode-b">model</span> your_model.fbx output_file.mdl<br/>
for animation - AssetImporter <span class="bbcode-b">anim</span> your_model_animation.fbx output_animation_file.anim<br/>
<em>note</em> output file will contain something like “Take-00” or w/e, remove that and rename it as ouput_animfile.anim<br/>
<em>note2</em> you may have to use an additional option <span class="bbcode-b">-t</span> to Generate tangents for models with normal bump map</p>
</li>
</ol>
<hr/>
<h3>Porting character/animation right out of <a href="http://mixamo.com">mixamo.com</a>
</h3>
<p>I have not done this process until just a few minutes ago, and it seemed to work.</p>
<ol>
<li>goto <a href="http://mixamo.com">mixamo.com</a> -&gt; Browse Animation -&gt; select “Creature Pack” as an example</li>
<li>At the right of the window, it shows “19 animation in Creature Pack on X Bot” (for me at least), click on “Change Character” and select the Mutant character.</li>
<li>click on the “Add To My Assets” button, once it completes the button changes to “View/Download” -&gt; click it</li>
<li>on the left side of the window there’s a check box next to the trash can, selecting it will select your animation(s) -&gt; click Queue Download -&gt; pop up confirmation : .fbx, t-pose , and every other option as default</li>
<li>once the progress completes, check your animation, click download.</li>
<li>unzip your In_Progress.zip (following the creature pack/mutant example got me this file)</li>
<li>using AssetImporter and arguments:<br/>
for model -  AssetImporter <span class="bbcode-b">model</span> Mutant.fbx output_file.mdl<br/>
for animation - AssetImporter <span class="bbcode-b">anim</span> mutant_idle.fbx Mutant_Idle.anim<br/>
<em>note</em> the output file will contain a string “_mixamo.com.ani”, just remove the "_mixamo.com"<br/>
<em>note2</em> you may have to use an additional option <span class="bbcode-b">-t</span> -&gt;Generate tangents for models with normal bump map</li>
</ol>
<p><strong>things to do outside of assetImporter</strong></p>
<ol>
<li>you’ll need to extract the textures using something like Blender. I did this once but I think it was: choose geom &gt; material &gt; output texture (can’t remember exactly)</li>
<li>the model in Urho3D is huge - scaled by 100 from the looks of it - fix this in Blender or scale the node by 0.01f (this works properly)</li>
<li>some animations have root motion - fix it in Blender</li>
</ol>
<p>I hope this wall of text helps.</p>
<p>Edit: clearing pivot rotation needs to happen in Maya step 2, not 3<br/>
Edit: added scaling info in *problems 2)<br/>
Edit: added info about additional option <span class="bbcode-b">-t</span> using the assetImporter for normal bump map</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>No one asked how to spin your model by 180 in code. I guess everyone already knows how to do this, but here is how-to for some who don’t know.</p>
<p>Using 18_CharacterDemo, snippets of relevant sections.</p>
<h3>Spinning your model by 180 in code</h3>
<p>CharacterDemo.cpp</p>
<pre><code class="lang-auto">void CharacterDemo::CreateCharacter()
{
    ResourceCache* cache = GetSubsystem&lt;ResourceCache&gt;();

    Node* objectNode = scene_-&gt;CreateChild("Jack");
    objectNode-&gt;SetPosition(Vector3(0.0f, 1.0f, 0.0f));

    // rotate model by 180 ****************************
    Node* adjustNode = objectNode-&gt;CreateChild("AdjNode");
    Quaternion qAdjRot(180, Vector3(0,1,0) ); // rotate it by 180 
    adjustNode-&gt;SetRotation( qAdjRot );

    // Create the rendering component + animation controller
    AnimatedModel* object = adjustNode-&gt;CreateComponent&lt;AnimatedModel&gt;();

    //********************* change the model and material name
    object-&gt;SetModel(cache-&gt;GetResource&lt;Model&gt;("Models/Jack.mdl"));
    object-&gt;SetMaterial(cache-&gt;GetResource&lt;Material&gt;("Materials/Jack.xml"));
    object-&gt;SetCastShadows(true);

    adjustNode-&gt;CreateComponent&lt;AnimationController&gt;();

      // ******************** rename it to proper head joint name // Set the head bone for manual control
    object-&gt;GetSkeleton().GetBone("Bip01_Head")-&gt;animated_ = false;

. . .
}</code></pre>
<pre><code class="lang-auto">void CharacterDemo::HandlePostUpdate(StringHash eventType, VariantMap&amp; eventData)
{
    if (!character_)
        return;

    Node* characterNode = character_-&gt;GetNode();

    // Get camera lookat dir from character yaw + pitch
    Quaternion rot = characterNode-&gt;GetRotation();
    Quaternion dir = rot * Quaternion(character_-&gt;controls_.pitch_, Vector3::RIGHT);

    // ************* rename it to proper head joint name // Turn head to camera pitch, but limit to avoid unnatural animation
    Node* headNode = characterNode-&gt;GetChild("Bip01_Head", true);
    float limitPitch = Clamp(character_-&gt;controls_.pitch_, -45.0f, 45.0f);
    Quaternion headDir = rot * Quaternion(limitPitch, Vector3(1.0f, 0.0f, 0.0f));
    // This could be expanded to look at an arbitrary target, now just look at a point in front
    Vector3 headWorldTarget = headNode-&gt;GetWorldPosition() + headDir * Vector3(0.0f, 0.0f, -1.0f); // -z direction ****************************
    headNode-&gt;LookAt(headWorldTarget, Vector3(0.0f, 1.0f, 0.0f));
    // Correct head orientation because LookAt assumes Z = forward, but the bone has been authored differently (Y = forward)
//    headNode-&gt;Rotate(Quaternion(0.0f, 90.0f, 90.0f)); //************************* dont need this

. . . 
}</code></pre>
<p>Character.cpp</p>
<pre><code class="lang-auto">void Character::FixedUpdate(float timeStep)
{
    /// \todo Could cache the components for faster access instead of finding them each frame
    RigidBody* body = GetComponent&lt;RigidBody&gt;();
    AnimationController* animCtrl = node_-&gt;GetComponent&lt;AnimationController&gt;(true); //********** recursive get

. . . 
}</code></pre>
<p>Edit: changed comment to “recursive get”</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/88_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jenge</div>
          <div class="post_content">
<p>Wow, great docs on the model import process!  High quality 3D models have always been one of the most challenging assets for projects.  This is really awesome. thanks for the models and trailblazing the process  <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/681663cf4b0ef54ca55e07e2e5f4c951.png" width="20"/> jenge:</div>
<blockquote>
<p>Wow, great docs on the model import process!  High quality 3D models have always been one of the most challenging assets for projects.  This is really awesome. thanks for the models and trailblazing the process  <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
</blockquote>
</aside>
<p>You’re welcome.</p>
<p>I was really surprised by how easy it was to download then import character/animations using the <strong>Porting character/animation right out of <a href="http://mixamo.com">mixamo.com</a></strong> method.<br/>
It was my first attempt and didn’t expect to have an animating character in Urho3D following this process**.  Can’t get any easier than that!</p>
<p>Edit: **rephrased</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bluemoon</div>
          <div class="post_content">
<p>Great work Lumark!! This is just what I need</p>
<p>Unfortunately when I import the models into the editor and setup the materials I get an unlit material like shown below <div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/ucUFJ7p.jpg" rel="nofollow noopener" title=""><img alt="" height="356" src="../../../images2/0783cc7e990a5640b5e25ee850f05d6f.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">818×423</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div><br/>
When I edited the material’s technique from “Techniques/DiffNormalSpec.xml” to “Techniques/DiffNormalSpecEmissive.xml” it seemed to correct but I noticed that it flickers on and off based on camera angle.</p>
<p>I honestly have no idea what is going on and I really need to use these models, most importantly their animations  <img alt=":frowning:" class="emoji" src="../../../images2/c383444e3b50f1554d2f21c7c206ca52.png" title=":frowning:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">NiteLordz</div>
          <div class="post_content">
<p>i found that the models from that were in the repo, were not compatible with the latest version of github, as they were missing vertex declarations.</p>
<p>to test, don’t supply a material when using, and it will use the default white material.</p>
<p>i had to export the models myself, which given the above process was simple! (GREAT job btw).</p>
<p>Once i got the steps down, it was easy to follow and import.</p>
<p>I now can test a handful of things i have been wanting, but couldn’t because of lack of animation skill.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>Current Urho runtime code should load both the old &amp; new models, that means without or with vertex declarations.</p>
<p>Where exactly did you run into trouble?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">NiteLordz</div>
          <div class="post_content">
<p>If you use the “Mutant” model as an example.</p>
<p>The material provided has a technique of DiffNormal.xml, this will render no model, but the shadow is animated.</p>
<p>If you modified the material to be just Diff.xml, the model will render properly (just not with a normal).</p>
<p>If you enable D3D11_CREATE_DEVICE_DEBUG, you get the following output</p>
<p><code>D3D11 WARNING: ID3D11Device::CreateInputLayout: The provided input signature expects to read an element with SemanticName/Index: 'BLENDINDICES'/0 and component(s) of the type 'int32'.  However, the matching entry in the Input Layout declaration, element[6], specifies mismatched format: 'R8G8B8A8_UINT'.  This is not an error, since behavior is well defined: The element format determines what data conversion algorithm gets applied before it shows up in a shader register. Independently, the shader input signature defines how the shader will interpret the data that has been placed in its input registers, with no change in the bits stored.  It is valid for the application to reinterpret data as a different type once it is in the vertex shader, so this warning is issued just in case reinterpretation was not intended by the author. [ STATE_CREATION WARNING #391: CREATEINPUTLAYOUT_TYPE_MISMATCH]
D3D11 WARNING: ID3D11DeviceContext::DrawIndexed: The Pixel Shader expects a Render Target View bound to slot 0, but none is bound. This is OK, as writes of an unbound Render Target View are discarded. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Render Target View here. [ EXECUTION WARNING #3146081: DEVICE_DRAW_RENDERTARGETVIEW_NOT_SET]</code></p>
<p>If you run the fbx model provided by mixamo thru the AssetImporter, then the model will just drop right in properly.</p>
<p>Hope this helps</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>That’s probably from missing tangents in the model, which are required for normal mapping techniques. D3D11 is strict in that sense and fails to create the input layout when shader wants data that isn’t there in the buffer (resulting in failure to render), while D3D9 and OpenGL would just fetch invalid data, probably zeroes.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>@ Bluemoon<br/>
Is it possible that it’s the same issue Cadaver mentioned with missing tangents? Try using an additional option <span class="bbcode-b">-t</span> in the assetImporter.</p>
<p><span class="mention">@NiteLordz</span>, the models in my repo didn’t work for you? Hmm, I’m using OpenGL renderer and it works for me, although, I also forgot to generate tangents.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">NiteLordz</div>
          <div class="post_content">
<p>Yea, I am on d3d 11, and they didn’t work.</p>
<p>When I reexport them, using it instructions, I added the -t and they worked.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Ok, good to know.  I’ll have to regenerate the .mdl files on the repo with tangents enabled - probably not today but in few days.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bluemoon</div>
          <div class="post_content">
<p><span class="mention">@Lumark</span>, I actually used the model in your repo. The issue might probably be with the tangent as noted by cadaver</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p><span class="mention">@Bluemoon</span>, ok I updated the swat and mutant.mdl files in the repo.  They should work properly now.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I’ve been working on the AssetImporter to squash “$AssimpFbx$” nodes that’s generated for several Mixamo characters.  This method saves me time from manually editing all joints with pivot transforms in Maya.</p>
<p>See the first page, <a data-bbcode="true" href="http://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/1">http://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/1</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/74_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">TheSHEEEP</div>
          <div class="post_content">
<p>Is there a reason not to do that automatically?<br/>
And instead create an option to disable the feature.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p><span class="mention">@SHEEP</span><br/>
Good question. I’ve considered having this option set as default but have two reasons why it’s not yet.  First is I don’t know how prevalent this problem is.  I have bought some models with fbx files and couple models had few $AssimpFbx$ ($fbx for short from now on) bones generated but not in the extent which generated near 200 like some mixamo models.</p>
<p>Is it common? I don’t know the answer.</p>
<p>Second is while it’s it’s common to have multiple $fbx nodes per bone in models, I have yet to see multiple $fbx nodes per bone articulated in animation. I haven’t sampled enough mixamo animation files to know if there exists such case.  If they do exist then complexity of extrapolating animation would became significantly more difficult; something that would require testing.</p>
<p>If anyone finds an fbx model that cannot be animated using this option, whether it’s mixamo model or your own, I’d like to get my hands on it for testing.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Added a few more mutant anims in the repo.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Added two more Mutant [color=#0000FF]layer animations[/color]: Throw and HitHead.  And with that, I’ll say the Mutant sample animation is now complete.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Thanks for sharing them!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/88_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jenge</div>
          <div class="post_content">
<p>Thanks!</p>
<p>Great work documenting the process!</p>
<p>I had fun yesterday porting the character example to C#, you can checkout the <span class="bbcode-i">work in progress</span> scripts here:</p>
<p><a href="https://github.com/AtomicGameEngine/AtomicExamples/tree/master/AtomicNET/AtomicMutant/Resources/Components" rel="nofollow noopener">github.com/AtomicGameEngine/Ato … Components</a></p>
<p><img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
<div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="GO0yr9wCdlY" data-youtube-title="C# Character Controller"></div>
<ul>
<li>Josh</li>
</ul>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Can you please specify velocity of walk/run anims?</p>
<p>I tried to adjust velocity of Swat:WalkFwd, it’s about 1.5~2.0m/s, but it’s pretty hard for me.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I don’t have the velocity info on the walk/run anims.  You can try dumping the foot joint position keys during the animations and derive it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-username="Lumak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b3b294bc4454bf21e07a40d7aa09761d.png" width="20"/> Lumak:</div>
<blockquote>
<p>I don’t have the velocity info on the walk/run anims.  You can try dumping the foot joint position keys during the animations and derive it.</p>
</blockquote>
</aside>
<p>Huh… The problem is that foot joint velocity is not always constant during ground contact…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Based on the animation duration and the distance traveled:<br/>
[ul]<br/>
[li]walk - 1.842 m/s[/li]<br/>
[li]run - 4.78 m/s[/li]<br/>
[li]sprint - 7.164 m/s[/li][/ul]</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dakilla</div>
          <div class="post_content">
<p>Hi</p>
<p>I detailed the process I used to convert mixamo animated models for Urho3D using Blender.<br/>
<a href="https://github.com/fredakilla/UrhoTournament/wiki/Import-mixamo-3D-model-to-Urho3D" rel="nofollow noopener">here</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Nice write up. I think that’ll be helpful for ppl using Blender.<br/>
I rarely use Blender but there’s Urho3D exporter for Blender.  Couldn’t you just use that instead and skip the middle step of exporting to an FBX file?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dakilla</div>
          <div class="post_content">
<p>It depends of the characters complexity, problem is if there is multiple geometries with multiple materials and if you want  a simplified model and unique material. when merging objects it is necessary to recreate uvmaps and bake textures, I dont think the exporter do that (maybe it is possible to automate the process). Why I did it manually, and it learn how to do it yourself <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> . But yes, it’s possible to use the blender exporter, it works fine, to directly export .mdl, materials, and textures instead of exporting to fbx and using manually AssetImporter.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I see. What you’ve described is useful for Blender users.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/704_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sirop</div>
          <div class="post_content">
<p>Hello, <span class="mention">@dakilla</span> ,<br/>
I used your method and could download and  export Malcolm from Blender to Urho with all the materials and textures set right.</p>
<p>However the exported animation does not work.</p>
<p>What shall I do? Apply some tweaks as <span class="mention">@Lumak</span> proposes?<br/>
Have some more sophisticated code than in 06_SkeletalAnimation sample ?</p>
<p>Thanks in advance.</p>
<p>BTW, when doing</p>
<blockquote>
<p>Animation* walkAnimation = cache-&gt;GetResource(“Malcolm/walking_inplace.ani”);<br/>
AnimationState* state = modelObject-&gt;AddAnimationState(walkAnimation);<br/>
// The state would fail to create (return null) if the animation was not found<br/>
if (state)<br/>
{		<br/>
URHO3D_LOGINFO(“Animation state added.”);<br/>
// Enable full blending weight and looping<br/>
state-&gt;SetWeight(1.0f);<br/>
state-&gt;SetLooped(true);<br/>
state-&gt;SetTime(Random(walkAnimation-&gt;GetLength()));<br/>
}</p>
</blockquote>
<p>I get no “Animation state added.” message in the log file.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Mixamo made some changes since this post: FBX download option was added and you should always choose <strong>FBX for Unity(.fbx).</strong></p>
<p>Simply download the model and animations and import them directly from the editor and they’ll work.  Although, you’ll still have to scale the main node to (0.01, 0.01, 0.01).</p>
<p>I tested Malcolm model with walking in-place animation:<br/>
<img alt="" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/c/ce7f905339803789a4843dfcde1aa6b51af376ab.png"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/704_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sirop</div>
          <div class="post_content">
<aside class="quote no-group" data-post="41" data-topic="2147" data-username="Lumak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b3b294bc4454bf21e07a40d7aa09761d.png" width="20"/> Lumak:</div>
<blockquote>
<p>Simply download the model and animations</p>
</blockquote>
</aside>
<p>Thanks for your answer. I already achieved similar results with Blender and simple ( non Unity) fbx.<br/>
But when using these results in sample 6 “SkeletonAnimation” no animation shows up.</p>
<p>What do you mean with “download the model and animations and import them” ?<br/>
Are there different files for the model and for animation on Mixamo?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Key word is “import them <em>directly from the editor</em>”, no Blender used. When using the editor, the import process calls AssetImporter.  Mixamo now offers two fbx formats to download, 1) an fbx format and 2) FBX for Unity(.fbx).  The first is probably a FBX 2016 format and the latter is most likely FBX 2013.  Assimp still only supports FBX 2013, so the logical choice is to choose FBX for Unity.</p>
<p>Just looked at both FBX formats in binary:</p>
<ul>
<li>FBX file =  FBX SDK/FBX Plugins version 2014.2.1</li>
<li>FBX for Unity = FBX SDK/FBX Plugins version 2014.2.1 build=20131219</li>
</ul>
<p>So, I still don’t address why it doesn’t work with Blender (someone else might have that answer as I don’t use Blender), but my point is you can use the Urho3D editor to import the fbx files directly and they’ll work, provided you download the FBX for Unity files.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<aside class="quote no-group" data-post="43" data-topic="2147" data-username="Lumak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b3b294bc4454bf21e07a40d7aa09761d.png" width="20"/> Lumak:</div>
<blockquote>
<p>So, I still don’t address why it doesn’t work with Blender</p>
</blockquote>
</aside>
<p>Autodesk license for their importer is incompatible with Blender license. Has been substituted with a reverse engineer solution, but without too much love… <img alt=":wink:" class="emoji" src="../../../images2/58bcd684421190f24be1944e2a997a04.png" title=":wink:"/></p>
<p>EDIT: I’ve used dae from Mixamo with Blender, with some success. But I’m not sure it they truly work…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/704_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sirop</div>
          <div class="post_content">
<p>Ok, thanks so far. Instead of using the Urho editor I used the Asset importer from command line.</p>
<p>Now I landed at something similar to  <a href="https://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/12">Spinning your model by 180 in code</a> .</p>
<p>Blender exporter has an option for exporting bones orientation. I would try this out<br/>
as I do not know how universal your approach in <a href="https://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/12">Spinning your model by 180 in code</a> is.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>Is there a question in your statement?  Anyway, there’s always alternatives. You can modify AssetImporter to flip the model and animation or fix Urho3D exporter for Blender.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3871_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">glebedev</div>
          <div class="post_content">
<p>Hey! I would like to add couple new animations for Mutant but bone names seems to be different if I export the model from Mixamo. In your original files the bone names have prefix Mutant and in my case it is mixamorig. Is there some export options I’m missing?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I had to do some backtracing to see how the bone names were named, and it looks like, as you already noticed, the mixamorig prefix was replaced with Mutant. The change in the prefix was I think it had to do with Maya adding additional prefix to already existing mixamorig prefix, which got really messy, and stripping that resulted in the model name prefix.<br/>
If you need to make changes to the model/animation set to add new animation(s) then you should.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>