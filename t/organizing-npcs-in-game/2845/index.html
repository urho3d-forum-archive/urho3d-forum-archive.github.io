<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Organizing NPCs in game</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Organizing NPCs in game</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Hi, all!</p>
<p>I know there are some experienced game devs here, so I’d like to have some idea.<br/>
I watched some GDC videos trying to grasp the subject, but it did not help. I don’t have<br/>
much experience with such game structures so I’d like to get some insight.</p>
<p>In GDC videos they say about some characters not having something like Entity and some don’t,<br/>
so I wonder, is this related…</p>
<p>The particular presentation I speak about is <a href="http://www.gdcvault.com/play/1022411/Massive-Crowd-on-Assassin-s" rel="nofollow noopener">http://www.gdcvault.com/play/1022411/Massive-Crowd-on-Assassin-s</a> there is also video on Youtube, but it is much less detailed.</p>
<p>About my problems:<br/>
I have somewhat working NPCs, but the level of scripts skyrocketed to  unmaintainable,<br/>
and for last 2 months I try to grasp manageable paradigm, but I seem to miss a lot.</p>
<p>In each character I have the following things:</p>
<p><strong>Visuals</strong> - looks, so the code which copes with actual graphics (models, etc.).<br/>
<strong>Controls</strong> - the low-level part of how character moves and some character animation tweaks<br/>
(like walk step sync with motion speed). Also some state machinery stuff which is close to controls.<br/>
<strong>AI</strong> - the behavior logic with state machinery.</p>
<p>This looks not very good as some parts are here and there with hacks here and there. Also it is very slow,<br/>
really struggling around 60fps on i7.<br/>
From Volition videos (usually some random devs chit-chat) I’ve learned that it is usually done differently,<br/>
so AI is priority-queued. So I want that so close characters have higher priority and react faster than distant ones. But this doesn’t fit into model I have. Also the above presentation lead me to idea that I need several types of AI which should be switcheable on runtime.<br/>
In addition I need to add AI-LODS and physics-LODS and animation-LODs to save on distant characters.<br/>
Doing all of the above requires me to completely rewrite logic, especially object model. As I’m prototyping I use AngelScript for that. Any ideas how can I organize my object model so I have enough flexibility to extend farther?<br/>
Any suggestions on where to go and what to read?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Well, I found that to make things extremely better I just need to implement Behavior Trees.<br/>
This flexible construct makes things much easier to understand and extend.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>