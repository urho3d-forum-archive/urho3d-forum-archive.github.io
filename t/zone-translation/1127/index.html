<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Zone translation</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Zone translation</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p>It’s an interesting thing but not implemented in the examples.</p>
<p>I did not find the <span class="bbcode-b">position setting</span> for a zone in the editor and in Zone.h<br/>
It is also not visible in the editor, if not highlighted in the scene tree.</p>
<p>I want ease of manipulation for the zones - how  for other (visible) objects in the scene.<br/>
Like:<br/>
<img alt="" height="" src="../../../images2/854378b86e473a24181581edc88e9a28.jpg" width=""/><br/>
I think would be good if the dummy will be replaced with primitives in editor.<br/>
Primitives may take a material appropriate to their type (audio emmiter, trigger, zone, etc.)<br/>
Not the standard primitive form can be added by user from any editor of 3D.<br/>
As in Urho editor - Builting objects.</p>
<p>In addition, well, if there is a drop-down list to set the flag visibility of objects by type</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p>Also, dummy objects can be visible in scene as icons<br/>
example - lamp icon <img alt="" height="" src="../../../images2/9d819c112d5c44e4ac069b7fd612ade6.jpg" width=""/><br/>
But should be able to be selected directly in scene.<br/>
and be able to move rotate et al.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p><img alt="" height="" src="../../../images2/ec731549b3bcc270213872486585017a.jpg" width=""/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p>My final goal is to do realization for clipping geometry using portals.<br/>
Seamless transition for indoor/outdoor scenes.</p>
<p><span class="bbcode-b">Torque 3D Portals</span> is children from the <span class="bbcode-b">Zone</span> objects (c ++)</p>
<p>Description of the <span class="bbcode-b">Portal</span> under the spoiler:</p>
<p>[spoiler]An object that provides a “window” into a zone, allowing a viewer to see what’s rendered in the zone.</p>
<p>A portal is an object that connects zones such that the content of one zone becomes visible in the other when looking through the portal.</p>
<p>Each portal is a full zone which is divided into two sides by the portal plane that intersects it. This intersection polygon is shown in red in the editor. Either of the sides of a portal can be connected to one or more zones.</p>
<p>A connection from a specific portal side to a zone is made in either of two ways:</p>
<p>By moving a Zone object to intersect with the portal at the respective side. While usually it makes sense for this overlap to be small, the connection is established correctly as long as the center of the Zone object that should connect is on the correct side of the portal plane.<br/>
By the respective side of the portal free of Zone objects that would connect to it. In this case, given that the other side is connected to one or more Zones, the portal will automatically connect itself to the outdoor “zone” which implicitly is present in any level.<br/>
From this, it follows that there are two types of portals:</p>
<p>Exterior Portals<br/>
An exterior portal is one that is connected to one or more Zone objects on one side and to the outdoor zone at the other side. This kind of portal is most useful for covering transitions from outdoor spaces to indoor spaces.<br/>
Interior Portals<br/>
An interior portal is one that is connected to one or more Zone objects on both sides. This kind of portal is most useful for covering transitions between indoor spaces./dd&gt;<br/>
Strictly speaking, there is a third type of portal called an “invalid portal”. This is a portal that is not connected to a Zone object on either side in which case the portal serves no use.</p>
<p>Portals in Torque are bidirectional meaning that they connect zones both ways and you can look through the portal’s front side as well as through its back-side.</p>
<p>Like Zones, Portals can either be box-shaped or use custom convex polyhedral shapes.</p>
<p>Portals will usually be created in the editor but can, of course, also be created in script code as such:</p>
<p>Script:</p>
<p><code>// Example declaration of a Portal.  This will create a box-shaped portal.
new Portal( PortalToTestZone )
{
   position = "12.8467 -4.02246 14.8017";
    rotation = "0 0 -1 97.5085";
    scale = "1 0.25 1";
    canSave = "1";
    canSaveDynamicFields = "1";
};</code><br/>
Note:<br/>
Keep in mind that zones and portals are more or less strictly a scene optimization mechanism meant to improve render times.[/spoiler]</p>
<p>Description of the <span class="bbcode-b">Zone</span> under the spoiler:</p>
<p>[spoiler]An object that represents an interior space.</p>
<p>A zone is an invisible volume that encloses an interior space. All objects that have their world space axis-aligned bounding boxes (AABBs) intersect the zone’s volume are assigned to the zone. This assignment happens automatically as objects are placed and transformed. Also, assignment is not exclusive meaning that an object can be assigned to many zones at the same time if it intersects all of them.</p>
<p>In itself, the volume of a zone is fully sealed off from the outside. This means that while viewing the scene from inside the volume, only objects assigned to the zone are rendered while when viewing the scene from outside the volume, objects exclusively only assigned the zone are not rendered.</p>
<p>Usually, you will want to connect zones to each other by means of portals. A portal overlapping with a zone</p>
<p>Script:</p>
<p><code>// Example declaration of a Zone.  This creates a box-shaped zone.
new Zone( TestZone )
{
   position = "3.61793 -1.01945 14.7442";
   rotation = "1 0 0 0";
   scale = "10 10 10";
};</code><br/>
Zone Groups<br/>
Normally, Zones will not connect to each other when they overlap. This means that if viewing the scene from one zone, the contents of the other zone will not be visible except when there is a portal connecting the zones. However, sometimes it is convenient to represent a single interior space through a combination of Zones so that when any of these zones is visible, all other zones that are part of the same interior space are visible. This is possible by employing “zone groups”.[/spoiler]</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p>The class hierarchy for the <span class="bbcode-b">Portal</span> with description:</p>
<p>[color=#008000] A transitioning zone that connects other zones.</p>
<p>Basically a portal is two things:</p>
<ol>
<li>A zone that overlaps multiple other zones and thus connects them.</li>
<li>A polygon standing upright in the middle of the portal zone’s world box.</li>
</ol>
<p>When traversing from zone to zone, portals serve as both zones in their own<br/>
right (i.e. objects may be located in a portal zone) as well as a peek hole<br/>
that determines what area of a target zone is visible through a portal.</p>
<p>Torque’s portals are special in that they are two-way by default.  This greatly<br/>
simplifies zone setups but it also complicates handling in the engine somewhat.<br/>
Also, these portals here are nothing but peek holes–they do not define transform<br/>
portals that could be looking at a different location in space altogether.</p>
<p>Portals can be marked explicitly as being one-sided by flagging either of the portal’s<br/>
sides as impassable.  This flagging can also be used dynamically to, for example, block<br/>
a portal while a door is still down and then unblock the portal when the door is<br/>
opened.</p>
<p>Portals are classified as either interior or exterior portals.  An exterior portal is<br/>
a portal that has only non-SceneRootZone zones on side of the portal plane and only the<br/>
SceneRootZone on the other side of it.  An interior portal is a portal that has only<br/>
non-SceneRootZone zones on both sides of the portal plane.  A mixture of the two is not<br/>
allowed – when adding SceneRootZone to a portal, it must exist alone on its portal<br/>
side.[/color]<br/>
[color=#0040BF]class[/color] <span class="bbcode-b">Portal</span> : [color=#0040BF]public[/color] <span class="bbcode-b">Zone</span></p>
<hr/>
<p>[color=#008000]A volume in space that encloses objects.</p>
<p>Zones do not physically contain objects in the scene.  Rather, any object<br/>
that has its world box coincide with the world box of a zone is considered<br/>
to be part of that zone.  As such, objects can be in multiple zones at<br/>
the same time.[/color]<br/>
[color=#0040BF]class[/color] <span class="bbcode-b">Zone</span> : [color=#0040BF]public[/color] SceneAmbientSoundObject&lt; <span class="bbcode-b">ScenePolyhedralZone</span> &gt;</p>
<hr/>
<p>[color=#008000]A simple zone space that is described by a polyhedron.</p>
<p>By default, if no other polyhedron is assigned to a polyhedral zone, the<br/>
polyhedron is initialized from the zone’s object box.[/color]<br/>
[color=#0040BF]class[/color] <span class="bbcode-b">ScenePolyhedralZone</span> : [color=#0040BF]public[/color] ScenePolyhedralObject&lt; <span class="bbcode-b">SceneSimpleZone</span> &gt;</p>
<hr/>
<p>[color=#008000]Abstract base class for a zone space that contains only a single zone.</p>
<p>Simple zones are required to be convex.[/color]<br/>
[color=#0040BF]class[/color] <span class="bbcode-b">SceneSimpleZone</span> : [color=#0040BF]public[/color] <span class="bbcode-b">SceneZoneSpace</span></p>
<hr/>
<p>[color=#008000]Abstract base class for an object that manages zones in a scene.</p>
<p>This class adds the ability to SceneSpace to define and manage zones within the object’s<br/>
space.  Zones are used to determine visibility in a scene.</p>
<p>Each zone space manages one or more zones in a scene.  All the zones must be within the<br/>
AABB of the zone space but within that AABB, the zone space is free to distribute and<br/>
manage zones in arbitrary fashion.</p>
<p>For scene traversal, zone spaces are interconnected.  By default, zone spaces get a chance<br/>
to connect to each other when being moved into each other’s zones.  An exception to this<br/>
is the root zone since it is both immobile and without position and (limited) extents.  If<br/>
a zone space wants to connect to the root zone, it must do so manually (same goes for<br/>
disconnecting).[/color]<br/>
[color=#0040BF]class[/color] <span class="bbcode-b">SceneZoneSpace</span> : [color=#0040BF]public[/color] <span class="bbcode-b">SceneSpace</span></p>
<hr/>
<p>SceneSpace is class for all game objects.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p>The extracted files from the Torque 3D described above and additional (that would not download the entire engine) <a data-bbcode="true" href="https://yadi.sk/d/SQ9C83YrhQYWU" rel="nofollow noopener">https://yadi.sk/d/SQ9C83YrhQYWU</a></p>
<p>And see how it work:<br/>
[video]<a href="https://youtu.be/zSqMkbDwz28%5B/video%5D" rel="nofollow noopener">https://youtu.be/zSqMkbDwz28[/video]</a><br/>
[video]<a href="https://youtu.be/JXjTF2pndRc%5B/video%5D" rel="nofollow noopener">https://youtu.be/JXjTF2pndRc[/video]</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Watch the language, guys.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">globus</div>
          <div class="post_content">
<p>Exist Occluders (in Urho) - it do part of scene invisible.<br/>
There is a desire to make antiOccluders (Portals) - it do part of scene visible.<br/>
It serves the same purpose, only for Indoor scenes.<br/>
Think this is the natural desire.</p>
<p>Well, i go read the theory and the source code.<br/>
Perhaps I do not understand something. <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">cadaver</div>
          <div class="post_content">
<p>At the moment there is no plan to make a portal based visibility system. Rather, in indoor scenes you should make your walls occluders - if they’re simple they should be extremely fast to rasterize for the software occlusion, and provide good hiding of geometry behind, while staying completely dynamic and allowing mixing of indoor / outdoor occlusion.</p>
<p>Also if you have a solid door between corridors which opens - just make it an occluder as well.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>