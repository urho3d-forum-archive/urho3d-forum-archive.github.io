<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Urho3d Works on HoloLens</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Urho3d Works on HoloLens</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Vincentwx</div>
          <div class="post_content">
<p>Just share a interesting and good news for Urho3D. Micrsoft’s UrhoSharp, which is a C# binding to Urho3d, allows you to develop games for HoloLens. Here is the link to the demo project:</p>
<p><a data-bbcode="true" href="https://github.com/xamarin/urho-samples/tree/master/HoloLens" rel="nofollow noopener">https://github.com/xamarin/urho-samples/tree/master/HoloLens</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">larsonmattr</div>
          <div class="post_content">
<p>Vincent, this is extremely exciting news!  There was an earlier thread about Hololens and Urho3D, but it was limited to trying to get it to works as a UWP application (i.e. 2D window).  I’ll take a look at the code example and start trying this out.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">larsonmattr</div>
          <div class="post_content">
<p>It was surprisingly easy to get the samples working in Visual Studio.  Very awesome.  And big congrats to Egor</p>
<p>I really enjoyed the crowdnavigation sample where you direct the movement of a group of 3d models walking on the floor.   The rendering and frame rates with some complex models were great and this looks extremely useable to HoloLens development.  I can see this being the best alternative to Unity3d now for the HoloLens!  Great news.</p>
<p>One thing I noticed with multiple of the samples is that there is some poor stability of the object positions in the room when compared against the DirectX samples or unity samples.   Possibly something with the reference frame or the spatial anchors is causing this.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">larsonmattr</div>
          <div class="post_content">
<p>I wonder if any custom Hololens code will be brought into the base Urho3D codebase from UrhoSharp?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/87_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sabotage3d</div>
          <div class="post_content">
<p>Awesome work guys. The only problem is the price of the hololens devkit <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/669_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Egorbo</div>
          <div class="post_content">
<p>heh, thanks guys!<br/>
it’s still a bit experimental,<br/>
for example, <a href="http://i.imgur.com/Bavyucp.png" rel="nofollow noopener">i.imgur.com/Bavyucp.png</a> the doc says I should render geometry via the “gree” approach but I’ve done it via “red” one.<br/>
The green one is done via Geometry Shaders (SV_RenderTargetArrayIndex) - <a href="https://developer.microsoft.com/en-us/windows/holographic/rendering_in_directx" rel="nofollow noopener">developer.microsoft.com/en-us/w … in_directx</a></p>
<p>HL device hides SwapChain and provides just a backbuffer. So I created two render targets from that backbuffer via this ugly code:<br/>
<a href="https://github.com/xamarin/Urho3D/blob/master/Source/Urho3D/Graphics/Direct3D11/D3D11Graphics.cpp#L2281-L2292" rel="nofollow noopener">github.com/xamarin/Urho3D/blob/ … 2281-L2292</a><br/>
(you can find my HL &amp; UWP changes under <span class="hashtag">#if</span> UWP and <span class="hashtag">#id</span> UWP_HOLO)</p>
<p>You can find some gifs in each directory of:<br/>
<a href="https://github.com/xamarin/urho-samples/tree/master/HoloLens" rel="nofollow noopener">github.com/xamarin/urho-samples … r/HoloLens</a></p>
<p>In my twitter, for example:<br/>
<a href="https://twitter.com/EgorBo/status/775816447041777664" rel="nofollow noopener">twitter.com/EgorBo/status/775816447041777664</a><br/>
<a href="https://twitter.com/EgorBo/status/780913171263619072" rel="nofollow noopener">twitter.com/EgorBo/status/780913171263619072</a><br/>
<a href="https://twitter.com/EgorBo/status/785103710829551616" rel="nofollow noopener">twitter.com/EgorBo/status/785103710829551616</a><br/>
<a href="https://twitter.com/migueldeicaza/status/775383058316926976" rel="nofollow noopener">twitter.com/migueldeicaza/statu … 8316926976</a></p>
<p>Youtube channel:<br/>
<a href="https://www.youtube.com/watch?v=sKDO19lMf-I" rel="nofollow noopener">youtube.com/watch?v=sKDO19lMf-I</a></p>
<p>The implementation is not backported to upstream as it’s not perfect, it has a custom SDL project and messy in general.</p>
<p>I’d love to hear some advices how to improve two-viewports performance or ideas how to implement that GS-based rendering.<br/>
PS: I love Urho3D architecture - it’s very clean! <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/></p>
<p><img alt="" height="244" src="../../../images2/9fd324467a2ec6926331d7ce23552b7e.gif" width="400"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/87_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sabotage3d</div>
          <div class="post_content">
<p>What is the performance of these tests? Can you make a screen with the HUD on the actual device?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">larsonmattr</div>
          <div class="post_content">
<p>EgorBo,</p>
<p>I looked back at the DirectX hololens samples I’m working with.  What I’ve seen is that although it contains shaders for both geometry-based instanced rendering and viewport shaders, it isn’t using the geometry shaders.  The renderers do a call to check if there is viewport support in the device, and for the hololens it is yes - so they use the viewport shaders.  With the viewport shaders it will render each eye’s camera pose independently, but right after each other.  Their performance guidelines seem to say avoid geometry shaders (<a href="https://developer.microsoft.com/en-us/windows/holographic/performance_recommendations" rel="nofollow noopener">developer.microsoft.com/en-us/w … mendations</a>), perhaps geometry shaders are not well suited to the HoloLens GPU?</p>
<p>What might be important for the performance is that the DirectX render loop in the main application does an update of the holographicFrame prediction (camera viewProject matrices for left/right eye) immediately prior to doing the actually viewport shader render calls.</p>
<pre><code>    // Up-to-date frame predictions enhance the effectiveness of image stablization and
    // allow more accurate positioning of holograms.
    holographicFrame-&gt;UpdateCurrentPrediction();
    HolographicFramePrediction^ prediction = holographicFrame-&gt;CurrentPrediction;</code></pre>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>