<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Android CMake Error, could&rsquo;nt find compiler toolchain</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Android CMake Error, could&rsquo;nt find compiler toolchain</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Oberos</div>
          <div class="post_content">
<p>I’m getting this error when running the cmake_android.bat file. I’m stumped here, what other env-var am I missing, or is there something else? Has anyone have had recent success making the project for armeabi-v7a 32bit android-19? Any help would be greatly appreciated, thanks.</p>
<blockquote>
<p>– Performing Test HAVE_NATIVE_COMPILER - Failed<br/>
CMake Error at CMake/Modules/CheckCompilerToolchain.cmake:162 (message):<br/>
Could not find native compiler toolchain.  This is usually caused by wrong<br/>
PATH env-var value.</p>
<p>CMake Error at C:/Program<br/>
Files/CMake/share/cmake-3.9/Modules/CMakeTestCCompiler.cmake:51 (message):</p>
<pre><code>The C compiler "C:/Program Files (x86)/Microsoft Visual Studio
14.0/VC/bin/cl.exe" is not able to compile a simple test program.

It fails with the following output:

 Change Dir: C:/Play/Urho3D/droid/generated/CMakeFiles/CMakeTmp
</code></pre>
</blockquote>
<p><strong>I have followed the documentation on both of theses links;</strong></p><aside class="quote quote-modified" data-post="1" data-topic="1938">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/5f8cd8c3f89aab362531d3518ed2deb6.png" width="20"/>
<a href="https://discourse.urho3d.io/t/howto-urho3d-android-setup-on-win7/1938">Howto: Urho3d Android setup on win7+</a> <a class="badge-wrapper bullet" href="/c/showcase/code-exchange/13"><span class="badge-category-parent-bg" style="background-color: #F1592A;"></span><span class="badge-category-bg" style="background-color: #231F20;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Share your helpful Urho3D code snippets, samples and tutorials here.">Code Exchange</span></a>
</div>
<blockquote>
    This is how I installed android dev env. 
I’m no expert, I’m sure there’s better ways or I did something wrong, please comment if so. 
<a data-bbcode="true" href="http://discourse.urho3d.io/t/android-build-on-windowsxp-issues/1934/1">I’ve given up winXP as I couldn’t fix the symbolic link issue on Android.</a> 
I Install (use the latest version) in this,  order look at my Console android-batch file for locations I use (with no spaces): 
7Zip 
Notepade++ 
Java JDK (I copy the jdk-folder to C:\JDK) 
TDM-GCC (required for <a data-bbcode="true" href="http://discourse.urho3d.io/t/android-build-on-win7-issue-solved/1937/2">lua tool building</a>) 
cmake 
ant 
gradle (not sure it’s required) 
Urho3D (C:\Ur…
  </blockquote>
</aside>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://urho3d.io/documentation/1.4/_building.html">
<header class="source">
<a href="https://urho3d.io/documentation/1.4/_building.html" rel="noopener nofollow ugc" target="_blank">Urho3D</a>
</header>
<article class="onebox-body">
<h3><a href="https://urho3d.io/documentation/1.4/_building.html" rel="noopener nofollow ugc" target="_blank">Documentation</a></h3>
<p>Urho3D is a free lightweight, cross-platform 2D and 3D game engine implemented in C++ and released under the MIT license. Greatly inspired by OGRE and Horde3D.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p><strong>Added these to my environment variable PATH</strong><br/>
<em>C:\Android\sdk\platform-tools;</em><br/>
<em>C:\Android\sdk\tools;</em><br/>
<em>C:\Android\sdk\tools\bin;</em><br/>
<em>C:\Android\sdk\ndk-bundle;</em><br/>
<em>C:\Android\sdk\ndk-bundle\build;</em><br/>
<em>C:\Android\sdk\ndk-bundle\prebuilt\windows\bin;</em><br/>
<em>C:\Android\sdk\ndk-bundle\prebuilt\windows-x86_64\bin;</em><br/>
<em>C:\Android\sdk\ndk-bundle\toolchains;</em><br/>
<em>C:\Android\sdk\ndk-bundle\toolchains\arm-linux-androideabi-4.9\prebuilt\windows-x86_64;</em></p>
<p><strong>And run the cmake_android.bat file with theses defines;</strong><br/>
<em>-DANDROID=1 -DANDROID_NATIVE_API_LEVEL=android-19 -DANDROID_ABI=armeabi-v7a -DANDROID_TOOLCHAIN_NAME=arm-linux-androideabi-clang</em></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3200_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">rku</div>
          <div class="post_content">
<p>Have you set <code>ANDROID_NDK</code> env/cmake variable to android ndk? You might also need <code>ANDROID_SDK</code> with a path to android sdk.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Oberos</div>
          <div class="post_content">
<p>Thank you for replying, These are the other environment variables I have set before (I should have posted them first). I’m at the point of uninstalling all of Android Studio and SDK NDK and installing older versions. Maybe someone that does have everything running can post the versions they have, what environment variables, and what android version they are building for?</p>
<p>ANDROID_HOME C:\Android\sdk<br/>
ANDROID_SDK C:\Android\sdk<br/>
ANDROID_NDK C:\Android\sdk\ndk-bundle<br/>
ANDROID_NDK_HOME C:\Android\sdk\ndk-bundle<br/>
ANDROID_PLATFORM_TOOLS C:\Android\sdk\platform-tools<br/>
GRADLE_HOME C:\gradle<br/>
JAVA_HOME C:\Program Files\Java\jdk1.8.0_172</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>Try disabling the tools build (possibly more, like Lua maybe) - the error seems to be that it can’t find a native compiler, not the Android ones, and I think that’s because the build system looks for one to build the tools like the Asset Importer (and maybe a tolua program). Not sure if that’s it, though…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Oberos</div>
          <div class="post_content">
<p>Thank you for the suggestion, I’ve added -DURHO3D_TOOLS=0 but still run into the “– Performing Test HAVE_NATIVE_COMPILER - Failed” error as before. I’ve given up on getting this to work with Android and have moved onto  working on iOS and PC. Thanks to all for the help, maybe one day in the future I’ll revisit getting Urho on Android.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>SirNate is right. When performing a cross-compiling build (Android build included) and that a host tool build is required then both the cross-compiler and native compiler toolchains need to be installed. For *nix host system, the latter is almost always the case for any development box. However, that is not so for Windows host. So on Windows host you should install MinGW in order to get started easily for Android build that requires the host tool building.</p>
<p>Having said that, that is not the last hurdle you will find for Android build at the moment. So if you already giving up after hitting this, may be you have made a right decision to skip Android platform first.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>Do I still need MinGW for windows when building Android APKs?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>If I remembered correctly, the android project generation is as easy as Visual Studio’s?</p>
<p>I don’t know much about Android development, however, I think we need to simplify it a little bit or write a tutorial on how to handle Android platform.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>This is an old thread that is no longer relevant. After switching to Gradle for Android build, the “cmake_android.bat” or “cmake_android.sh” are removed.</p>
<aside class="quote no-group" data-full="true" data-post="7" data-topic="4302" data-username="WangKai">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d788b223c509beebfc362364798c6b3.png" width="20"/> WangKai:</div>
<blockquote>
<p>Do I still need MinGW for windows when building Android APKs?</p>
</blockquote>
</aside>
<p>Yes, in short you still need it for building the host tool. But, if you do not use build options that require host tool building then you don’t need it. This is the same for all host systems when performing a cross-compiling build and at the same time performing host tool building and use the host tool on the fly in the build itself. In this scenario the build would require a host/native compiler to be around. On Linux or Mac, it can be GCC or Clang. On Windows, it can be MinGW or what have you.</p>
<aside class="quote no-group" data-post="8" data-topic="4302" data-username="WangKai">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d788b223c509beebfc362364798c6b3.png" width="20"/> WangKai:</div>
<blockquote>
<p>If I remembered correctly, the android project generation is as easy as Visual Studio’s?</p>
</blockquote>
</aside>
<p>It depends on who you ask. For me, each platform has its own challenge and cross-compiling is always more so compared to native compiling.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">

          </div>
        </div>
      </div>


    </div>
  </body>
</html>