<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>NPC pooling for crowds</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">NPC pooling for crowds</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">slapin</div>
          <div class="post_content">
<p>Hi, all!</p>
<p>I want to implement large amount of NPCs in world, i.e. keeping track of their state/action.<br/>
So I want to store position and general state for each NPC.<br/>
As soon as player comes closer to NPC he should see NPC doing something logical which is done according to schedule and impulses. So it should not be spawned out of sudden. Also, NPCs should be dynamic<br/>
so as time passes they change their occupation and location, and this location should be logical, i.e.<br/>
like leave work at 18:00, get in car and go home, and anywhere on path NPC could be intercepted.</p>
<p>What I think is that when player is distant, NPCs at locations are randomly spawn, as they are far from NPC,<br/>
the low-poly version is spawn, which does distant-behavior (simplified, just motion or idling or some<br/>
occupation animations like phone talking), no IK or physics or navmesh applied. All actions are according to place or spawn point. As player comes closer, the motion becomes physics-based, navmesh is used for reference, IK is applied for some animations like walking, interaction is possible between player and NPCs and between NPCs, behavior becomes complex and models are replaced by high-poly versions.</p>
<p>if player follows NPC, he can get for all his scedule. Other NPCs use standard spawning/removing.<br/>
I donâ€™t understand yet how to handle this, but I think this should be possible, probably keeping track of a set of closest NPCs and never remove them. So there should be some distance where NPCs are collected and spawned and inside this zone no collection and spawn should happen.</p>
<p>Any suggestions on how I could implement this? Which Urho features can be used?</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>