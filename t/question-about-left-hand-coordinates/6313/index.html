<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Question about left hand coordinates</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Question about left hand coordinates</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">btschumy</div>
          <div class="post_content">
<p>This is probably a newbie misunderstanding, but I have a question about the default Urho3D coordinates.  In the Conventions section of the documentation it says:</p>
<ul>
<li>Left-handed coordinates. Positive X, Y &amp; Z axes point to the right, up, and forward, and positive rotation is clockwise.</li>
</ul>
<p>However, when using the UrhoSharp implementation I see positive X pointing to the left.  Positive Y &amp; Z do indeed point up and forward.</p>
<p>This is driving me crazy because I am trying to port code from an iOS SceneKit implementation and there the coordinates are left handed as described in the above conventions.</p>
<p>Here is the code that is setting the scene up:</p>
<pre><code>		scene = new Scene();
		octree = scene.CreateComponent&lt;Octree&gt;();

		universeNode = scene.CreateChild();
		universeNode.SetScale(Const.SCENE_SCALE);

		cameraPanNode = scene.CreateChild();
		CameraNode = cameraPanNode.CreateChild();
		camera = CameraNode.CreateComponent&lt;Camera&gt;();
		CameraNode.Position = new Vector3(0, 0, Const.DEFAULT_POV_DISTANCE * Const.SCENE_SCALE);
</code></pre>
<p>Can someone help me understand what is going on here?  I don’t have any code anywhere (to my knowledge) that would flip the coordinate system.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="1" data-topic="6313" data-username="btschumy">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/a1234f56966a84b4071e0c8f4dfcb130.png" width="20"/> btschumy:</div>
<blockquote>
<p>I have a question about the default Urho3D coordinates. In the Conventions section of the documentation it says: […]<br/>
However, when using the UrhoSharp implementation I see positive X pointing to the left.</p>
</blockquote>
</aside>
<p>UrhoSharp is not Urho3D, and as such Urho3D documentation is not UrhoSharp documentation.</p>
<p>If UrhoSharp drives you nuts, try Urho3D. <img alt=":doughnut:" class="emoji" src="../../../images2/a31e07eca3ba91f49b69720fd70448b8.png" title=":doughnut:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">btschumy</div>
          <div class="post_content">
<p>Microsoft sure implies UrhoSharp is Urho3D with C# bindings.  Can you point me to something that says otherwise?  There really is not substantive UrhoSharp documentation because they assume you will use the Urho3D docs.</p>
<p>As far as I know I can’t use Urho3D in a Xamarin app.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I’m no sharpie, and <em>certainly</em> no fan of Microsoft (what parts of <a href="http://www.azillionmonkeys.com/qed/dosalot1.html">Sategllib</a>’s body this means to describe, I shall never know). In my view UrhoSharp is a - deceased - per<em>version</em>.</p>
<aside class="onebox allowlistedgeneric">
<header class="source">
<img class="site-icon" height="16" src="../../../images2/0a7d9802b385f6c77de37ab6e0062d5f.ico" width="16"/>
<a href="https://forums.xamarin.com/discussion/141631/urhosharp-is-dead-should-we-fork-it" rel="noopener" target="_blank">Xamarin Community Forums</a>
</header>
<article class="onebox-body">
<img class="thumbnail" height="" src="" width=""/>
<h3><a href="https://forums.xamarin.com/discussion/141631/urhosharp-is-dead-should-we-fork-it" rel="noopener" target="_blank">UrhoSharp is dead. Should we fork it?</a></h3>
<p>Soooooo... The Xamarin Team has done it to us once again.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="1" data-topic="6313" data-username="btschumy">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/a1234f56966a84b4071e0c8f4dfcb130.png" width="20"/> btschumy:</div>
<blockquote>
<p>However, when using the UrhoSharp implementation I see positive X pointing to the left. Positive Y &amp; Z do indeed point up and forward.</p>
</blockquote>
</aside>
<p>I wonder how do you check that.<br/>
It’s really weird, axes shall not be filpped under any circumstances.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">throwawayerino</div>
          <div class="post_content">
<p>Are you working with local or world coordinates? As far as I know, Y is up, Z is forward, and X is Right(?). Check the Vector3 constants <code>Vector3::UP</code>, <code>Vector3::Right</code>, etc.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">btschumy</div>
          <div class="post_content">
<p>So I distilled the creation of my scene to the bare minimum that shows the problem.  In this code I have positioned the camera 10 units along the z axis.  I have created a sphere at (3, 0, 0).  I have called LookAt to look down at the origin.</p>
<p>On the screen, the ball appears to the left of center when I would assume it should appear to the right (positive x).</p>
<p>The only thing that might appear suspect is LookAt.  I wasn’t totally sure what to specify for the “up” vector but all the example code used Vector3.UnitY so I did as well.</p>
<p>Here is the code:</p>
<pre><code>    private void CreateTestScene()
	{
		scene = new Scene();
		octree = scene.CreateComponent&lt;Octree&gt;();

		universeNode = scene.CreateChild();
		
		cameraNode = universeNode.CreateChild();
		camera = cameraNode.CreateComponent&lt;Camera&gt;();
		cameraNode.Position = new Vector3(0, 0, 10);
		cameraNode.LookAt(new Vector3(0, 0, 0), Vector3.UnitY);

		sunNode = universeNode.CreateChild();
		sunNode.Position = new Vector3(3f, 0, 0);

		var sphere = sunNode.CreateComponent&lt;StaticModel&gt;();
		sphere.Model = CoreAssets.Models.Sphere;

		var sunMaterial = ResourceCache.GetMaterial("Materials/Sun.xml");
		sphere.SetMaterial(sunMaterial);
	}
</code></pre>
<p>In the actual app, I have an image of the Galaxy with lots of objects around it (star clusters, globular clusters, etc).  They are in the wrong position unless I negate the x coordinate.  I know the actually position is correct because I am porting from an iOS SceneKit app and the coordinates uses there are identical.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/96_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts1</div>
          <div class="post_content">
<p>Your camera is looking backwards. If it were located at -10, and looking forward along +Z, then the ball would appear to the right, but since you’re looking backwards along -Z, it appears to the left.<br/>
<div class="lightbox-wrapper"><a class="lightbox"   title="image"><img alt="image" data-base62-sha1="edWXp8hRhUUQK0RzAJDKbdYmN2d"  height="500" src="../../../images2/aac5c09f01d8f54c515e0a61a7b6d79a.png" width="535"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">image</span><span class="informations">575×537 59.9 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">btschumy</div>
          <div class="post_content">
<p>I appreciate your taking the time to help me out.</p>
<p>Is that really how this works?   That seems bizarre to me and is not the way Apple’s SceneKit works.  You have to look at it from behind to see the axes running in the correct direction?</p>
<p>If I’m looking in real life at an x-axis, I expect to see it increasing to he right.  To say that I need to view it from behind to have it increased to the right just seems very strange.</p>
<p>I’m not saying that you’re wrong.  Apple’s SceneKit is the only other 3D programming I’ve done and as I said, it works differently.</p>
<p>Almost all the sample code I’ve seen has the camera positioned at positive x, y, z.  So in the case, when looking at the scene, the x coordinate is increasing to the left?</p>
<p>If this is the way it works, then I will live with it.  Is there some simple call I can make to change it to what I’m familiar with?  I have a lot of code I’m porting over and it would be much easier if the coordinate systems worked the same way.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/96_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JTippetts1</div>
          <div class="post_content">
<p>In a left-handed system, a camera with no transformation will sit at the point (0,0,0), and look along the +Z axis, with up being the +Y axis. The -Z axis is behind the camera. X will increase to the right, Y will increase up. If you place the camera somewhere on the +Z axis, then look at the origin, the camera is now looking directly backwards. Now, X will appear to increase to the left, because you have essentially applied a 180 degree rotation around the up axis.</p>
<p>I did a quick google about Apple SceneKit, and apparently it uses a right-handed coordinate system, so that is most likely the cause of your issues. If you’re coming from a right-hand coordinate system, then yes the simplest method is to invert the X axis to convert to left-handed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">vmost</div>
          <div class="post_content">
<p><a href="https://developer.apple.com/documentation/scenekit/organizing_a_scene_with_nodes" rel="nofollow noopener">Here</a> it says SceneKit uses a right-handed system, while the documentation for Urho3D you cited says Urho3D uses a left-handed system. I’d say it’s fairly self-explanatory.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="9" data-topic="6313" data-username="btschumy">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/a1234f56966a84b4071e0c8f4dfcb130.png" width="20"/> btschumy:</div>
<blockquote>
<p>Is there some simple call I can make to change it to what I’m familiar with?</p>
</blockquote>
</aside>
<p>Check this:</p><aside class="onebox githubissue" data-onebox-src="https://github.com/urho3d/Urho3D/issues/2642">
<header class="source">
<a  rel="noopener nofollow ugc" target="_blank">github.com/urho3d/Urho3D</a>
</header>
<article class="onebox-body">
<div class="github-row">
<div class="github-icon-container" title="Issue">
<svg aria-hidden="true" class="github-icon" height="60" viewbox="0 0 14 16" width="60"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
</div>
<div class="github-info-container">
<h4>
<a  rel="noopener nofollow ugc" target="_blank">How to change from left to right handed coordinate system?</a>
</h4>
<div class="github-info">
<div class="date">
        opened <span class="discourse-local-date" data-date="2020-06-05" data-format="ll" data-time="15:48:42" data-timezone="UTC">03:48PM - 05 Jun 20 UTC</span>
</div>
<div class="date">
          closed <span class="discourse-local-date" data-date="2020-06-14" data-format="ll" data-time="19:53:01" data-timezone="UTC">07:53PM - 14 Jun 20 UTC</span>
</div>
<div class="user">
<a href="https://github.com/ChrisDenham" rel="noopener nofollow ugc" target="_blank">
<img alt="ChrisDenham" class="onebox-avatar-inline" height="20" src="../../../images2/0c4bde037fb35f5ba3ea2be153644917" width="20"/>
          ChrisDenham
        </a>
</div>
</div>
<div class="labels">
</div>
</div>
</div>
<div class="github-row">
<p class="github-body-container">Is there a "proper" way to switch Urho3D to use a right handed coordinate system<span class="show-more-container"><a class="show-more" href="" rel="noopener">…</a></span><span class="excerpt hidden">?
(As Urho defaults to a left handed system)

The reason I need this is for compatibility with a large system I am trying to adapt to use Urho3D for the 3D engine.

So far, I seem to have made good progress by misusing the `Camera::SetFlipVertical`  function in both DX9 and OGL modes. However, this is not ideal because that seems to really be intended for internal use, plus in OGL I have to keep re-enabling it because Urho resets it to false after each frame. I think there are probably other things that will bite me for this kludge too.

I did wonder if setting a custom projection via Camera::SetProjection, but that seems to disable the automatic aspect ratio adjustment. So I wondered if there is something I'm missing that would help me here?</span></p>
</div>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>However, UrhoSharp doesn’t have the latest patch, so you will have to constantly enable this flag if you decide to use it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3871_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">glebedev</div>
          <div class="post_content">
<p>Urhosharp isn’t supported anymore. On other hand *** looks promising.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">btschumy</div>
          <div class="post_content">
<p>Thanks for confirming that  SceneKit and Urho3D use a different handedness for their coordinate systems.  That makes sense.  Now I just need to decide whether to try to flip it or just live with it and change my code as needed.</p>
<p>With regards to whether or nor UrhoSharp is supported or not…  If it is indeed no longer supported, I wish Microsoft would remove it from the Xamarin docs which say this is the way to do 3D graphics in Xamarin.  I figure if I really need to I can switch to ***, but right now it appears UrhoSharp does what I need.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">throwawayerino</div>
          <div class="post_content">
<p>UrhoSharp is just a bindings generator. Unless Urho3D 2.0 happens you could always build it yourself in an hour</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="15" data-topic="6313" data-username="throwawayerino">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/3d8d87e5724712e6dd00d78c32febd6a.png" width="20"/> throwawayerino:</div>
<blockquote>
<p>you could always build it yourself in an hour</p>
</blockquote>
</aside>
<p>… if you have Mac. If you don’t, it’s bad to be you.<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="image"><img alt="image" data-base62-sha1="cQ27eSxL8AvzfTwpXdNw15MvWkc"  height="139" src="../../../images2/27d4bc9b156c18be8a3162c98f2abcd5.png"  width="345"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">735×298 18 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>