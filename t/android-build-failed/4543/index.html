<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Android build failed</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Android build failed</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1699_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">CaptainCN</div>
          <div class="post_content">
<p>I’m runing  ./gradlew build -PANDROID_ABI=armeabi-v7a<br/>
system: Windows 10</p>
<p>[216/953] Running utility command for rapidjson<br/>
FAILED: cmd.exe /C</p>
<p>…</p>
<p>???<br/>
ninja: build stopped: subcommand failed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I guess when in Rome, do as the Romans do. Use gradlew.bat instead of ./gradlew.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1699_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">CaptainCN</div>
          <div class="post_content">
<p><img alt=":sweat_smile:" class="emoji" src="../../../images2/677108e2ca3184440222fa48fee4f409.png" title=":sweat_smile:"/> I tried. Got follow errors.</p>
<p>– Detecting CXX compile features - done<br/>
CMake Error at E:/test/Urho3D-me/CMake/Modules/CheckCompilerToolchain.cmake:193 (message):<br/>
Could not check compiler toolchain as it does not handle ‘-E -dM’ compiler<br/>
flags correctly<br/>
Call Stack (most recent call first):<br/>
E:/test/Urho3D-me/CMake/Modules/UrhoCommon.cmake:123 (include)<br/>
CMakeLists.txt:46 (include)</p>
<p>– Configuring incomplete, errors occurred!<br/>
See also “E:/test/Urho3D-me/android/urho3d-lib/.externalNativeBuild/cmake/debug/armeabi-v7a/Source/Urho3D/tolua+±prefix/src/tolua+±build/CMakeFiles/CMakeOutput.log”.<br/>
ninja: build stopped: subcommand failed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>It’s a common pitfall for Windows host as our build system requires native compiler toolchain to be made available for host tool building. Read the online doc or do some search in the forum. Also make sure you are using master branch.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Also try to nuke your old build tree before retrying. Sometime previous failed attempts may get in the way.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1699_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">CaptainCN</div>
          <div class="post_content">
<p>Still failed.</p>
<p><img alt="image" height="231" src="../../../images2/18b3233bf5d4f88765c6b777527447fe.png" width="559"/></p>
<p><img alt="image" height="416" src="../../../images2/042e7e04c5c851ed852e784cf6ca3112.png" width="676"/><br/>
<img alt="image" height="215" src="../../../images2/48c98383d5e3cf188073c8cb48cce4ed.png" width="403"/></p>
<p>What is ‘native compiler toolchain’ ？</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>If you don’t understand what that meant, perhaps you should start by disabling the LUA subsystem first. Our build system tries to build host tool using native compiler toolchain in one go while crosscompiling. This has been asked and answered a few times in the forum. It gets old for me. So, I am sorry if my response is not very useful.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1699_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">CaptainCN</div>
          <div class="post_content">
<p>I think this error not about lua.</p>
<p><img alt="image" height="214" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/d/d611539db4216a07a7f70ea696305fd1715187cc.png" width="690"/><br/>
I copy this command in a bat and run.<br/>
I got<br/>
<img alt="image" height="79" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/c/c954138f63c32f12c8a0bba2d0c3f768e839b55d.png" width="209"/></p>
<p>command too long.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1699_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">CaptainCN</div>
          <div class="post_content">
<p>I changed my pc language to English. And rebuild Urho3d.<br/>
Got error message in English:<br/>
<img alt="image" height="227" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/2X/f/fc9494c5aaba67c3fd47ab9653826419b5ce246c.png" width="690"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Yup, that’s another common pitfall for Windows users after managing to clear the compiler toolchain check. See <a href="https://discourse.urho3d.io/t/new-gradle-build-system-for-android-platform/4380/63">New Gradle build system for Android platform</a>. At this point I am also not sure why Windows 10 has this issue while it seems Windows 7 is fine.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bluemoon</div>
          <div class="post_content">
<p>This pitfall was really heartbreaking for me <img alt=":sweat:" class="emoji" src="../../../images2/9e5534641116e9e568024560e0c1a782.png" title=":sweat:"/></p>
<p>I even tried the response file solution but it seems not to work ( I might probably be doing something wrong) so I actually gave it a break for a while. It would be nice if there could be a solution</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group" data-post="11" data-topic="4543">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/f4748da84624d02ddd97927fbea23bd6.png" width="20"/> Bluemoon:</div>
<blockquote>
<p>It would be nice if there could be a solution</p>
</blockquote>
</aside>
<p><img alt=":man_facepalming:" class="emoji" src="../../../images2/a354cb465626e5ffb5ee0984802abf58.png" title=":man_facepalming:"/><br/>
It’s called Linux.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/348_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bluemoon</div>
          <div class="post_content">
<p><img alt=":laughing:" class="emoji" src="../../../images2/41cf946a94ea185b4d9a2295a156302f.png" title=":laughing:"/><img alt=":laughing:" class="emoji" src="../../../images2/41cf946a94ea185b4d9a2295a156302f.png" title=":laughing:"/><img alt=":laughing:" class="emoji" src="../../../images2/41cf946a94ea185b4d9a2295a156302f.png" title=":laughing:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<aside class="quote no-group" data-post="11" data-topic="4543">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/f4748da84624d02ddd97927fbea23bd6.png" width="20"/> Bluemoon:</div>
<blockquote>
<p>I even tried the response file solution but it seems not to work ( I might probably be doing something wrong) so I actually gave it a break for a while. It would be nice if there could be a solution</p>
</blockquote>
</aside>
<p>It may worth your while by getting yourself familiar with Docker. Perhaps I should not say much until the whole thing materialized but there is a good chance Windows users (or as a matter of fact users on any hosts that could run docker image) would be able to pull Urho3d prepared docker image from Docker Hub that targets a  specific platform, run it  locally to build the project, and get the build artifacts as the result.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>