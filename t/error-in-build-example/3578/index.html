<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Error in build example</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Error in build example</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>Hi, I’m trying to use version 1.7 from Git.<br/>
I get the below error when building using VS2017 in Windows 10 64 bit.<br/>
The error seems to be from script compiler and nanodbc.</p>
<p>I used CMake to generate VS solution file.</p>
<p>Severity	Code	Description	Project	File	Line	Suppression State<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\Source\Tools\ScriptCompiler\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\bin\tool\ScriptCompiler.exe	1	<br/>
Error	MSB6006	“cmd.exe” exited with code 1.	RESOURCE_CHECK_2iiDm	C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\VC\VCTargets\Microsoft.CppCommon.targets	171	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	33_Urho2DSpriterAnimation	D:\Current Code\Urho3D-master\VS2017\Source\Samples\33_Urho2DSpriterAnimation\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	33_Urho2DSpriterAnimation	D:\Current Code\Urho3D-master\VS2017\bin\33_Urho2DSpriterAnimation_d.exe	1	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	36_Urho2DTileMap	D:\Current Code\Urho3D-master\VS2017\Source\Samples\36_Urho2DTileMap\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	36_Urho2DTileMap	D:\Current Code\Urho3D-master\VS2017\bin\36_Urho2DTileMap_d.exe	1	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	34_DynamicGeometry	D:\Current Code\Urho3D-master\VS2017\Source\Samples\34_DynamicGeometry\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	34_DynamicGeometry	D:\Current Code\Urho3D-master\VS2017\bin\34_DynamicGeometry_d.exe	1	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	32_Urho2DConstraints	D:\Current Code\Urho3D-master\VS2017\Source\Samples\32_Urho2DConstraints\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	32_Urho2DConstraints	D:\Current Code\Urho3D-master\VS2017\bin\32_Urho2DConstraints_d.exe	1	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	37_UIDrag	D:\Current Code\Urho3D-master\VS2017\Source\Samples\37_UIDrag\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	37_UIDrag	D:\Current Code\Urho3D-master\VS2017\bin\37_UIDrag_d.exe	1	<br/>
…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>You should also show the steps you took to generate your build tree (solution file). When the build tree is corrupted, there is no harm to discard it and regenerate from scratch.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>Thanks,<br/>
I will re-download and try again with CMake gui.<br/>
I didn’t have these error message in version 1.6.</p>
<p>Best regards</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>Hi, I have redownload and have the same issue:<br/>
I found on the internet that</p>
<p>Severity	Code	Description	Project	File	Line	Suppression State<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\Source\Tools\ScriptCompiler\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\bin\tool\ScriptCompiler.exe	1	<br/>
Error	MSB6006	“cmd.exe” exited with code 1.	RESOURCE_CHECK_A0qog	C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\VC\VCTargets\Microsoft.CppCommon.targets	171	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	33_Urho2DSpriterAnimation	D:\Current Code\Urho3D-master\VS2017\Source\Samples\33_Urho2DSpriterAnimation\Urho3D_d.lib(nanodbc.obj)	1	<br/>
Error	LNK1120	1 unresolved externals	33_Urho2DSpriterAnimation	D:\Current Code\Urho3D-master\VS2017\bin\33_Urho2DSpriterAnimation_d.exe	1	<br/>
Error	LNK2001	unresolved external symbol “public: static class std::locale::id std::codecvt&lt;char16_t,char,struct _Mbstatet&gt;::id” (?id@?$codecvt@_SDU_Mbstatet@@<span class="mention">@std</span>@<span class="mention">@2V0locale</span>@2@A)	35_SignedDistanceFieldText	D:\Current Code\Urho3D-master\VS2017\Source\Samples\35_SignedDistanceFieldText\Urho3D_d.lib(nanodbc.obj)	1	<br/>
…</p>
<p>Here the the CMake Gui config.<br/>
<img alt="image" height="500" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/c65360dadde7cf33ad5f45ba8faba79e04cf29e1.png" width="523"/><br/>
<img alt="image" height="500" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/c727e6e18d126650e0c89cb03da6086694ef93c4.png" width="633"/><br/>
<img alt="image" height="341" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/bcb58c49eaf37af86ffac06bb2f92825db2a0526.png" width="690"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>In that case it could be a bug then. Could you raise a new issue in our issue tracker or even better a PR if/when you figure out how to fix it. Personally I have not tried to use URHO3D_DATABASE_ODBC build option on Windows platform, so this code path may not be as tested as the other parts of our code base. Normally we use ODBC for sever side and that usually means Linux.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>Hi I have managed to build by adding 2 changes to the nanodbc.cpp file on line 211 and line 233.</p>
<p>Wherever you see _MSC_VER == 1900, change it to below.</p>
<p>_MSC_VER &gt;= 1900</p>
<p>Best regards</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I see the nanodbc team has already fixed this issue a few months ago, however, we have not pull from its upstream repository for quite some time now.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>It appears the upstream also does not make any new release since the last time we sync with them. Nevertheless, I have synced with their master branch (with 9118e9c300f218629c83de3a9dcd0999ebbe711e as the last commit).</p>
<p><span class="mention">@George1</span> Please kindly retry to build Urho with ODBC enabled on VS2017 to see if it works out of the box for you now. Thanks.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>Hi weitjong,</p>
<p>It build fine with the new updated lib.</p>
<p>However, if you enable any of the below option in cmake the build will fail. Especially the Unicode option.</p>
<p><img alt="image" height="52" src="//cdck-file-uploads-global.s3.dualstack.us-west-2.amazonaws.com/standard17/uploads/urho3d/original/1X/f461ab0ec50276fedcf91ec977a70d5f2a5ddf43.png" width="690"/></p>
<p>Severity	Code	Description	Project	File	Line	Suppression State<br/>
Error	LNK2019	unresolved external symbol “public: __cdecl nanodbc::connection::connection(class std::basic_string&lt;char,struct std::char_traits,class std::allocator &gt; const &amp;,long)” (??0connection@nanodbc@<span class="mention">@QEAA</span>@AEBV?$basic_string@DU?$char_traits@D@std@<span class="mention">@V</span>?$allocator@D@2@<span class="mention">@std</span>@<span class="mention">@J</span>@Z) referenced in function “public: __cdecl Urho3D::DbConnection::DbConnection(class Urho3D::Context *,class Urho3D::String const &amp;)” (??0DbConnection@Urho3D@<span class="mention">@QEAA</span>@PEAVContext@1@AEBVString@1@<span class="mention">@Z</span>)	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\Source\Tools\ScriptCompiler\Urho3D_d.lib(ODBCConnection.obj)	1	<br/>
Error	LNK2019	unresolved external symbol "public: class std::basic_string&lt;char,struct std::char_traits,class std::allocator &gt; __cdecl nanodbc::result::column_name(short)const " (?column_name@result@nanodbc@<span class="mention">@QEBA</span>?AV?$basic_string@DU?$char_traits@D@std@<span class="mention">@V</span>?$allocator@D@2@<span class="mention">@std</span>@<span class="mention">@F</span>@Z) referenced in function “public: class Urho3D::DbResult __cdecl Urho3D::DbConnection::Execute(class Urho3D::String const &amp;,bool)” (?Execute@DbConnection@Urho3D@<span class="mention">@QEAA</span>?AVDbResult@2@AEBVString@2@_N@Z)	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\Source\Tools\ScriptCompiler\Urho3D_d.lib(ODBCConnection.obj)	1	<br/>
Error	LNK2019	unresolved external symbol “class nanodbc::result __cdecl nanodbc::execute(class nanodbc::connection &amp;,class std::basic_string&lt;char,struct std::char_traits,class std::allocator &gt; const &amp;,long,long)” (?execute@nanodbc@<span class="mention">@YA</span>?AVresult@1@AEAVconnection@1@AEBV?$basic_string@DU?$char_traits@D@std@<span class="mention">@V</span>?$allocator@D@2@<span class="mention">@std</span>@<span class="mention">@JJ</span>@Z) referenced in function “public: class Urho3D::DbResult __cdecl Urho3D::DbConnection::Execute(class Urho3D::String const &amp;,bool)” (?Execute@DbConnection@Urho3D@<span class="mention">@QEAA</span>?AVDbResult@2@AEBVString@2@_N@Z)	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\Source\Tools\ScriptCompiler\Urho3D_d.lib(ODBCConnection.obj)	1	<br/>
Error	LNK2019	unresolved external symbol "public: class std::basic_string&lt;char,struct std::char_traits,class std::allocator &gt; __cdecl nanodbc::result::get&lt;class std::basic_string&lt;char,struct std::char_traits,class std::allocator &gt; &gt;(short)const " (??$get@V?$basic_string@DU?$char_traits@D@std@<span class="mention">@V</span>?$allocator@D@2@<span class="mention">@std</span>@@<span class="mention">@result</span>@nanodbc@<span class="mention">@QEBA</span>?AV?$basic_string@DU?$char_traits@D@std@<span class="mention">@V</span>?$allocator@D@2@<span class="mention">@std</span>@<span class="mention">@F</span>@Z) referenced in function “public: class Urho3D::DbResult __cdecl Urho3D::DbConnection::Execute(class Urho3D::String const &amp;,bool)” (?Execute@DbConnection@Urho3D@<span class="mention">@QEAA</span>?AVDbResult@2@AEBVString@2@_N@Z)	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\Source\Tools\ScriptCompiler\Urho3D_d.lib(ODBCConnection.obj)	1	<br/>
Error	LNK1120	4 unresolved externals	ScriptCompiler	D:\Current Code\Urho3D-master\VS2017\bin\tool\ScriptCompiler.exe	1</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>I actually did not test those new options as well on my Linux host. Will check later tomorrow if It can be fixed and keep those options.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Just did a quick test on Linux. I got a GLIBC ABI mismatch linker error as described <a href="https://gcc.gnu.org/onlinedocs/libstdc%2B%2B/manual/using_dual_abi.html">here</a> when enabling the UNICODE options, but no errors at all on the other two options. I did not spend more time to fix it though as it  is not related to your error, so fixing it now would not help anything. Also because we are currently just begin to refactor our code base and build system to C++11 standard, while nanodbc is already ahead of us in this matter. Perhaps, we should revisit these options again when we are ready. I will remove these build options for now.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>I’m fine without unicode option for now.<br/>
Great to see much progresses in the engine. You guys are doing a fantastic job.</p>
<p>Best regards</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>