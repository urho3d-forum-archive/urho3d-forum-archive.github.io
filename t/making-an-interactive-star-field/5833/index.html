<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Making an interactive star field</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Making an interactive star field</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>Hello,<br/>
I succeeded:</p>
<ul>
<li>in exporting many circles from blender in one .mdl file<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="geometries.PNG"><img alt="geometries.PNG" data-base62-sha1="hW4KqVISNhkEkrPIp4olDhqX2XT"  height="375" src="../../../images2/c24c5a272a7cd4b9aa0576957ecfe56c.jpeg"  width="507"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">geometries.PNG</span><span class="informations">1128×832 219 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div>
</li>
<li>in rendering the .mdl file in my urho3D project.</li>
</ul>
<p><strong>How can I access each geometry from my urho3D project?</strong></p>
<p>I would like:</p>
<ul>
<li>first to detect when the user click on one circle and get the circle name</li>
<li>second to attach a material</li>
</ul>
<p>Regards,</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/222_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Bananaft</div>
          <div class="post_content">
<p>You should probably make this stars separate objects.<br/>
Are you planning to only 500 stars, or you want to add more in the future?<br/>
Do you want it on mobile or PC?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Thread concerning a similar project:</p><aside class="quote" data-post="19" data-topic="5000">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/1452724d26bb99fb2e8f87d8c705c1c9.png" width="20"/>
<a href="https://discourse.urho3d.io/t/sphere-as-light-source/5000/19">Sphere as light source</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    If your stars remain without texture you might as well use <a  rel="noopener nofollow ugc">billboards</a> instead of spheres for maximum performance.
  </blockquote>
</aside>
<p>To detect clicks you could either cast rays in the Octree, or apply trigonometry.</p>
<p>Welcome to the forums, btw! <img alt=":confetti_ball:" class="emoji" src="../../../images2/493e34d79be55d27b0c2a9cf4449024c.png" title=":confetti_ball:"/> <img alt=":slightly_smiling_face:" class="emoji" src="../../../images2/87e0a7daec339818bcddbf25ee57347b.png" title=":slightly_smiling_face:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p><span class="mention">@Bananaft</span>, thank you for your answer. 500 is far enough. But as the human eye can see until the 5000 brighest stars, I may add that ones too.<br/>
If I make 500 separate objects, I need to add 500 files to my project which is not easy to manage…<br/>
I want it on mobile and PC (using C#, Xamarin, UWP and Android but keep that secret please <img alt=":laughing:" class="emoji" src="../../../images2/b0fdc4fb6086de559ad986fd4b9c7c63.png" title=":laughing:"/> )</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p><span class="mention">@Modanung</span><br/>
Thank you for your welcome and than you so much for the link to the thread: <span class="mention">@lheller</span> is doing the same work than me! <img alt=":smiley:" class="emoji" src="../../../images2/94dd27e9c6c243335d29229e02e34e9d.png" title=":smiley:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>Hi <span class="mention">@Modanung</span> ,</p>
<p>Finally, I made one StaticModel for each star.<br/>
Each star is facing the center of the scene (I struggled few days for that!):<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="demisphere"><img alt="demisphere" data-base62-sha1="pUuVK5viB2yr36WDJsLfKE5AWsF"  height="500" src="../../../images2/4670462f720c508cf23aa6147c6ba75f.png"  width="586"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">demisphere</span><span class="informations">891×760 19.6 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
But, as you told me, billboard would be easier (in fact, the stars would be facing the camera the whole time!).<br/>
But does ray cast works on billboard?<br/>
It seems tha <span class="mention">@cadaver</span> tells it is possible:</p><aside class="quote" data-post="3" data-topic="76">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/b36d360b4fce73300b0e56f725288d21.png" width="20"/>
<a href="https://discourse.urho3d.io/t/picking-billboards/76/3">Picking billboards</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    There is now a sphere approximation for individual billboards when the RAY_TRIANGLE level raycast is used. You get the billboard index in the subObject variable of the ray query.
  </blockquote>
</aside>
<p>
Is there any sample for ray cast on a billboard?</p>
<p>Regards,</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Did you manage to get it working with static models?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">lezak</div>
          <div class="post_content">
<aside class="quote no-group" data-post="6" data-topic="5833" data-username="pldeschamps">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/617f122433ded8c97d311315832070fa.png" width="20"/> pldeschamps:</div>
<blockquote>
<p>Is there any sample for ray cast on a billboard?</p>
</blockquote>
</aside>
<p>Should be exactly the same as raycast against any other drawable (for sure navigation, crowd navigation and decals samples use raycast).<br/>
And if You’d prefer to use static model instead of billboard, why use circles and not spheres with LOD (and maybe static model group)?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<aside class="quote no-group quote-modified" data-post="8" data-topic="5833" data-username="lezak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/6ef2f82e83bb3859852dc241e102e0b3.png" width="20"/> lezak:</div>
<blockquote>
<p>…why use circles and not spheres with LOD…</p>
</blockquote>
</aside>
<p>About that…</p>
<aside class="quote quote-modified" data-post="1" data-topic="2083">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/1452724d26bb99fb2e8f87d8c705c1c9.png" width="20"/>
<a href="https://discourse.urho3d.io/t/information-source-how-to-exporting-lods-with-blender/2083"><img alt="information_source" class="emoji" height="20" src="../../../images2/18b5637f9b1a3e6cc47d50c97c805cc7.png" title="information_source" width="20"/> How to: Exporting LODs with Blender</a> <a class="badge-wrapper bullet" href="/c/showcase/artists/14"><span class="badge-category-parent-bg" style="background-color: #F1592A;"></span><span class="badge-category-bg" style="background-color: #8C6238;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Discuss Urho3D art-related topics (creation, import, export, troubleshooting) and share your free art.">Artists</span></a>
</div>
<blockquote>
</blockquote>
</aside>

          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<aside class="quote no-group" data-post="8" data-topic="5833" data-username="lezak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/6ef2f82e83bb3859852dc241e102e0b3.png" width="20"/> lezak:</div>
<blockquote>
<p>why use circles and not spheres</p>
</blockquote>
</aside>
<p>Because I have in mind that a sphere is more CPU-consuming than a 12 edges trifan circle but I may be wrong…<br/>
I may draw thousands of stars (maybe 1,600 or up to 5,000, even 120,000 if I can) on a mobile phone. I really want to optimize my code.<br/>
This is why I made one .mdl with the whole stars in it at the begining.<br/>
This is why I prefer a circle to a sphere (but is it the right choice?).<br/>
The questions are:</p>
<ul>
<li>are thousands of billboard items less CPU-consuming than thousands of StaticObject as <span class="mention">@Modanung</span> said: “you might as well use billboards instead of spheres for maximum performance”</li>
<li>is a circle less CPU-consuming than a sphere?</li>
<li>is a circle facing the center less CPU-consuming than a circle facing the camera (when the camera rotate)?</li>
<li>is a sphere less CPU-consuming than a circle facing the camere when the camera rotate?</li>
</ul>
<aside class="quote no-group" data-post="8" data-topic="5833" data-username="lezak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/6ef2f82e83bb3859852dc241e102e0b3.png" width="20"/> lezak:</div>
<blockquote>
<p>and not spheres with LOD</p>
</blockquote>
</aside>
<p>I don’t really need LOD as all the stars are on a sphere at equal distance to the camera (Is LOD only for choosing an object depending on distance?).<br/>
The camera is in the center of the Scene and all the stars are at the same distance. To simulate the magnitude, I can use either the diameter of the circle (or the sphere) and the brightness of the color.<br/>
I was thinking about using a 18 edges trifan circle for Sirius (which is the brightest star), 12 edges for the 60 brightest stars and 8 edges for the others…</p>
<aside class="quote no-group" data-full="true" data-post="7" data-topic="5833" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1452724d26bb99fb2e8f87d8c705c1c9.png" width="20"/> Modanung:</div>
<blockquote>
<p>Did you manage to get it working with static models?</p>
</blockquote>
</aside>
<p>I could draw the stars, I haven’t tried Raycast already…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1815_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dertom</div>
          <div class="post_content">
<aside class="quote no-group" data-post="10" data-topic="5833" data-username="pldeschamps">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/617f122433ded8c97d311315832070fa.png" width="20"/> pldeschamps:</div>
<blockquote>
<p>I could draw the stars, I haven’t tried Raycast already…</p>
</blockquote>
</aside>
<p>I actually wonder why you not just give it a try and fire a ray through you scene and see if it works <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
<p>…looking at the code, BillboardSet implements its own ProcessRayQuery and it should work as intended,…(never used it though)</p>
<p>Use something <strong>like</strong> this:<br/>
<aside class="onebox githubblob">
<header class="source">
<a href="https://github.com/dertom95/urho3d-minimal-new-project/blob/master/src/GameLogic.cpp#L385" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://github.com/dertom95/urho3d-minimal-new-project/blob/master/src/GameLogic.cpp#L385" target="_blank">dertom95/urho3d-minimal-new-project/blob/master/src/GameLogic.cpp#L385</a></h4>
<pre class="onebox"><code class="lang-cpp"><ol class="start lines" start="375" style="counter-reset: li-counter 374 ;">
<li>}</li>
<li>
</li>
<li>
</li>
<li>
</li>
<li>bool GameLogic::Raycast(IntVector2 screennPos,float maxDistance, Vector3&amp; hitPos, Drawable*&amp; hitDrawable)</li>
<li>{</li>
<li>    hitDrawable = nullptr;</li>
<li>
</li>
<li>    auto* graphics = GetSubsystem&lt;Graphics&gt;();</li>
<li>    Scene* scene = GetSubsystem&lt;Scene&gt;();</li>
<li class="selected">    Ray cameraRay = mCamera-&gt;GetScreenRay((float)screennPos.x_ / graphics-&gt;GetWidth(), (float)screennPos.y_ / graphics-&gt;GetHeight());</li>
<li>    // Pick only geometry objects, not eg. zones or lights, only get the first (closest) hit</li>
<li>    PODVector&lt;RayQueryResult&gt; results;</li>
<li>    RayOctreeQuery query(results, cameraRay, RAY_TRIANGLE, maxDistance, DRAWABLE_GEOMETRY);</li>
<li>    scene-&gt;GetComponent&lt;Octree&gt;()-&gt;RaycastSingle(query);</li>
<li>    if (results.Size())</li>
<li>    {</li>
<li>        RayQueryResult&amp; result = results[0];</li>
<li>        hitPos = result.position_;</li>
<li>        hitDrawable = result.drawable_;</li>
<li>        return true;</li>
</ol></code></pre>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>and call it <strong>like</strong> this:</p>
<pre><code class="lang-auto">     auto* ui = GetSubsystem&lt;UI&gt;();
     IntVector2 pos = ui-&gt;GetCursorPosition();
    Vector3 hitpos; 
    Drawable* hitObj;
    if (RayCast(pos,1000000.0f,hitpos,hitObj)) {
      // do something with hitobj 
   }
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">lezak</div>
          <div class="post_content">
<p>I don’t know how well would billboards perform with this numbers.<br/>
Assuming that camera is not static, spheres may be a better choice then circles, because You will have to rotate every circle to face the camera and probably You’ll loose performance gained from lower number of polys.<br/>
As for Your questions, the best way to find out which setup works best would be to simply compare them, especially that there is not so many options and it would take only few lines of code to switch between billboards, circles and spheres (keep in mind that there is static model group component).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="10" data-topic="5833" data-username="pldeschamps">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/617f122433ded8c97d311315832070fa.png" width="20"/> pldeschamps:</div>
<blockquote>
<p>This is why I prefer a circle to a sphere (but is it the right choice?).</p>
</blockquote>
</aside>
<p>Ever thought about quad with custom shader? You can do a lot of interesting things there.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>Well, I tried a BillboardSet using this png image:</p><aside class="quote quote-modified" data-post="43" data-topic="5000">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/28b5739e5dec60ed145b9694658536d4.png" width="20"/>
<a href="https://discourse.urho3d.io/t/sphere-as-light-source/5000/43">Sphere as light source</a> <a class="badge-wrapper bullet" href="/c/discussions/support/10"><span class="badge-category-parent-bg" style="background-color: #25AAE2;"></span><span class="badge-category-bg" style="background-color: #92278F;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Someone can help you.">Support</span></a>
</div>
<blockquote>
    This does kind of lead to a question… Why use bloom at all? Why not just use a circular gradient with an unlit material and alpha blending?  <a class="lightbox"   rel="noopener nofollow ugc" title="grad_sphere">[grad_sphere]</a> 
CORRECTION! Turns out HDR Rendering was turned off in my test, I turned it on and everything worked like it should. <a href="https://github.com/GoldenThumbs/Urho3d_HDR_Glow/tree/master/CoreData/Shaders" rel="noopener nofollow ugc">https://github.com/GoldenThumbs/Urho3d_HDR_Glow/tree/master/CoreData/Shaders</a>
</blockquote>
</aside>
<p>
This is the result:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="noopener nofollow ugc" title="transparency"><img alt="transparency" data-base62-sha1="dD64QLuJ0p66xH6V2LzizklMjKw"  height="500" src="../../../images2/6e2b6fb722a82ef5e71ecb1b940dc6ee.png"  width="594"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use href="#far-image"></use></svg><span class="filename">transparency</span><span class="informations">877×737 94.7 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use href="#discourse-expand"></use></svg>
</div></a></div><br/>
I guess (or I hope) the BillboradSet will offer a good performance.<br/>
But: how I use the transparency of the .png image?<br/>
Is it possible to get the billboard item at same size whatever the distance?<br/>
This is my code (sorry, C#):</p>
<pre><code class="lang-auto">        private void CreateBillboardSet(Scene scene)
        {
            var img = ResourceCache.GetImage("Images/glowingstar.png");
            var material = Material.FromImage(img);
            Node nodeBBS = scene.CreateChild();
            var bbs = nodeBBS.GetOrCreateComponent&lt;BillboardSet&gt;();
            bbs.NumBillboards = (uint)200;
            bbs.Sorted = true;
            bbs.Material = material;
            uint i = 0;
            i++; AddStarItem(bbs,i, -0.126f, 0.473f, -1.939f, -75.824f, 104.961f, 0.155f);
            i++; AddStarItem(bbs,i, -1.568f, -0.706f, 1.022f, 30.736f, 204.234f, 0.138f);
            i++; AddStarItem(bbs,i, -0.748f, -1.268f, -1.354f, -42.594f, 239.479f, 0.137f);
            i++; AddStarItem(bbs,i, 0.250f, -0.914f, 1.761f, 61.733f, 285.316f, 0.135f);
            i++; AddStarItem(bbs,i, 0.261f, 1.824f, 0.777f, 22.864f, 81.858f, 0.134f);
            //etc
            bbs.Commit();
        }
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<aside class="quote no-group" data-post="16" data-topic="5833" data-username="pldeschamps">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/617f122433ded8c97d311315832070fa.png" width="20"/> pldeschamps:</div>
<blockquote>
<p>But: how I use the transparency of the .png image?</p>
</blockquote>
</aside>
<p>nearly done with that:</p>
<pre><code class="lang-auto">material.AlphaToCoverage= true;
</code></pre>
<p>stars are not glowing though…<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="alphatocoverage"><img alt="alphatocoverage" data-base62-sha1="qWMmAWjvKPNH8NOC3oZLDKK15ft"  height="500" src="../../../images2/65eeb56a0c5a26eab91d4fb2baee74bc.png" width="594"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">alphatocoverage</span><span class="informations">877×737 21.9 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Did you know you can browse the source of the engine? To find out the capabilities of a <code>BillboardSet</code> have a look at <code>BillboardSet.h</code>. There you will find:</p>
<pre><code class="lang-auto">void SetFixedScreenSize(bool enable);
</code></pre>
<p>To make your stars glow simply use an image of a glowing star, or add a bloom post-processing effect.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>I am currently using a image of a glowing star.</p>
<p>I added useAlpha:true to the Material.FromImage(img, useAlpha:true) but it did not change the result. I wonder if the ResourceCache.GetImage() loads the alpha <img alt=":thinking:" class="emoji" src="../../../images2/95fb74f06c03358715b7b493b96f1e60.png" title=":thinking:"/></p>
<p>I tried bbs.FixedScreenSize = true; but that made all the stars disappear.</p>
<pre><code class="lang-auto">        private void CreateBillboardSet(Scene scene)
        {
      
            var img = ResourceCache.GetImage("Images/glowingstar.png"); //is alpha loaded?
            var material = Material.FromImage(img, useAlpha: true); // not enough :-(
                
            material.AlphaToCoverage= true;
            Node nodeBBS = scene.CreateChild();
            var bbs = nodeBBS.GetOrCreateComponent&lt;BillboardSet&gt;();
            
            bbs.NumBillboards = (uint)200;
            bbs.Sorted = true;
            bbs.Material = material;
            bbs.FixedScreenSize = true;
            uint i = 0;
            i++; AddStarItem(bbs,i, -0.126f, 0.473f, -1.939f, -75.824f, 104.961f, 0.155f);
            i++; AddStarItem(bbs,i, -1.568f, -0.706f, 1.022f, 30.736f, 204.234f, 0.138f);
            i++; AddStarItem(bbs,i, -0.748f, -1.268f, -1.354f, -42.594f, 239.479f, 0.137f);
            i++; AddStarItem(bbs,i, 0.250f, -0.914f, 1.761f, 61.733f, 285.316f, 0.135f);
            i++; AddStarItem(bbs,i, 0.261f, 1.824f, 0.777f, 22.864f, 81.858f, 0.134f);
            //I will write better code...
            bbs.Commit();
        }
        private void AddStarItem(BillboardSet bbs, uint i, Single x, Single y, Single z, Single r1, Single r2, Single radius)
        {
            var bbi = bbs.GetBillboardSafe(i-1);
            bbi.Position = new Vector3(x, y, -z);
            bbi.Size = 0.1f * Vector2.One;
            //bbi.Color = Color.White;
            bbi.Enabled = true;
        }
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Have you tried a material that uses an <em>alpha</em> technique?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>Well, I use a png image with alpha:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="GlowingStarCapture"><img alt="GlowingStarCapture" data-base62-sha1="vKdDjfLZaTYfFvv1RXbAHHvsudr"  height="500" src="../../../images2/7ac996a378046b51bae040b2e470118c.png"  width="447"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">GlowingStarCapture</span><span class="informations">850×950 139 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div><br/>
I use alpha when making the material from image and I set AlphaToCoverage to true.<br/>
What else should I do?</p>
<pre><code class="lang-auto">            var img = ResourceCache.GetImage("Images/glowingstar.png");
            var material = Material.FromImage(img, useAlpha: true);
            material.AlphaToCoverage= true;
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">SirNate0</div>
          <div class="post_content">
<p>If you save the image when you load it and then open that that should help you determine if it loaded the transparency. You could also print the material’s techniques to ensure it is actually one with alpha.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>I looked at some pixels of the image img. It seems that Alpha is loaded:<br/>
(40,40) A=0 R=0 G=0 B=0<br/>
(120,120) A=0.302 R=1 G=1 B=1<br/>
(256,256) A=1 R=1 G=1 B=1<br/>
so the issue seems to be there:</p>
<pre><code class="lang-auto">var material = Material.FromImage(img, useAlpha: true);
</code></pre>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Indeed the issue seems to be that you are not using Urho3D but UrhoSharp.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<p>you are maybe right.<br/>
I have tried to set the ClearColor to blue:</p>
<pre><code class="lang-auto">viewPort.SetClearColor(Color.Blue);
</code></pre>
<p>and I added a green box inside my billboardset and here is the result:<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="alpha"><img alt="alpha" data-base62-sha1="aD7fEoIi2scbEU6YuSyh4ezxW6a"  height="500" src="../../../images2/0015f4bf83013c2c854a8161a20def84.png" width="607"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">alpha</span><span class="informations">814×670 15.1 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Around the glowing stars, the alpha is zero and we can see the green box, but as soon the alpha is different from zero, the light does not come through…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I expect this is because <code>FromImage</code> with <code>useAlpha</code> set to <code>true</code> outputs a material using an alpha <em>mask</em>.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="26" data-topic="5833" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8d8b355ba34b4e347e81eaaa2cb3b7b0.png" width="20"/> Modanung:</div>
<blockquote>
<p>I expect this is because <code>FromImage</code> with <code>useAlpha</code> set to <code>true</code> outputs a material using an alpha <em>mask</em> .</p>
</blockquote>
</aside>
<p>Well, this gives the same result:</p>
<pre><code class="lang-auto">            var material = Material.FromImage(img);//, useAlpha: true);
            material.AlphaToCoverage= true;
</code></pre>
<p>Anyway, I give up, the glowing effect will be for the next version.<br/>
<span class="mention">@Modanung</span>, <span class="mention">@SirNate0</span>, Thank you for your help.</p>
<aside class="quote no-group" data-post="15" data-topic="5833" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>Ever thought about quad with custom shader? You can do a lot of interesting things there.</p>
</blockquote>
</aside>
<p>That maybe a solution I will try later. Thank you.</p>
<aside class="quote no-group" data-post="13" data-topic="5833" data-username="dertom">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/4066e49439adaebc8e20a6a1b2981136.png" width="20"/> dertom:</div>
<blockquote>
<p>I actually wonder why you not just give it a try and fire a ray through you scene and see if it works <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/></p>
</blockquote>
</aside>
<p>I will try that next week, thank you.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2762_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">pldeschamps</div>
          <div class="post_content">
<aside class="quote no-group" data-full="true" data-post="20" data-topic="5833" data-username="Modanung">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5debc5bf702e194d94e46989ca075bcb.png" width="20"/> Modanung:</div>
<blockquote>
<p>Have you tried a material that uses an <em>alpha</em> technique?</p>
</blockquote>
</aside>
<p>That sloved the problem:</p>
<pre><code class="lang-auto">material.SetTechnique(0, ResourceCache.GetTechnique("Techniques/DiffAlpha.xml"));
</code></pre>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>