<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>How to properly create an .mdl from a Mixamo .fbx</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">How to properly create an .mdl from a Mixamo .fbx</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3169_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">evolgames</div>
          <div class="post_content">
<p>I’ve been trying to get models from Mixamo to work with U3D. I know some of the samples use those models, like the mutant.</p>
<p>I’ve been able to use AssetImporter to convert an .fbx/.dea/.fbx (for unity) to .mdl. All of them are having issues with the UV Mapping (I guess) causing the material to wrap totally wrong. Tried this with different models. I have NO problems with animation or character creation as I’ve followed the Character Demo. The problem is strictly the material. I also only really need a simple Diffuse, but it’d be nice to get everything working.</p>
<p>I tried <a href="https://github.com/fredakilla/UrhoTournament/wiki/Import-mixamo-3D-model-to-Urho3D" rel="nofollow noopener">this</a>, as well as <a href="https://github.com/reattiva/Urho3D-Blender" rel="nofollow noopener">this</a>, and am still getting the same issues.</p>
<p>In the Editor, importing the .fbx, unconverted to .mdl, brings it up perfectly with no extra steps. I want to programatically create my project by instancing objects/models/light/etc, so I’m assuming the Editor is not going to be much use, but it does pull things up correctly. (I’m aiming to make a simple dungeon crawler with procedural areas/spawns). Here’s how it appears immediately:</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot"><img alt="Screenshot" data-base62-sha1="fwZB71qQKXs120lAB9E1BMqFIc5"  height="276" src="../../../images2/3dba74e872c0d1bd725d85430eefba9e.png"  width="517"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot</span><span class="informations">1366×732 276 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>And here is what I keep getting from all of the other methods (some of which are up to 5 years old):<br/>
<div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot-1"><img alt="Screenshot-1" data-base62-sha1="h4NFHvaUEMzIOcIbLZBbfkDKzbx"  height="369" src="../../../images2/7cafee46a0a1825eda3de83aab3bf501.jpeg"  width="690"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot-1</span><span class="informations">1366×732 233 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Mind you, those other methods require many more steps, and I’m not getting results with them. The video accompanying one of them references a model that is not longer on Mixamo and the hierarchy seems to be different as well.</p>
<p>I’m a noob but it looks like the Editor is just an U3d program being run by the player?<br/>
If that is the case, how is it importing an .fbx perfectly?<br/>
Mixamo’s license disallows this, but could I potentially load .fbx’s rather than .mdls?<br/>
Is the editor <em>creating</em> an .mdl when the .fbx is imported using AssetImporter?<br/>
Is there a way to export what the editor has done to a .mdl?</p>
<p>I took a look at some of the .as scripts for the editor, but I wasn’t able to make sense of them.</p>
<p>Assuming the Editor does use AssetImporter, is there a way I can just use the same exact commands/methods to produce a .mdl with correctly mapped materials?</p>
<p>Because the Editor gets everything set up automatically and that’s what I’m after. Mixamo models need to be scaled by a factor of .001, by the way.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<p>I remembered there used to be a step by step procedure on the forum.  You need to search for it.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3169_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">evolgames</div>
          <div class="post_content">
<p><span class="mention">@George1</span>  I’ve seen that thread and it didn’t help. It has steps for Maya. Otherwise porting directly from Mixamo all it says is to use the AssetImporter and then fix it up in Blender. There is no step-by-step for the material.</p>
<p>Either way, how is the Editor doing everything without using Blender/Maya and getting a perfect model loaded from just the unaltered .fbx? I’d much prefer to find out if there is a way to do what the Editor is doing, rather than follow years old instructions for using third-party applications and Add-ons (which are not updated).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3169_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">evolgames</div>
          <div class="post_content">
<p>Ok nevermind I figured it out.</p>
<p>Here are the steps:</p>
<ol>
<li>Download .fbx for unity from Mixamo</li>
<li>Import into Editor (if there are spaces in the filename it will say: “failed to execute assetimporter to import model”, so rename to something convenient)</li>
<li>It’ll make everything for you. Find your .mdl in bin/Data/Models, your Materials in /bin/Data/Materials and Textures in /bin/Data/Textures</li>
<li>With the models I’ve tried, it’ll give you two materials with the character index (from mixamo), so you’ll get something like: Ch25_Body.xml and Ch25_body1.xml. They are different. I don’t know why it’s split in two but you need both.</li>
<li>When loading model via code, do the following (for Lua):</li>
</ol>
<pre><code class="lang-auto">mat1 = cache:GetResource("Material", "Materials/Ch25_Body.xml")
mat2 = cache:GetResource("Material", "Materials/Ch25_body1.xml")

object:SetMaterial(0, mat1)
object:SetMaterial(1, mat2)
</code></pre>
<ol start="6">
<li>If you want animations, add them to the Mixamo model before downloading, and the Editor will produce .ani files for you with the model. Use the CharacterDemo as a guide to playing the animations. It looks like it will create a .ani even if there is no animation.</li>
</ol>
<p>I guess you could import to Blender to adjust the geometry (Decimate, optimize the mesh, whatever) and then import the resulting .fbx into the Editor and follow the steps above. But the main thing is that to get your .mdl and everything working from Mixamo there is absolutely no need for Blender, the Urho3d-Blender add-on (not available past ver. 2.79 anyway), or even the AssetImporter.</p>
<p>This makes things much easier. Fire up Editor. Import. Everything is ready.</p>
<p>P.S. I can’t say this works for models/formats from anywhere besides Mixamo. But if you want to use the large collection of models and animations they have, this seems like the best way. Also, the wall below is a placeholder lol.</p>
<p><div class="lightbox-wrapper"><a class="lightbox"   rel="nofollow noopener" title="Screenshot-2"><img alt="Screenshot-2" data-base62-sha1="uMI8qb96AH9j8yoQrc2UjYzpAzI"  height="276" src="../../../images2/9079a761816feadb0c79f4557b0f53e6.jpeg"  width="517"/><div class="meta">
<svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename">Screenshot-2</span><span class="informations">1366×732 145 KB</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg>
</div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">George1</div>
          <div class="post_content">
<aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/fredakilla/UrhoTournament/wiki/Import-mixamo-3D-model-to-Urho3D">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/0973ea8ce7121c320f68413e2a2f23ab.svg" width="32"/>
<a href="https://github.com/fredakilla/UrhoTournament/wiki/Import-mixamo-3D-model-to-Urho3D" rel="noopener nofollow ugc" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<div class="aspect-image" style="--aspect-ratio:690/345;"><img class="thumbnail" height="345" src="../../../images2/c2d6adee520a2381fc85aa1e42955a24" width="690"/></div>
<h3><a href="https://github.com/fredakilla/UrhoTournament/wiki/Import-mixamo-3D-model-to-Urho3D" rel="noopener nofollow ugc" target="_blank">Import mixamo 3D model to Urho3D · fredakilla/UrhoTournament Wiki</a></h3>
<p>Contribute to fredakilla/UrhoTournament development by creating an account on GitHub.</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<aside class="quote quote-modified" data-post="1" data-topic="2147">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" loading="lazy" src="../../../images2/b3b294bc4454bf21e07a40d7aa09761d.png" width="20"/>
<a href="http://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/1">Ready to use models with animations</a> <a class="badge-wrapper bullet" href="/c/showcase/artists/14"><span class="badge-category-parent-bg" style="background-color: #F1592A;"></span><span class="badge-category-bg" style="background-color: #8C6238;"></span><span class="badge-category clear-badge" data-drop-close="true" style="" title="Discuss Urho3D art-related topics (creation, import, export, troubleshooting) and share your free art.">Artists</span></a>
</div>
<blockquote>
    Mixamo characters with animations ready for use for Urho3D - <a data-bbcode="true" href="https://github.com/Lumak/Urho3D-Assets/tree/master/Models" rel="noopener nofollow ugc">https://github.com/Lumak/Urho3D-Assets/tree/master/Models</a> 
How to get mixamo char/anims - page2 of this thread. 
notes: 

the model faces the opposite Z direction, so you’ll need to spin it by 180
avoid adjusting the “Head” node due to the above reason (or just fix it) 
**<a href="http://discourse.urho3d.io/t/ready-to-use-models-with-animations/2147/12">How to spin your char by 180</a> - note: this change, along with the Mutant char, was added to Urho3D/master as of August 16, 2016.


models: 
 <a class="lightbox" href="http://i.imgur.com/6lEN7dl.png" rel="noopener nofollow ugc" title="">[image]</a> 
AssetImporter: 
M…
  </blockquote>
</aside>
<p>Scroll down under the same thread.  There is a direct way…<br/>
You have to spin the model by 180 degree.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3169_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">evolgames</div>
          <div class="post_content">
<p>Oh alright I see. I noticed the Z forward was backwards.</p>
<p>Yeah so from what I understand I was just missing that I needed to apply both materials (Ch25_Body.xml and Ch25_body1.xml) to the mesh. It seems obvious now, but with the exporter add-on and the one <a href="https://www.youtube.com/watch?v=moiUS0TK6Vk&amp;t=207s" rel="nofollow noopener">video</a> it really makes it seem like there needs to be some UV work to get anything right. And so I was chasing ghosts. Everything is fine as is.</p>
<p>You’re right. AssetImporter works great. Here’s what I just did:</p>
<ol>
<li>Download Mixamo .fbx</li>
<li>Open in Blender. Did nothing. Export to .fbx but switch to Z forward (I’m pretty sure I can just do an adjNode here, though)</li>
<li>Run AssetImporter for the model, then for the animation</li>
<li>Load like normal but set both materials</li>
</ol>
<p>Luckily this is a very simple process afterall. Looks like the Editor is just automatically apply both of those materials after importing.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>