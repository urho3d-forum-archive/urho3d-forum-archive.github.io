<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>The status of PBR on mobile platforms</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">The status of PBR on mobile platforms</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>What’s the status of PBR on mobile platforms (Android &amp; iOS)? Does it usable? How about the performance?<br/>
As we know UE4 and Unity has pretty good support of PBR on mobile.</p>
<p>Thanks!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2367_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">jmiller</div>
          <div class="post_content">
<p>Hello,</p>
<p>42_PBRMaterials sample demonstrates PBR and should provide some answers.<br/>
Also there are some semi-active threads/posts on <a data-bbcode="true" href="https://discourse.urho3d.io/search?q=PBR">PBR</a>/IBL with more specific information.<br/>
…and others can probably offer more info on this.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">smellymumbler</div>
          <div class="post_content">
<p>I don’t think it works well even on desktop. I would stick to the standard rendering mode if you really want performance. Not really a big deal, to be honest.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>Urho is great and it needs roadmap. Instead of C++ new features, it needs solid features. Something like better editor, better scripting, graphics features, compatibility… otherwise it’s fading though nobody likes to see.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">smellymumbler</div>
          <div class="post_content">
<p>Why do you think the engine needs a better editor? The current editor is easy to use, written in a scripting language, and you can easily extend to add game-specific stuff in there.</p>
<p>Or better scripting? You have AS and Lua. What would be better? JS? Why?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p><span class="mention">@WangKai</span> For that the project would need more developers with enough expertise and knowledge of the engine and those fields to implement and maintain these features. Also things take time, especially when done well.<br/>
In it’s current state I’d prefer Urho staying stable (and lightweight) instead of moving fast. But then again, I don’t miss anything in its features. Also, with about 1.5 new topics a day (in the last seven days) and the constant activity on GitHub - which is naturally dwarfed by <span class="mention">@cadaver</span>’s contributions - I don’t see this project fading any time soon. To me it registers as glowing steadily.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>There’s several editor projects running separately from the engine development, btw. Maybe some day there will be official/qualified editors for Urho3D listed on its website (like the <a href="https://urho3d.github.io/documentation/1.7/_external_links.html">ParticleEditor2D</a>) instead of a single all-purpose one. The editor you want depends on the game you are making. <a href="https://gitlab.com/luckeyproductions/Edddy">Edddy</a>, for instance, focuses on worlds that are (mainly) based on reused gridlocked blocks. If you’re making a 2D game and are working with tiles, you’d probably use <a href="https://www.mapeditor.org/">Tiled</a> for most of your world creation.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>Yes, the current editor is good, but should be better. The workflow is just not that right. That’s why so many ppl are reinventing the wheels. As for the scripting, we need IDE, at least a debugger, auto-completion, however, different ppl have different opnions about these and I’m OK with that. It’s about how high you put the standard bar.</p>
<p>I love Urho, it has very great foundation and clean code. I’m also trying to make the things around it better, though my spare time is so limited.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Have you tried <a href="https://en.wikipedia.org/wiki/CodeLite">CodeLite</a> as scripting IDE?<br/>
I have not. I use QtCreator to write C++ in, and see no reason to write in a second language with similar functionality.</p>
<aside class="quote no-group quote-modified" data-post="8" data-topic="4517">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/25a96e9f4bf04eae56a71b2c1fdf3b65.png" width="20"/> WangKai:</div>
<blockquote>
<p>…though my spare time is so limited</p>
</blockquote>
</aside>
<p>And such is the life of many.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>One of the most important purpose of scripting is to make development faster, however, IMHO, AS is not every fast for me, especially if there is no debugger and IDE. For C++, we have very powerful and familiar IDEs and debuggers, so, basically, AS is not as good as C++ in real world just as you mentioned. So, we need to improve scripting of Urho.</p>
<p>Edit: the best part of Urho’s scripting is hot reload. We can even sent script file via networking or adb to the device and make the iteration super fast!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I see you’re already improving the editor, btw. So I guess it’s just a matter of time before your entire wish list is implemented. <img alt=":wink:" class="emoji" src="../../../images2/54580715256ddb71bd695c5ac97f8802.png" title=":wink:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">smellymumbler</div>
          <div class="post_content">
<p>The workflow doesn’t feel right because it’s not yours. That’s what <span class="mention">@Modanung</span> meant by saying that the editor depends on the game you are making. You can’t have a general purpose editor that checks all the boxes. Since Urho is not a commercial engine, there’s very little benefit in trying to be something like Unity and make something that is “good enough” for 80% of the people.</p>
<p>People are not reinventing wheels, they making the wheels that make them more productive on their field. What they need are stable, efficient and mature building blocks to create as many wheels as they want.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>So back to the original topic. When I first implemented PBR into Urho I didn’t have access to any mobile devices outside of a Windows phone. Since then I have gone out and brought myself a tablet dedicated to mobile testing. If I remember right there was some issues with cubemap filtering on gles2. I plan to look into gles3 support for the engine as a priority over getting it working on gles2, maybe after the that I can look into bringing it to gles2 if there is demand. Because of this the features likely won’t get merged to master as it breaks the philosophy of device compatibility.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>Thank you! I understand all the wonderful contributions and as well as difficulties. Urho’s PBR till now is very cool and hope one day it can be stable and stunning out of box. It’s always harder to do than to complain.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Sinoid</div>
          <div class="post_content">
<p>On mobile you might want to consider some heavy tweaks:</p>
<ul>
<li>Pack your roughness, metalness, etc into RGB565
<ul>
<li>Requires adding that in engine though, you really want it to stay as rgb565 at upload</li>
<li>DDS path might already cope with it though</li>
</ul>
</li>
<li>Use 32x32 normalized LUTs for the BRDF (ie. min roughness is 0.3 and max is 0.7, here’s your LUT)
<ul>
<li>You’ll notice the bit-depth of RGB565_UNORM is just barely more than enough to perfectly hit a 32x32 LUT by roughness</li>
</ul>
</li>
<li>You have to rewrite the shaders to account for the LUT
<ul>
<li>This will probably make them cleaner</li>
</ul>
</li>
<li>You have to introduce some tooling to do that quantize</li>
<li>There are better options, but this is the easiest one</li>
</ul>
<p>If you need to see what that actually looks like in action then look at <em>Shin Megami Tensei: Liberation Dx2</em> which uses this method.</p>
<p>IBL is the big problem, drop the mip-access for diffuse IBL and instead use a lerp of two-hemispheres. Leave specular IBL as is but drop the roughness correction.</p>
<p>Also, on mobile/hand-held you want to turn off <code>Reuse Shadowmaps</code> as those platforms hate switching rendertargets so you want to get your shadowmaps done first (ideally you don’t even use shadows). You have to judge that though, not reusing them eats memory which might not be there.</p>
<hr/>
<p>What really needs to happen is a <em>render performance test</em> to automatically configure how Urho3D should run and at what resolution. Sounds easy … isn’t easy.</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>