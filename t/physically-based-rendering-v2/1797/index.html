<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Physically Based Rendering V2</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Physically Based Rendering V2</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p><span class="bbcode-i"><span class="bbcode-b">Overview</span></span><br/>
Since Sonoid finished working on PBR he passed the torch to me and provided me rights to change and redistribute the code as i feel fit. Since i took on the project i made some small changes, the first change i made was to allow PBR to work alongside the legacy renderer in Forward Rendering. The second change i made was to change the diffuse model to be Burley because i personally prefer it over Lambert.</p>
<p>Results:<br/>
[video]<a href="https://youtu.be/6qfIHsG_MSU%5B/video%5D">https://youtu.be/6qfIHsG_MSU[/video]</a></p>
<p>Images:</p>
<p><span class="spoiler"><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/5Rb6Rx4.jpg" title=""><img alt="" height="365" src="../../../images2/6d7767fd64529c8fa8a4546528328a5c.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div><br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/o4FC6XB.jpg" title=""><img alt="" height="365" src="../../../images2/dda457e54a5441d1d039ad39be553c81.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div><br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/TrIa6qu.jpg" title=""><img alt="" height="365" src="../../../images2/72281f8b042bdc97bd1e4bdfd0949367.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></span></p>
<p><span class="bbcode-i"><span class="bbcode-b">How to use</span></span><br/>
When you create a material you will need to use one of the PBR render techniques located in CoreData/Techniques/PBR</p>
<p>If the selected technique uses diffuse then you will need to input a albedo texture into the diffuse channel. Albedo is similar to diffuse although it does not contain any lighting data.<br/>
if the selected technique uses normal then you will need to input a traditional normal map into the normal channel.<br/>
if the selected technique uses Metallic /roughness then you will need to input a PBR properties map into the specular channel. The PBR properties map contains Roughness in the red color channel and  Metallic in the green color channel.<br/>
if the selected technique uses emissive then you will need to input a emissive texture into the emissive channel.</p>
<p>For additional control over the material you can add  Roughness and Metallic as material parameters, from these values you can adjust the PBR properties  map or set default values for material without a PBR properties map<br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/b6stkrb.png" title=""><img alt="" height="500" src="../../../images2/4c0c3350d287eb86ce133eb7f3f04ae0.png" width="340"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">396×581</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p><span class="bbcode-i"><span class="bbcode-b">Effect</span></span><br/>
Both the Roughness and Metallic values affect the overall look of the material. The effect each value has on the material is shown in the images below, these images where taken from the Material Test scene included in PBR repository.</p>
<p>Roughneses:</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/Mr9Tscs.png" title=""><img alt="" height="365" src="../../../images2/ff1a393669b37ade83791550093f04fd.png" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
</div>
<p>Metalic:</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/dNLuu8G.png" title=""><img alt="" height="365" src="../../../images2/f64ba277240eabb272662439c0fdd7fb.png" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
</div>
<p>Area Lighting is still in development although sphere lights are currently supported. The image below demonstrates sphere lights as demonstrated on the Material Test scene.</p>
<p>Sphere Light</p>
<div class="spoiler">
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/ajUkyxO.png" title=""><img alt="" height="365" src="../../../images2/1960268ae10e1340310de60a4689345a.png" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
</div>
<p><span class="bbcode-i"><span class="bbcode-b">Download</span></span></p>
<p>Currently the download will not work on OpenGL Deferred Renderers due to know issue (without a fix currently)<br/>
<a data-bbcode="true" href="https://github.com/dragonCASTjosh/Urho3D">https://github.com/dragonCASTjosh/Urho3D</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/119_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">codingmonkey</div>
          <div class="post_content">
<p>Great work! Thanks for sharing this.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/e5061c7629059aca42f3242b52d42e88.png" width="20"/> codingmonkey:</div>
<blockquote>
<p>Great work! Thanks for sharing this.</p>
</blockquote>
</aside>
<p>Thanks for the support <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
<p>I wanted to implement the IBL system demonstrated in the Unreal 4 PBR notes but it caused massive performance problems for my 970. you can enable it in the repo by changing iblColor in the LitSolid.hlsl to <code>float3 iblColor = ApproximateSpecularIBL(specColor, roughness, normal, -toCamera)</code></p>
<p>and the number of samples in the Lighting to 1024</p>
<p>[code]float3 PrefilterEnvMap(float Roughness, float3 R)<br/>
{<br/>
float3 N = R;<br/>
float3 V = R;</p>
<pre><code>		float3 PrefilteredColor = 0;
		const uint NumSamples = 1024;

		float TotalWeight = 0.0000001f;

		for (uint i = 0; i &lt; NumSamples; i++)
		{
			float2 Xi = Hammersley(i * 2 + 0, NumSamples);
			float3 H = ImportanceSampleGGX(Xi, Roughness, N);
			float3 L = 2 * dot(V, H) * H - V;
			float NoL = saturate(dot(N, L));
			if (NoL &gt; 0)
			{
				PrefilteredColor += SampleCubeLOD(ZoneCubeMap, float4(L, 0)).rgb * NoL;
				TotalWeight += NoL;
			}
		}
		return PrefilteredColor / TotalWeight;
	}[/code]
</code></pre>
<p>Anybody is welcome to make PR to the repo especially if they help with performance of the Unreal PBR as it looks a lot better</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">practicing01</div>
          <div class="post_content">
<p>Congratulations to all the parties involved! I hope to be able to use pbr on mobile/linux some day.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote no-group" data-username="practicing01">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/14b76c8d5256588278b9ed2de25f6236.png" width="20"/> practicing01:</div>
<blockquote>
<p>Congratulations to all the parties involved! I hope to be able to use pbr on mobile/linux some day.</p>
</blockquote>
</aside>
<p>OpenGL support should be done within a few days</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/39b53a8007c67ac331701696464c2601.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>[quote=“practicing01”]Congratulations to all the parties involved! I hope to be able to use pbr on mobile/linux some day.</p>
</blockquote>
</aside>
<p>OpenGL support should be done within a few days[/quote]</p>
<p>I am looking forward to it. Thanks for sharing it.</p>
<p>EDIT<br/>
I just clone the repo and I have a few questions:<br/>
[ul][li] It seems that there are no changes whatsoever to the Urho3D engine code. Is it really true?[/li]<br/>
[li] I understand that sinoid has transfer the copyright to you for all his work (IANAL, so sorry if I use a wrong term here). My question is, now under which license are you releasing your combined work? Please say MIT or even better Urho3D license (MIT) <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/>. Using Urho3D license makes it easier for us to pull the good bits over into upstream Urho3D project as there should be no copyright issue then in copying the code over pro-actively. [/li][/ul]</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5dc21abd616a69d8b82c2d56dfa657a5.png" width="20"/> weitjong:</div>
<blockquote>
<p>It seems that there are no changes whatsoever to the Urho3D engine code. Is it really true?</p>
</blockquote>
</aside>
<p>Yes, it’s only shaders. You can see fork from the original repo <a href="https://github.com/souxiaosou/UrhoPBRCoreData">github.com/souxiaosou/UrhoPBRCoreData</a> . It’s containt detailed comments, like</p>
<p><code>        /// Smith GGX Visibility
        ///     nDotL: dot-prod of surface normal and light direction
        ///     nDotV: dot-prod of surface normal and view direction
        ///     roughness: surface roughness
        float SmithGGXVisibility(in float nDotL, in float nDotV, in float roughness)
        {
            float rough2 = roughness * roughness;
            float gSmithV = nDotV + sqrt(nDotV * (nDotV - nDotV * rough2) + rough2);
            float gSmithL = nDotL + sqrt(nDotL * (nDotL - nDotL * rough2) + rough2);
            return 1.0 / (gSmithV * gSmithL);
        } </code><br/>
but it is obsolete, I think. It is a pity that these comments have been removed.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>Just previewing the test scene, it seems to miss a bit of the punch of other PBR implementations. I couldn’t guess why from the short test – it could be as simple as poor environment map choice or may be something more. In my previous attempt with PBR I realised it’s important to have simple tests and comparisons.</p>
<p>I can tell there is a lot of work put into this though, nice work so far !</p>
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/5dc21abd616a69d8b82c2d56dfa657a5.png" width="20"/> weitjong:</div>
<blockquote>
<p>It seems that there are no changes whatsoever to the Urho3D engine code. Is it really true?</p>
</blockquote>
</aside>
<p>Most of the work is in the shaders, but a complete PBR implementation will need to touch on the engine source to at least provide some parameters for area lights.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“weitjong”]</p>
<p>I just clone the repo and I have a few questions:<br/>
[ul][li] It seems that there are no changes whatsoever to the Urho3D engine code. Is it really true?[/li]<br/>
[li] I understand that sinoid has transfer the copyright to you for all his work (IANAL, so sorry if I use a wrong term here). My question is, now under which license are you releasing your combined work? Please say MIT or even better Urho3D license (MIT) <img alt=":wink:" class="emoji" src="../../../images2/537e3e653d641df5b9858e75faf3862a.png" title=":wink:"/>. Using Urho3D license makes it easier for us to pull the good bits over into upstream Urho3D project as there should be no copyright issue then in copying the code over pro-actively. [/li][/ul][/quote]</p>
<p>Currently there are no changes to Urho3D engine code and its possible to get away without any changes but to include features like Parallax Correction for cubemaps and Area Lighting there will need to be small changes to the engine.<br/>
For the licence sinoid provided me the source under MIT as is visible in the licence image found under the shader dir (only there temporally). Im not sure if MIT would allow me to changes the licence to Urho3D but if it did i would change it.</p>
<aside class="quote no-group" data-username="1vanK">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/8e14485e10e801cd7ee7668b4f98a5bf.png" width="20"/> 1vanK:</div>
<blockquote>
<p>but it is obsolete, I think. It is a pity that these comments have been removed.</p>
</blockquote>
</aside>
<p>The lack of comments is a temporary thing, I was planning on moving PBR to its own shader file and re-document.</p>
<aside class="quote no-group" data-username="hd_">
<div class="title">
<div class="quote-controls"></div>
 hd_:</div>
<blockquote>
<p>Just previewing the test scene, it seems to miss a bit of the punch of other PBR implementations. I couldn’t guess why from the short test – it could be as simple as poor environment map choice or may be something more. In my previous attempt with PBR I realised it’s important to have simple tests and comparisons.</p>
</blockquote>
</aside>
<p>The issue likely lies within the IBL solution that has been used. Currently i am using the Unreal 4 mobile IBL(same as sinoid implemented). I tried implementing more advanced IBL and it provided much better results although the performance of it currently is horrible</p>
<p>Comparison</p>
<p>[spoiler]Current Rough Metallic<br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/Jycn6aR.jpg" title=""><img alt="" height="365" src="../../../images2/03a6b6e1277d267c442245c8836cbca4.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>More advanced IBL<br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/7Opjq6Q.jpg" title=""><img alt="" height="365" src="../../../images2/64b89fbf53bab8a81a8df5c10cfd64de.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>Current Rough Non-Metallic<br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/13848FI.jpg" title=""><img alt="" height="365" src="../../../images2/e9ef0604dc5da32a2340c1c1f1c72749.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
<p>More advanced IBL<br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/eaNMWK3.jpg" title=""><img alt="" height="365" src="../../../images2/fd1371eeb6d3510c2fe54dadd6557c28.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div>[/spoiler]</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>[quote=“dragonCASTjosh”]Currently there are no changes to Urho3D engine code and its possible to get away without any changes but to include features like Parallax Correction for cubemaps and Area Lighting there will need to be small changes to the engine.<br/>
For the licence sinoid provided me the source under MIT as is visible in the licence image found under the shader dir (only there temporally). Im not sure if MIT would allow me to changes the licence to Urho3D but if it did i would change it.[/quote]</p>
<p>Thanks for the prompt reply. Again, IANAL. Urho3D license is MIT license. The only difference is that it declares the work/material/code is copyrighted by Urho3D project. If anyone submitting a PR to us then you must have read and agree to the T&amp;C to release them under MIT license with the copyright statement “Copyright © 2008-2016 the Urho3D project” (see <a href="http://urho3d.github.io/documentation/HEAD/_contribution_checklist.html">urho3d.github.io/documentation/H … klist.html</a>). Basically, what I am asking is whether we have your permission to “copy” the combined work into Urho3D project and thus they would adhere to the above term. We do not steal other ppl code  <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/>  and claim them as ours. Alternatively, we can just wait passively until you send us PR when/if you decide to merge your work to upstream Urho3D project.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>Looking great. <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“weitjong”][quote=“dragonCASTjosh”]Currently there are no changes to Urho3D engine code and its possible to get away without any changes but to include features like Parallax Correction for cubemaps and Area Lighting there will need to be small changes to the engine.<br/>
For the licence sinoid provided me the source under MIT as is visible in the licence image found under the shader dir (only there temporally). Im not sure if MIT would allow me to changes the licence to Urho3D but if it did i would change it.[/quote]</p>
<p>Thanks for the prompt reply. Again, IANAL. Urho3D license is MIT license. The only difference is that it declares the work/material/code is copyrighted by Urho3D project. If anyone submitting a PR to us then you must have read and agree to the T&amp;C to release them under MIT license with the copyright statement “Copyright © 2008-2016 the Urho3D project” (see <a href="http://urho3d.github.io/documentation/HEAD/_contribution_checklist.html">urho3d.github.io/documentation/H … klist.html</a>). Basically, what I am asking is whether we have your permission to “copy” the combined work into Urho3D project and thus they would adhere to the above term. We do not steal other ppl code  <img alt=":wink:" class="emoji" src="../../../images2/95940790c23d98635b2a6d3f22657158.png" title=":wink:"/>  and claim them as ours. Alternatively, we can just wait passively until you send us PR when/if you decide to merge your work to upstream Urho3D project.[/quote]</p>
<p>Your free to implement it into Urho3D, i was going to make a pull request once i got the OpenGL version and and cleaned up the code a little. But you are free to merge it when you feel its ready <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/39b53a8007c67ac331701696464c2601.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>Your free to implement it into Urho3D, i was going to make a pull request once i got the OpenGL version and and cleaned up the code a little. But you are free to merge it when you feel its ready <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
</blockquote>
</aside>
<p>Thanks in advance for that. I am not necessary saying I am the best person to do it nor stating the readiness of the combined work, but I think everyone here will be definitely happy to see it merged eventually.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>I updated the Repo to support OpenGL Forward Rendering so now everyone should be able to access it <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> . As for the GL deferred renderer i ran into some issues to do with YCoCg that Sinod originally implemented as way to boost performance and compress the Albedo and Specular into a single RGBA color buffer. If anyone wants to help with fixing it, everything should be on the Repo, if i cant find a fix within the next few weeks i may look into removing the functionality from all renderers and add extra buffers for what is needed</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Made some advancements today, nothing public yet but i wanted to provide a short development screenshot of area lighting. In my private build area lighting is only supported on Point lights although i am looking to branch it out to other light sources and even one up unreal and include none spherical area lights <img alt=":slight_smile:" class="emoji" src="../../../images2/7bdd5ab4d67675d002d99e4b948c8cdb.png" title=":slight_smile:"/></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/H3gEGz8.jpg" title=""><img alt="" height="365" src="../../../images2/03123bb179a662c7f2f0afa7632d44a2.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div><br/>
<div class="lightbox-wrapper"><a class="lightbox" href="http://i.imgur.com/tC3CBjB.jpg" title=""><img alt="" height="365" src="../../../images2/6e8f8db6b3ee783b47dc4440f60637e1.jpg" width="690"/><div class="meta"><svg aria-hidden="true" class="fa d-icon d-icon-far-image svg-icon"><use xlink:href="#far-image"></use></svg><span class="filename"></span><span class="informations">1920×1017</span><svg aria-hidden="true" class="fa d-icon d-icon-discourse-expand svg-icon"><use xlink:href="#discourse-expand"></use></svg></div></a></div></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Awesome. Will definitely look at the OpenGL implementation once I have concluded the SDL 2.0.4 upgrade.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p><span class="mention">@weitjong</span> How do you think its best to implement the front end of Area Lighting, in my head currently i have new lighting types or multiple new options on existing lights.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/68_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">gawag</div>
          <div class="post_content">
<p>Hm I just read this thread and was thinking about the environment maps and also about mirrors for a while. I also found this lecture about the topics: <a href="http://www.inf.ed.ac.uk/teaching/courses/cg/lectures/cg9_2013.pdf" rel="nofollow noopener">inf.ed.ac.uk/teaching/course … 9_2013.pdf</a><br/>
The environment maps used in the samples here (yeah just samples but still) look pretty fake as they don’t show the actual scene at all.<br/>
I remember the Half Life 2 engine from Garrys Mod and they did environment maps by pre-rendering images in the level editor at various coordinates scattered throughout the map (a 3D raster). This looked pretty bad as well because the maps jumped when the object moved around and was closer to a different map and also the maps did not reflect the actual scene at all (dynamic objects/lights).</p>
<p>Raytracing is still way to slow but what about this:<br/>
Could a camera with a FOV of 90 be used to dynamically create cubemaps used as environment maps? Could there be like a wandering camera that calculates a (new) cubemap for one object every six frame (one cubemap side each frame, so if you have 10 objects with an environment map every one gets updated all 60 frames)? Could that special camera render all 6 sides in one “frame” (sub-frame if you want)?</p>
<p>Or could some mirror technique (like the Urho water sample) be used to get environment data?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/000e83ce255afd88a5c3fef7c5cdf302.png" width="20"/> gawag:</div>
<blockquote>
<p>Could a camera with a FOV of 90 be used to dynamically create cubemaps used as environment maps? Could there be like a wandering camera that calculates a (new) cubemap for one object every six frame (one cubemap side each frame, so if you have 10 objects with an environment map every one gets updated all 60 frames)? Could that special camera render all 6 sides in one “frame” (sub-frame if you want)? </p>
</blockquote>
</aside>
<p>Creating dynamic cubemaps without 6 rendertextures per cubemap would become very costly very quick, and after filtering the cubemap for the majority of materials you would find it was not worth the cost. A better solution would be SSR where you do a screen space raytreace to capture the reflections, there are multiple methods of doing SSR but my preferred result is the one used by Frostbite 3 as it does not create a noisy texture like UE4 does under certain scenarios.</p>
<p>Results: <a data-bbcode="true" href="http://www.frostbite.com/wp-content/uploads/2015/08/Stochastic-Screen-Space-Reflections.mp4">http://www.frostbite.com/wp-content/uploads/2015/08/Stochastic-Screen-Space-Reflections.mp4</a><br/>
Paper: <a data-bbcode="true" href="http://www.frostbite.com/2015/08/stochastic-screen-space-reflections/">http://www.frostbite.com/2015/08/stochastic-screen-space-reflections/</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/68_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">gawag</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/39b53a8007c67ac331701696464c2601.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>[quote=“gawag”]Could a camera with a FOV of 90 be used to dynamically create cubemaps used as environment maps? Could there be like a wandering camera that calculates a (new) cubemap for one object every six frame (one cubemap side each frame, so if you have 10 objects with an environment map every one gets updated all 60 frames)? Could that special camera render all 6 sides in one “frame” (sub-frame if you want)? </p>
</blockquote>
</aside>
<p>Creating dynamic cubemaps without 6 rendertextures per cubemap would become very costly very quick, and after filtering the cubemap for the majority of materials you would find it was not worth the cost. A better solution would be SSR where you do a screen space raytreace to capture the reflections, there are multiple methods of doing SSR but my preferred result is the one used by Frostbite 3 as it does not create a noisy texture like UE4 does under certain scenarios.</p>
<p>Results: <a data-bbcode="true" href="http://www.frostbite.com/wp-content/uploads/2015/08/Stochastic-Screen-Space-Reflections.mp4" rel="nofollow noopener">http://www.frostbite.com/wp-content/uploads/2015/08/Stochastic-Screen-Space-Reflections.mp4</a><br/>
Paper: <a data-bbcode="true" href="http://www.frostbite.com/2015/08/stochastic-screen-space-reflections/" rel="nofollow noopener">http://www.frostbite.com/2015/08/stochastic-screen-space-reflections/</a>[/quote]<br/>
<img alt=":open_mouth:" class="emoji" src="../../../images2/84ff3f2f899574e7f3c12b412b5f9ffe.png" title=":open_mouth:"/><br/>
Wow that’s awesome! I want that!  <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/><br/>
I have no idea how to do that.  <img alt=":frowning:" class="emoji" src="../../../images2/2506cac83464f3f86e257fa414340d4c.png" title=":frowning:"/></p>
<p>I get the ideas behind that but how to do the raytracing? Is it done on the CPU? Or is the whole scene somehow moved to the graphics card to calculate there?<br/>
Are mirrors in principle also done like that?<br/>
I some games there is glass that partly mirrors, is partly transparent and is partly “bending” the viewing angle somehow. Is the bending similar?<br/>
I had no idea that such a thing is possible.</p>
<p>Edit: Added to wishlist <a  rel="nofollow noopener">github.com/urho3d/Urho3D/wiki/urho3d-wishlist</a></p>
<p>Edit2: Ah it seems to be not a real ray trace but a “depth buffer scan”: <a href="http://casual-effects.blogspot.de/2014/08/screen-space-ray-tracing.html" rel="nofollow noopener">casual-effects.blogspot.de/2014/ … acing.html</a><br/>
"…Games march 3D rays across the height field defined by a depth buffer to create very approximate screen-space reflections…"</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“gawag”]I get the ideas behind that but how to do the raytracing? Is it done on the CPU? Or is the whole scene somehow moved to the graphics card to calculate there?<br/>
Are mirrors in principle also done like that?[/quote]</p>
<p>The raytracing is done on the GPU in the post processing pass therefore it had details of the final rendered scene.<br/>
Mirrors tend to be render target therefore they have a dedicated camera that renders to the mirror, think of it like CCTV and a monitor, glass can be done this way although it would be slow so it tends to use the cubemap as SSR can only reflect whats visible.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/68_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">gawag</div>
          <div class="post_content">
<p>Just added an “Edit2” to my last post. Found that out already. Interesting idea though.<br/>
So SSR and PBR are post processing effects and not material effects, I see.</p>
<p>So if one want to render stuff not directly visible to the camera (like a mirror) one has to use something like the water in Urho does? I guess one could also do something like the portals in Portal with that.</p>
<p>Maybe I should make a new thread but how to read the depth buffer? Is there even one? That would be also good to make a depth blur effect but as I tried that there seemed to be no depth information.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/000e83ce255afd88a5c3fef7c5cdf302.png" width="20"/> gawag:</div>
<blockquote>
<p>So SSR and PBR are post processing effects and not material effects, I see.</p>
</blockquote>
</aside>
<p>I wouldnt say PBR is an effect and its not post provessing. PBR is a material system itself, it takes observable world values to allow artists to accurately create materials. It also allows for better plastic materials.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">boberfly</div>
          <div class="post_content">
<p>Great stuff!!!</p>
<p>I’d get rid of the YCoCg stuff, unless it’s easily <span class="hashtag">#ifdef</span>’d in and out as an optional optimisation.</p>
<p>I’ll see if I can get some stuff set up that tests this against a production renderer with similar shaders so that it can be calibrated and to see if the approximations are accurate enough. Maybe like using Appleseed+Gaffer (yet another unfinished project of mine is IECoreUrho support for Cortex/Gaffer).</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“boberfly”]Great stuff!!!</p>
<p>I’d get rid of the YCoCg stuff, unless it’s easily <span class="hashtag">#ifdef</span>’d in and out as an optional optimisation.</p>
<p>I’ll see if I can get some stuff set up that tests this against a production renderer with similar shaders so that it can be calibrated and to see if the approximations are accurate enough. Maybe like using Appleseed+Gaffer (yet another unfinished project of mine is IECoreUrho support for Cortex/Gaffer).[/quote]</p>
<p>I was planning to remove YCoCg at this point as it is only causing problems and i dont think it makes much of a difference at this point as developers can pick forward rendering.</p>
<p>Also just uploaded a video on youtube demonstrating PBR with a wide variety of materials from algorithmic share.<br/>
[video]<a href="https://youtu.be/6qfIHsG_MSU%5B/video%5D">https://youtu.be/6qfIHsG_MSU[/video]</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">boberfly</div>
          <div class="post_content">
<p>Very nice. I recognise that HDRI also… <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote no-group" data-username="boberfly">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/7ad3eca622ffc5627870e7e784d51ef3.png" width="20"/> boberfly:</div>
<blockquote>
<p>Very nice. I recognise that HDRI also… <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/></p>
</blockquote>
</aside>
<p>thanks, and the HDRI is from a public library of them <img alt=":slight_smile:" class="emoji" src="../../../images2/480f97b912eb537e18032299081e582a.png" title=":slight_smile:"/></p>
<p>In other news i feel like PBR is getting very close to a point where it is free for the master branch. All that remains is cleaning up deferred render path and Tube Lighting and it will match Unreals PBR feature set. I will look into square area lighting as there has been points where i have needed in the past on projects.</p>
<p>Oh and i also need to remove all the crap i added to the repo for testing like the 30+ materials that i got from algorithmic share</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">thebluefish</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/39b53a8007c67ac331701696464c2601.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>Oh and i also need to remove all the crap i added to the repo for testing like the 30+ materials that i got from algorithmic share</p>
</blockquote>
</aside>
<p>This has helped me a few times when I’ve accidentally pushed sensitive data to a public branch: <a href="https://help.github.com/articles/remove-sensitive-data/" rel="nofollow noopener">help.github.com/articles/remove-sensitive-data/</a></p>
<p>Who knows if you need to be that extreme, but sometimes it’s easier to clean it out than worry about potential licensing violations.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“thebluefish”]</p>
<p>This has helped me a few times when I’ve accidentally pushed sensitive data to a public branch: <a href="https://help.github.com/articles/remove-sensitive-data/">help.github.com/articles/remove-sensitive-data/</a></p>
<p>Who knows if you need to be that extreme, but sometimes it’s easier to clean it out than worry about potential licensing violations.[/quote]</p>
<p>Thanks, although i dont think its that bad, from what i can tell the materials are free to use and distribute, the only issue i have is that i made changes to default urho3d maps and materials for testing and i have to undo these changes and make a demo level</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2369_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Dave82</div>
          <div class="post_content">
<p>THIS is absolutely awesome !  <img alt=":open_mouth:" class="emoji" src="../../../images2/84ff3f2f899574e7f3c12b412b5f9ffe.png" title=":open_mouth:"/><br/>
Is this going to be officially added to Urho ?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“Dave82”]THIS is absolutely awesome !  <img alt=":open_mouth:" class="emoji" src="../../../images2/84ff3f2f899574e7f3c12b412b5f9ffe.png" title=":open_mouth:"/><br/>
Is this going to be officially added to Urho ?[/quote]</p>
<p>Thanks <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> and i do plan to merge it when its ready.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>You’ve come a long way with this project, Josh.  Awesome job!<br/>
I really liked the demo video.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“Lumak”]You’ve come a long way with this project, Josh.  Awesome job!<br/>
I really liked the demo video.[/quote]</p>
<p>Thanks and iv had alot of fun with it so far. There is still a little more work to do before i feel its ready but i think its in a very usable state and that alone makes me happy.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Updated First post to include more up to date images. Also added sphere lighting to the repository. This leads into my current issue of hitting a brick wall with tube lights, i will continue to work towards implementing it but for now it is not my priority so may not be included any time soon, for now i will focus on fixing deferred render paths to achieve identical results to forward render paths without compromising legacy Urho3D rendering.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>PBR is fully usable, before i consider merging the core PBR work can people please give me performance results from a wide verity of platforms.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Shylon</div>
          <div class="post_content">
<p>THANK you so MUCH <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/><br/>
is this link to download ?</p>
<p><a data-bbcode="true" href="https://github.com/dragonCASTjosh/Urho3D" rel="nofollow noopener">https://github.com/dragonCASTjosh/Urho3D</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>yea that is the download link <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
<p>Edit: just commited sample program that can be used for performance testing.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Hevedy</div>
          <div class="post_content">
<p>Downloaded and compiled but at run the scene all is empty just the skybox and text, and at open in editor the nodes are here but no mesh or material and at try to select manual material return shader errors o_O</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>send me a screne shot of the error</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Try the latest commit</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>How to change brightness of ambient light when used Zone Texture?</p>
<p>I have very sharp border when I use directional light<br/>
<a data-bbcode="true" href="http://savepic.ru/8993512.htm"><img alt="" height="" src="../../../images2/69430c1189530aecf43664281eb2d2ab.png" width=""/></a><br/>
Is it normal?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Shylon</div>
          <div class="post_content">
<p>I wonder, is there any capture mechanism for zone to capture or render to texture in its field?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“1vanK”]How to change brightness of ambient light when used Zone Texture?</p>
<p>I have very sharp border when I use directional light<br/>
<a data-bbcode="true" href="http://savepic.ru/8993512.htm"><img alt="" height="" src="../../../images2/69430c1189530aecf43664281eb2d2ab.png" width=""/></a><br/>
Is it normal?[/quote]</p>
<p>you can change the ambient light in the Zone options, the option your looking for is ambient color.<br/>
As doe the sharp transition, i beleive its a side affect of when i changed diffuse, not sure what the cause it at the moment but ill change the diffuse back to Lambert for now.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/39b53a8007c67ac331701696464c2601.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>you can change the ambient light in the Zone options, the option your looking for is ambient color.</p>
</blockquote>
</aside>
<p>not working for glossy material (like Copper)</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“1vanK”]<br/>
not working for glossy material (like Copper)[/quote]</p>
<p>Likely due to how it has been implemented, you can brighten metallic materials by increasing the defuse color in the material editor</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>May be implement multiplication Zone Texture * Ambient color?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ef19ff5c6f85c4920b8ebf7eda2e2ed6.png" width="20"/> 1vanK:</div>
<blockquote>
<p>May be implement multiplication Zone Texture * Ambient color?</p>
</blockquote>
</aside>
<p>I dont think thats the cause, it looks to be the metallic value is cancelling out any colour changes as there should be 0 diffuse on a metallic material, therefore boosting the diffuse means that the little bit of diffuse lefts from artefacts is amplified so you can see the color changes</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>But material reflected environment (take value from texture), so it this place we can increase brightness this texture</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/119_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">codingmonkey</div>
          <div class="post_content">
<p>On first my trying I build engine with gl renderer.<br/>
So with it, I got crashing of driver when I trying to assign material onto spheres from PBR folder (one by one).<br/>
then I rebuild engine with dx11.<br/>
Also see some buggy behavior (long material loading, you probably use ultra-res textures?).<br/>
Editor was opened and freeze, once.</p>
<p>this is log from PBRMaterials.bat (dx11)<br/>
<a data-bbcode="true" href="http://savepic.net/7918765.htm"><img alt="" height="" src="../../../images2/b2a91fa674641eccbcf8881583489034.png" width=""/></a></p>
<p>only work if open PBRScene Scene and assign materials.<br/>
also need find zone in scene and assign to it cubemap textures\cubemaps\6.xml, otherwise IBL not working I guess<br/>
<a data-bbcode="true" href="http://savepic.net/7929007.htm"><img alt="" height="" src="../../../images2/f75b4bdcabc44d83f5d8deae81ee2932.png" width=""/></a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ef19ff5c6f85c4920b8ebf7eda2e2ed6.png" width="20"/> 1vanK:</div>
<blockquote>
<p>But material reflected environment (take value from texture), so it this place we can increase brightness this texture</p>
</blockquote>
</aside>
<p>The problem with directly multiplying the reflection is that is will affect offset by the metallic value during a lighting pass, therefore the none metallics become brighter and metallics are darker until you increese the ambient till the point of the none metallics being white</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“codingmonkey”]So with it, I got crashing of driver when I trying to assign material onto spheres from PBR folder (one by one).<br/>
then I rebuild engine with dx11.<br/>
Also see some buggy behavior (long material loading, you probably use ultra-res textures?). [/quote]</p>
<p>This is likely entirly down to the high resolution images i use at the moment, hopefully the comunity provides some lower resolution images.</p>
<p>[quote=“codingmonkey”]only work if open PBRScene Scene and assign materials.<br/>
also need find zone in scene and assign to it cubemap textures\cubemaps\6.xml, otherwise IBL not working I guess[/quote]</p>
<p>That scene hasn’t been used in a few weeks so im supprised it worked at all</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Anyway it looks very cool, but probably it requires more powerful hardware than my old notebook xD</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ef19ff5c6f85c4920b8ebf7eda2e2ed6.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Anyway it looks very cool, but probably it requires more powerful hardware than my old notebook xD</p>
</blockquote>
</aside>
<p>probably because all the textures are 4096x4096 <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> try make a new scene and use the PBR… materials for example PBR00M,xml these do not include textures</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>I cant seam to replicate the errors with the demo script, so im not sure if i can make a fix at the moment.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>I think need way to configure count of samples. I decrease IMPORTANCE_SAMPLES to 4 and prefomance improved dramatically without noticeable deterioration in the quality</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ef19ff5c6f85c4920b8ebf7eda2e2ed6.png" width="20"/> 1vanK:</div>
<blockquote>
<p>I think need way to configure count of samples. I decrease IMPORTANCE_SAMPLES to 4 and prefomance improved dramatically without noticeable deterioration in the quality</p>
</blockquote>
</aside>
<p>it will likely be a feature at some point but im looking for the best way to do it, any ideas.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Just send this value to shader as parameter from material and clamp(2, 16) in shader</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ef19ff5c6f85c4920b8ebf7eda2e2ed6.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Just send this value to shader as parameter from material and clamp(2, 16) in shader</p>
</blockquote>
</aside>
<p>i didnt consider doing that, i mostly looked into passing is a a define from the render path or material</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Ideally, this parameter should send engine, that the player can adjust the quality of all materials</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<p>Like (view.cpp)</p>
<p>[code]void View::SetGlobalShaderParameters()<br/>
{<br/>
graphics_-&gt;SetShaderParameter(VSP_DELTATIME, frame_.timeStep_);<br/>
graphics_-&gt;SetShaderParameter(PSP_DELTATIME, frame_.timeStep_);</p>
<pre><code>if (scene_)
{
    float elapsedTime = scene_-&gt;GetElapsedTime();
    graphics_-&gt;SetShaderParameter(VSP_ELAPSEDTIME, elapsedTime);
    graphics_-&gt;SetShaderParameter(PSP_ELAPSEDTIME, elapsedTime);
}
</code></pre>
<p>}</p>
<p>void View::SetCameraShaderParameters(Camera* camera, bool setProjection)<br/>
{<br/>
if (!camera)<br/>
return;</p>
<pre><code>Matrix3x4 cameraEffectiveTransform = camera-&gt;GetEffectiveWorldTransform();

graphics_-&gt;SetShaderParameter(VSP_CAMERAPOS, cameraEffectiveTransform.Translation());
graphics_-&gt;SetShaderParameter(VSP_CAMERAROT, cameraEffectiveTransform.RotationMatrix());
graphics_-&gt;SetShaderParameter(PSP_CAMERAPOS, cameraEffectiveTransform.Translation());

float nearClip = camera-&gt;GetNearClip();
float farClip = camera-&gt;GetFarClip();
graphics_-&gt;SetShaderParameter(VSP_NEARCLIP, nearClip);
graphics_-&gt;SetShaderParameter(VSP_FARCLIP, farClip);
graphics_-&gt;SetShaderParameter(PSP_NEARCLIP, nearClip);
graphics_-&gt;SetShaderParameter(PSP_FARCLIP, farClip);
</code></pre>
<p>[/code]</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ef19ff5c6f85c4920b8ebf7eda2e2ed6.png" width="20"/> 1vanK:</div>
<blockquote>
<p>Ideally, this parameter should send engine, that the player can adjust the quality of all materials</p>
</blockquote>
</aside>
<p>ill look into that tomorrow <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> bug fixing for tonight.</p>
<p>also new commit to fix problem with area lights still rendering.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>I am unable to even test the latest changes via the MaterialTest.xml, my PC locks up on the attempt. I guess it’s the 4k textures, but not sure.</p>
<p>In my opinion the IBL should be using pre-filtered cubemaps rather than the method being used at the moment. You might see tools using the realtime method employed in these shaders (Substance Designer 4.5+ accepts unfiltered hdr panoramas), but a game engine that will be displaying a full scene worth of assets needs a more efficient way.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/87_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sabotage3d</div>
          <div class="post_content">
<p>In some cases pre-filtered cubemaps won’t work but it might be good option for more diffusive materials. Both UE4 and Unity have a roughness or metalness parameter to control the bluriness of the environment. From fully diffusive to fully reflective.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“hd_”]I am unable to even test the latest changes via the MaterialTest.xml, my PC locks up on the attempt. I guess it’s the 4k textures, but not sure.</p>
<p>In my opinion the IBL should be using pre-filtered cubemaps rather than the method being used at the moment. You might see tools using the realtime method employed in these shaders (Substance Designer 4.5+ accepts unfiltered hdr panoramas), but a game engine that will be displaying a full scene worth of assets needs a more efficient way.[/quote]</p>
<p>Game engines looks to be moving towards sampling the cubemaps, and in our case it may be better as people are not going to want to capture a cubemap then put it through an external program, and an internal sampler would be a fair bit of work. and what is causing the scene not to load? because im not able to replicate many of the issues.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>I don’t believe that, do you have a source? Unity and UE4 have tools to bake lighting, so it might not take extra effort from the developer, but it’s still performing the optimisation.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Epic is performing sampling on the GPU, these samples only apply on Cubemaps/Hemisphere maps captured from within the engine</p>
<p>[code]float3 DiffuseIBL( uint2 Random, float3 DiffuseColor, float Roughness, float3 N, float3 V )<br/>
{<br/>
N = normalize( N );<br/>
V = normalize( V );</p>
<pre><code>float3 DiffuseLighting = 0;

float NoV = saturate( dot( N, V ) );

const uint NumSamples = 32;
for( uint i = 0; i &lt; NumSamples; i++ )
{
	float2 E = Hammersley( i, NumSamples, Random );
	float3 L = TangentToWorld( CosineSampleHemisphere( E ).xyz, N );
	float3 H = normalize(V + L);

	float NoL = saturate( dot( N, L ) );
	float NoH = saturate( dot( N, H ) );
	float VoH = saturate( dot( V, H ) );

	if( NoL &gt; 0 )
	{
		float3 SampleColor = AmbientCubemap.SampleLevel( AmbientCubemapSampler, L, 0 ).rgb;

		float FD90 = ( 0.5 + 2 * VoH * VoH ) * Roughness;
		//float FD90 = 0.5 + 2 * VoH * VoH * Roughness;
		float FdV = 1 + (FD90 - 1) * pow( 1 - NoV, 5 );
		float FdL = 1 + (FD90 - 1) * pow( 1 - NoL, 5 );
</code></pre>
<p><span class="hashtag">#if</span> 1<br/>
// lambert = DiffuseColor * NoL / PI<br/>
// pdf = NoL / PI<br/>
DiffuseLighting += SampleColor * DiffuseColor * FdV * FdL * ( 1 - 0.3333 * Roughness );<br/>
<span class="hashtag">#else</span><br/>
DiffuseLighting += SampleColor * DiffuseColor;<br/>
<span class="hashtag">#endif</span><br/>
}<br/>
}</p>
<pre><code>return DiffuseLighting / NumSamples;
</code></pre>
<p>}</p>
<p>float3 SpecularIBL( uint2 Random, float3 SpecularColor, float Roughness, float3 N, float3 V )<br/>
{<br/>
float3 SpecularLighting = 0;</p>
<pre><code>const uint NumSamples = 32;
for( uint i = 0; i &lt; NumSamples; i++ )
{
	float2 E = Hammersley( i, NumSamples, Random );
	float3 H = TangentToWorld( ImportanceSampleGGX( E, Roughness ).xyz, N );
	float3 L = 2 * dot( V, H ) * H - V;

	float NoV = saturate( dot( N, V ) );
	float NoL = saturate( dot( N, L ) );
	float NoH = saturate( dot( N, H ) );
	float VoH = saturate( dot( V, H ) );
	
	if( NoL &gt; 0 )
	{
		float3 SampleColor = AmbientCubemap.SampleLevel( AmbientCubemapSampler, L, 0 ).rgb;

		float Vis = Vis_SmithJointApprox( Roughness, NoV, NoL );
		float Fc = pow( 1 - VoH, 5 );
		float3 F = (1 - Fc) * SpecularColor + Fc;

		// Incident light = SampleColor * NoL
		// Microfacet specular = D*G*F / (4*NoL*NoV) = D*Vis*F
		// pdf = D * NoH / (4 * VoH)
		SpecularLighting += SampleColor * F * ( NoL * Vis * (4 * VoH / NoH) );
	}
}

return SpecularLighting / NumSamples;
</code></pre>
<p>}<br/>
[/code]</p>
<p>source: <a data-bbcode="true" href="https://github.com/EpicGames/UnrealEngine/blob/97c8d3ef55e869e17ef149903eae2a33101381c9/Engine/Shaders/PostProcessAmbient.usf">https://github.com/EpicGames/UnrealEngine/blob/97c8d3ef55e869e17ef149903eae2a33101381c9/Engine/Shaders/PostProcessAmbient.usf</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>I couldn’t find where those two shader functions were actually used in the engine, link?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">theak472009</div>
          <div class="post_content">
<p>I don’t get what your goal is with the PBR Sinoid added. I am just curious as to why you are trying to change it? The original version works perfectly well. I am pretty sure it’s a work in progress but what is the reason for comparing the albedoInput.a (metallic) with Magic Number -50 in DeferrredLight pixel shader? Some comments would be nice.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote no-group" data-username="hd_">
<div class="title">
<div class="quote-controls"></div>
 hd_:</div>
<blockquote>
<p>I couldn’t find where those two shader functions were actually used in the engine, link?</p>
</blockquote>
</aside>
<p>I dont know UE4 enough to find the implementation but from the looks of it they use it in post processing.</p>
<aside class="quote no-group" data-username="theak472009">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/793e7255041ce2d6283799b98a189b08.png" width="20"/> theak472009:</div>
<blockquote>
<p>I don’t get what your goal is with the PBR Sinoid added. I am just curious as to why you are trying to change it? The original version works perfectly well. I am pretty sure it’s a work in progress but what is the reason for comparing the albedoInput.a (metallic) with Magic Number -50 in DeferrredLight pixel shader? Some comments would be nice.</p>
</blockquote>
</aside>
<p>Alot of the work i did was heading towards where Sinoid was going. Any changes i made where for rendering quality. As for the DeferredLight shader that was used for rendering experiments and shouldnt be used, if you want to use PBR in a deferred render path then you should used PBRdeferred. I currently removed comments to keep with the style of urho shaders but i will add them back once everything is fully stable.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>After some more testing i recomend using D3D11 if you wish to use PBR as D3D9 has major stutters for some reason. Gl seams ok from testing</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>I believe if we have an example scene with reasonable resolution textures then it would be ready to be merged with the master. the 4K textures are a drain for most systems</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>The major part of PBR is now a pull request <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/> it includes an example that does not use 4K textures and the slowest part of the demo is the 2 emissive textures but that shouldnt be a problem.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>Thank you.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/942_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">vivienneanthony</div>
          <div class="post_content">
<p>Hi,</p>
<p>Did PBR get pulled into the release of Urho3D? I can’t pull the newest version without ad-hocing nanodbc til the whole VS2015 is fixed. So, What do I need to use the PBR? I’m assuming copying the shader, technique, and sample materials.</p>
<p>Vivienne</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“vivienneanthony”]Hi,</p>
<p>Did PBR get pulled into the release of Urho3D? I can’t pull the newest version without ad-hocing nanodbc til the whole VS2015 is fixed. So, What do I need to use the PBR? I’m assuming copying the shader, technique, and sample materials.</p>
<p>Vivienne[/quote]</p>
<p>PBR is not yet merged as there are still some small fixes, as for what you need everything is there for you, just ensure you are using a PBR technique. There are a handful of example materials included</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/942_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">vivienneanthony</div>
          <div class="post_content">
<p>[quote=“dragonCASTjosh”][quote=“vivienneanthony”]Hi,</p>
<p>Did PBR get pulled into the release of Urho3D? I can’t pull the newest version without ad-hocing nanodbc til the whole VS2015 is fixed. So, What do I need to use the PBR? I’m assuming copying the shader, technique, and sample materials.</p>
<p>Vivienne[/quote]</p>
<p>PBR is not yet merged as there are still some small fixes, as for what you need everything is there for you, just ensure you are using a PBR technique. There are a handful of example materials included[/quote]</p>
<p>Ah. Okay.</p>
<p>I attempted to modify the Urho3D similiarly.  Most of it worked.</p>
<p>I have this messaged when I load a material. I looked for “environmentSpecular” in  your files but it’s not there so I’m not certain why that is showing up also.</p>
<p><code>[Mon Apr  4 09:11:05 2016] ERROR: Failed to compile pixel shader PBRLitSolid(IBL PBR):
0(1394) : error C7011: implicit cast from "vec4" to "vec3"
[Mon Apr  4 09:11:05 2016] ERROR: Failed to compile pixel shader PBRLitSolid(DIRLIGHT IBL PBR PERPIXEL):
0(1128) : error C1008: undefined variable "environmentSpecular"
[Mon Apr  4 09:11:05 2016] ERROR: Failed to compile pixel shader PBRLitSolid(IBL PBR PERPIXEL POINTLIGHT):
0(1128) : error C1008: undefined variable "environmentSpecular"
</code></p>
<p>Leaving this as a result.</p>
<p><a href="http://i.imgur.com/vdXMxmO.png" rel="nofollow noopener">i.imgur.com/vdXMxmO.png</a></p>
<p>Vivienne</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/1508150f71fcef53ebe1d65b4e91fa85.png" width="20"/> vivienneanthony:</div>
<blockquote>
<p>I have this messaged when I load a material. I looked for “environmentSpecular” in your files but it’s not there so I’m not certain why that is showing up also.</p>
</blockquote>
</aside>
<p>This is a known issue with OpenGL at the moment, im working on fixing the issues tonight.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/942_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">vivienneanthony</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/39b53a8007c67ac331701696464c2601.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>[quote=“vivienneanthony”]I have this messaged when I load a material. I looked for “environmentSpecular” in your files but it’s not there so I’m not certain why that is showing up also.</p>
</blockquote>
</aside>
<p>This is a known issue with OpenGL at the moment, im working on fixing the issues tonight.[/quote]</p>
<p>Ah. Ok. Im going see whats throwing the implicit vec4 to vec3 error then.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>[quote=“vivienneanthony”]</p>
<p>Ah. Ok. Im going see whats throwing the implicit vec4 to vec3 error then.[/quote]</p>
<p>that would be helpful, as for the other error you can solve it by changing the return of ImageBasedLighting located in IBL.glsl into cube</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Fixed OpenGL implementation, enjoy <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/942_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">vivienneanthony</div>
          <div class="post_content">
<aside class="quote no-group">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/3b3139e49465a4e9db8307b0879d27b9.png" width="20"/> dragonCASTjosh:</div>
<blockquote>
<p>Fixed OpenGL implementation, enjoy <img alt=":slight_smile:" class="emoji" src="../../../images2/33cb8d9bf277cdb113680cf5564b6764.png" title=":slight_smile:"/></p>
</blockquote>
</aside>
<p>Cool.</p>
<div class="lazyYT" data-height="270" data-parameters="feature=oembed&amp;wmode=opaque" data-width="480" data-youtube-id="6p66wzV8-ps" data-youtube-title="Animation Manager and PBR Testing"></div>
<p>I have to figure out what causes the dot in the first part in the lobby but the second half is checking out the materials and seeing how light affect it.</p>
<p>Vivienne</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Nice results although i noticed you wasnt using a Zone with a Zone texture, PBR iuses Image Based Lighting, this will correct the lighting color to the scene and add reflections to materials that need it. Zones in Urho have the ability to capture the scene from in editor so the reflections are of the area it is within. but overall nice video</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/81_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Enhex</div>
          <div class="post_content">
<p>Nice work. I tried it and found some problems which I posted about here:<br/>
<a href="http://discourse.urho3d.io/t/pbr-problems/1969/1">topic2058.html</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">namic</div>
          <div class="post_content">
<p>Was this merged? What’s missing for PBR? Any docs on it?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>It was merged. The docs are lacking, but if you are familiar with PBR from other engines and materials in Urho, then it’s simple enough. When making a material, pick one of the PBR techniques. I’ve only tested the metalness/roughness workflow, so in that case in the specular texture you feed a roughness (red) /metalness (green) texture. Then you use zones in Urho to provide a zone texture for image based lighting. There is an example scene you can open in the editor to see how it was done.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>Currently there is only Metalic/Roughness workflow, im currently working on improving the whole system then i will work on docs</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">JedTheKrampus</div>
          <div class="post_content">
<p>Have you considered using cmft (look it up on Github because I can’t post links) to prefilter cubemaps for each zone rather than importance sampling the cubemap?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote no-group" data-username="JedTheKrampus">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ad5b805ec596fb1c0278cf3665dae2aa.png" width="20"/> JedTheKrampus:</div>
<blockquote>
<p>Have you considered using cmft (look it up on Github because I can’t post links) to prefilter cubemaps for each zone rather than importance sampling the cubemap?</p>
</blockquote>
</aside>
<p>it was a consideration but file size limits on mobile would impact its ability to be used, engines like unreal get around this by implementing a simplified sampling system on the shader.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>Using cmft to prefilter the cubemaps is a good way to go, and supporting it in the workflow would be nice. From my previous tests, urho has trouble reading the outputs of cmft directly though.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/87_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sabotage3d</div>
          <div class="post_content">
<p>What is the current state of the PBR area lights? I stumbled upon this page it looks quite promising and there is working code as well: <a data-bbcode="true" href="https://eheitzresearch.wordpress.com/415-2/" rel="nofollow noopener">https://eheitzresearch.wordpress.com/415-2/</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1151_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">hdunderscore</div>
          <div class="post_content">
<p>I don’t believe anyone is working or at least close to an implementation yet. Open to all contributions <img alt=":smiley:" class="emoji" src="../../../images2/c16ddadcbd525aa6d219a1df596d362f.png" title=":smiley:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<p>i was looking into it but im low on time so feel free to take over with the feature <img alt=":slight_smile:" class="emoji" src="../../../images2/ab33f6c546ca85e7d84a4e3c32cd4034.png" title=":slight_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">namic</div>
          <div class="post_content">
<p>Does this implementation support parallax mapping?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-username="namic">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ab81e1e69acbed7cb63345f01789dc80.png" width="20"/> namic:</div>
<blockquote>
<p>Does this implementation support parallax mapping?</p>
</blockquote>
</aside>
<p>if I am not mistaken, there is no. But you can see it <a href="http://discourse.urho3d.io/t/parallax-mapping-opengl-only-for-now/1158/7">post10188.html</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">namic</div>
          <div class="post_content">
<p>Yes, but how can they work together?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/768_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">1vanK</div>
          <div class="post_content">
<aside class="quote no-group" data-username="namic">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ab81e1e69acbed7cb63345f01789dc80.png" width="20"/> namic:</div>
<blockquote>
<p>Yes, but how can they work together?</p>
</blockquote>
</aside>
<p>through editing shaders xD</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Lumak</div>
          <div class="post_content">
<p>I finally downloaded 1.5 yesterday, built it, and ran some samples.  And I was surprised to see the PBR demo! I ran it and it looks amazing! Thank you, josh!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote no-group" data-username="Lumak">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/b3b294bc4454bf21e07a40d7aa09761d.png" width="20"/> Lumak:</div>
<blockquote>
<p>I finally downloaded 1.5 yesterday, built it, and ran some samples.  And I was surprised to see the PBR demo! I ran it and it looks amazing! Thank you, josh!</p>
</blockquote>
</aside>
<p>I have improvement in the works, higher quality and much better performance.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/{size}.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">yushli</div>
          <div class="post_content">
<p>better quality and much better performance. Well, eager to see it show up in main branch…</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/87_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sabotage3d</div>
          <div class="post_content">
<p>Is the PBR currently compatible with mobile or it needs to be optimized?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/db4c02596e658dc9102b66ceb5fb9d80.png" width="20"/> sabotage3d:</div>
<blockquote>
<p>Is the PBR currently compatible with mobile or it needs to be optimized?</p>
</blockquote>
</aside>
<p>The current solution may work although, untested. The upcoming solution will be fast enough and most likely work the only issue is file-size as you will need to store every cubemap with multiple mips. it wouldnt be to hard to make a mobile solution as epic provide a full overview on how to do so the hardest part is getting mobile defines in shaders</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/87_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">sabotage3d</div>
          <div class="post_content">
<p>I have tried <span class="bbcode-b">EnvBRDFApprox</span> and<span class="bbcode-b"> D_Approx</span> with help from Sinoid from this blog:<a data-bbcode="true" href="https://www.unrealengine.com/blog/physically-based-shading-on-mobile" rel="nofollow noopener">https://www.unrealengine.com/blog/physically-based-shading-on-mobile</a>. And it was fast enough on older mobile devices. The results were quite good it just needed better spherical mapping for the environment. I don’t think pre-filtered mipmaps are the best solution as they are quite limited.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/774_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">dragonCASTjosh</div>
          <div class="post_content">
<aside class="quote">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/db4c02596e658dc9102b66ceb5fb9d80.png" width="20"/> sabotage3d:</div>
<blockquote>
<p>I have tried <span class="bbcode-b">EnvBRDFApprox</span> and<span class="bbcode-b"> D_Approx</span> with help from Sinoid from this blog:<a data-bbcode="true" href="https://www.unrealengine.com/blog/physically-based-shading-on-mobile">https://www.unrealengine.com/blog/physically-based-shading-on-mobile</a>. And it was fast enough on older mobile devices. The results were quite good it just needed better spherical mapping for the environment. I don’t think pre-filtered mipmaps are the best solution as they are quite limited.</p>
</blockquote>
</aside>
<p>Share your results if it improve things enough then i may look into that. currently im working on pre-filtered mipmaps although none pre-filtered cubemaps will also work just at a much lower quality. i also want to have urho filter the cubemaps to save developers time</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>