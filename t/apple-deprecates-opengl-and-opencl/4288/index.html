<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Apple deprecates OpenGL and OpenCL</title>
    <link rel="stylesheet" href="../../../archived.css" />
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']]}});
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>

  <body>
    <header class="header">
      <div class="title-span">
        <a href="../../../">
          <img src="../../../images/site-logo.png" height="40" alt="Urho3D" id="site-logo" />
        </a>
      </div>
    </header>

    <div class="main">
    <div class="archive-span">Archive 17/01/2023.</div>
    <h1 class="topic-title">Apple deprecates OpenGL and OpenCL</h1>
            <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/2836_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">extobias</div>
          <div class="post_content">
<p>All in favor of Metal<br/>
<a class="onebox" href="https://developer.apple.com/macos/whats-new/#deprecationofopenglandopencl" rel="nofollow noopener" target="_blank">https://developer.apple.com/macos/whats-new/#deprecationofopenglandopencl</a></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Sucks.<br/>
<span class="mention">@boberfly</span> it’s your chance! xD</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>That was expected. Anyway WTF. While you can expect Mac to take ages before open gl goes away, this is almost sure to be removed on next ios version (that is, ios 13). This means we probably won’t be able to ship anymore for ios in one year.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>It is actually an opportunity to see whether this project is dead as the fish or not.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>World needs to be saved!</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p><aside class="onebox githubblob">
<header class="source">
<a href="https://github.com/floooh/sokol/blob/master/sokol_gfx.h" rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://github.com/floooh/sokol/blob/master/sokol_gfx.h" rel="nofollow noopener" target="_blank">floooh/sokol/blob/master/sokol_gfx.h</a></h4>
<pre><code class="lang-h">#pragma once
/*
    sokol_gfx.h -- simple 3D API wrapper

    Do this:
        #define SOKOL_IMPL
    before you include this file in *one* C or C++ file to create the 
    implementation.

    In the same place define one of the following to select the rendering
    backend:
        #define SOKOL_GLCORE33
        #define SOKOL_GLES2
        #define SOKOL_GLES3
        #define SOKOL_D3D11
        #define SOKOL_METAL

    I.e. for the GL 3.3 Core Profile it should look like this:

    #include ...
</code></pre>

  This file has been truncated. <a href="https://github.com/floooh/sokol/blob/master/sokol_gfx.h" rel="nofollow noopener" target="_blank">show original</a>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<br/>
<aside class="onebox githubblob">
<header class="source">
<a href="https://github.com/bkaradzic/bgfx/blob/master/src/renderer_mtl.h" rel="nofollow noopener" target="_blank">github.com</a>
</header>
<article class="onebox-body">
<h4><a href="https://github.com/bkaradzic/bgfx/blob/master/src/renderer_mtl.h" rel="nofollow noopener" target="_blank">bkaradzic/bgfx/blob/master/src/renderer_mtl.h</a></h4>
<pre><code class="lang-h">/*
 * Copyright 2011-2015 Attila Kocsis, Branimir Karadzic. All rights reserved.
 * License: https://github.com/bkaradzic/bgfx#license-bsd-2-clause
 */

#ifndef BGFX_RENDERER_METAL_H_HEADER_GUARD
#define BGFX_RENDERER_METAL_H_HEADER_GUARD

#include "bgfx_p.h"

#if BGFX_CONFIG_RENDERER_METAL

#import &lt;QuartzCore/CAMetalLayer.h&gt;
#import &lt;Metal/Metal.h&gt;
#import &lt;MetalKit/MetalKit.h&gt;

#if BX_PLATFORM_IOS
#	import &lt;UIKit/UIKit.h&gt;
#endif // BX_PLATFORM_*

</code></pre>

  This file has been truncated. <a href="https://github.com/bkaradzic/bgfx/blob/master/src/renderer_mtl.h" rel="nofollow noopener" target="_blank">show original</a>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>Indeed. Everybody welcome the Urho showdown.<img alt=":fish:" class="emoji" src="../../../images2/5881b6dc957d8abd2a315b6bd851721c.png" title=":fish:"/><img alt=":tropical_fish:" class="emoji" src="../../../images2/5f5505ed61e8e259e3df373ebbdf7e89.png" title=":tropical_fish:"/><img alt=":blowfish:" class="emoji" src="../../../images2/6ac3e22c1b6fdf901e89b6d3bf93170b.png" title=":blowfish:"/><br/>
Will it survive, or will we have to rename it “the deadfish engine?”</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>MoltenVK, translation layer from Vulkan to Metal is open sourced -<br/>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/298b47bcb25b5f93b2f65fdd18e4cc1a.ico" width="32"/>
<a href="https://github.com/KhronosGroup/MoltenVK" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="400" src="../../../images2/944405adafb9330ec31b9d75277c31c5.png" width="400"/>
<h3><a href="https://github.com/KhronosGroup/MoltenVK" rel="nofollow noopener" target="_blank">KhronosGroup/MoltenVK</a></h3>
<p>MoltenVK is an implementation of the high-performance, industry-standard Vulkan graphics and compute API, that runs on Apple's Metal graphics framework, bringing Vulkan to iOS and macOS. - Khro...</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
</p>
<p>Currently, we have DX9, DX11, OpenGL renderers.<br/>
The practical way to survive for Urho is -</p>
<ul>
<li>Add Vulkan (especially for Android)</li>
<li>Support Metal (via something as MoltenVK or directly by using Metal API)</li>
<li>Abandon DX9 (goodbye a few WinXP users)</li>
<li>Optional support for DX12 (DX11 is good enough for a lightweight game engine)</li>
<li>We are able to be more advanced for the graphics, sitting on the modern graphics APIs: DX11/Vulkan/Metal</li>
</ul>
<p>Edit: for optimists, we only need to add one Vulkan renderer <img alt=":sweat_smile:" class="emoji" src="../../../images2/677108e2ca3184440222fa48fee4f409.png" title=":sweat_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>Or add BGFX backend and don’t care anymore <img alt=":laughing:" class="emoji" src="../../../images2/f1b3f4dd9f845d1069864c322071dffe.png" title=":laughing:"/><br/>
BGFX has its own problems tho. Too highlevel batch processing is one of them.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<p>I also wonder what Apple is going to do with WebGL to keep it working in iOS browsers.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1493_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">TheComet</div>
          <div class="post_content">
<p>Excuse my ignorance, but I always thought Vulkan ran directly on Mac. Why would you need a vulkan-to-metal layer?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/298b47bcb25b5f93b2f65fdd18e4cc1a.ico" width="32"/>
<a href="https://github.com/KhronosGroup/MoltenVK" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="400" src="../../../images2/944405adafb9330ec31b9d75277c31c5.png" width="400"/>
<h3><a href="https://github.com/KhronosGroup/MoltenVK" rel="nofollow noopener" target="_blank">KhronosGroup/MoltenVK</a></h3>
<p>MoltenVK is an implementation of the high-performance, industry-standard Vulkan graphics and compute API, that runs on Apple's Metal graphics framework, bringing Vulkan to iOS and macOS. - Khro...</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>Even if Urho had Vulkan shaders, you would need this on Mac Os / Ios<br/>
In short only Metal and Open gl are supported by Apple as of now.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/1437_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">elix22</div>
          <div class="post_content">
<p>I am afraid that no one will add any support for Metal .</p>
<p>The best way  would be to take an off the shelf  cross platform solution that is actively developed , i.e. BGFX.</p>
<p>Another option  would be to use ANGLE with an Vulkan backend which is currently under development  and put it on top of  MoltenVK</p>
<aside class="onebox whitelistedgeneric">
<header class="source">
<img class="site-icon" height="32" src="../../../images2/298b47bcb25b5f93b2f65fdd18e4cc1a.ico" width="32"/>
<a href="https://github.com/google/angle/tree/master/src/libANGLE/renderer/vulkan" rel="nofollow noopener" target="_blank">GitHub</a>
</header>
<article class="onebox-body">
<img class="thumbnail onebox-avatar" height="400" src="../../../images2/12f53e9c3fb58fb1ec0d7ecdf5f84342.png" width="400"/>
<h3><a href="https://github.com/google/angle/tree/master/src/libANGLE/renderer/vulkan" rel="nofollow noopener" target="_blank">google/angle</a></h3>
<p>A conformant OpenGL ES implementation for Windows, Mac and Linux. - google/angle</p>
</article>
<div class="onebox-metadata">
</div>
<div style="clear: both"></div>
</aside>
<p>So the translation would be :   OpenGL ES -&gt; Angle -&gt; Vulkan -&gt; MoltenVK</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/73_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">artgolf1000</div>
          <div class="post_content">
<p>Urho heavily dependents on OpenGL, I have been studying Metal for several days, there are too few tutorials and examples to cover all cases, such as water, grass etc. To port the render part, you need to re-write nearly all codes, include c++ part and shader part.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/821_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">WangKai</div>
          <div class="post_content">
<p>Not hard for Po, the kungfu panda. As rabbit and pig, I’m calling for the panda to save the world, or his fish master <img alt=":sweat_smile:" class="emoji" src="../../../images2/e83d49a7d35d2f0e03420c06d5fa27ad.png" title=":sweat_smile:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<aside class="quote no-group" data-post="9" data-topic="4288" data-username="Eugene">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/ae663b3d37eca5ee603f9e0610f8f829.png" width="20"/> Eugene:</div>
<blockquote>
<p>Too highlevel batch processing is one of them.</p>
</blockquote>
</aside>
<p>I’m trying bgfx these days. Could you elaborate on this?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="16" data-topic="4288">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/3a667dbabedb5a9315d10fc76df801fd.png" width="20"/> johnnycable:</div>
<blockquote>
<p>I’m trying bgfx these days. Could you elaborate on this?</p>
</blockquote>
</aside>
<p>AFAIK batches are totally independent.<br/>
If you want process 20k batches, you have to fill every batch with all possible data including all shader uniforms.</p>
<p>It allows more optimization, but require more processing.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/807_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">gunbolt</div>
          <div class="post_content">
<p>When’s the next release of Urho3D ? Is the project really dead in the water ? It’s been a long time since 1.7 and <a href="http://slant.co" rel="nofollow noopener">slant.co</a> is saying the popularity of Urho3d is on the decline.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/3290_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Modanung</div>
          <div class="post_content">
<p>I’d say resources are low on many fronts and we lost our commander, but there sure is a pulse and steady progress on this already very functional engine. What <em>lightweight</em> bells and whistles did you have in mind?<br/>
As you may know from <a href="http://www.mikseri.net/artists/urho.114651.php">metal lore</a>, Urho is quite comfortable in the dark, and as long as it works for Linux it works for me. <img alt=":+1:" class="emoji" src="../../../images2/839de69da74ad690eef135029e0320bc.png" title=":+1:"/></p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/807_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">gunbolt</div>
          <div class="post_content">
<p>What lightweight bells and whistles? An easy way to export project to Android Studio for compilation/signing. To me, urho3d is feature complete for now. Just missing the most important obvious support for Android.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/4_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">weitjong</div>
          <div class="post_content">
<p>If you really look at the recent release history then you should know usually Urho only release about one version a year and that version 1.8 is not overdue yet. Also note that we are not in a hurry of releasing anything. It’s ready when it’s ready. And as for Android build support using Gradle out of the box is just perhaps a day work. The problem is, no one works full day for this project.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>A good intro tutorial is here, albeit old: <a href="https://www.raywenderlich.com/146414/metal-tutorial-swift-3-part-1-getting-started" rel="nofollow noopener">https://www.raywenderlich.com/146414/metal-tutorial-swift-3-part-1-getting-started</a><br/>
Anyway just reading it is sufficient to agree to what you say: it would take a complete rewrite. Difficult.<br/>
Besides that, I’ve checked out bgfx. Same, even worst; that’s more low-level too, imho. That’s another rewrite.<br/>
No opt-out of open gl as of now. Bye bye, Apple.</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/902_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">Eugene</div>
          <div class="post_content">
<aside class="quote no-group" data-post="23" data-topic="4288">
<div class="title">
<div class="quote-controls"></div>
<img alt="" class="avatar" height="20" src="../../../images2/3a667dbabedb5a9315d10fc76df801fd.png" width="20"/> johnnycable:</div>
<blockquote>
<p>Besides that, I’ve checked out bgfx. Same, even worst; that’s more low-level too, imho</p>
</blockquote>
</aside>
<p><span class="mention">@boberfly</span> had some progress with it.<br/>
Why do you think that BGFX would be even harder to adopt?</p>
          </div>
        </div>
      </div>

      <div class="post_container">
        <div class="avatar_container">
          <img src="../../../images/788_2.png" class="avatar" />
        </div>
        <div class="post">
          <div class="user_name">johnnycable</div>
          <div class="post_content">
<p>The metal approach looks like much Urho; high level abstraction. I feel bgfx is abstracted someway but low level at the same time. Just a feeling, probably stemming from differences between c++ and swift.<br/>
Not really sure anyway about which would be tougher to integrate in Urho…</p>
          </div>
        </div>
      </div>


    </div>
  </body>
</html>